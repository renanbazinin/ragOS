{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Deadlocks and Synchronization",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 19:01:27",
    "context_chunks_used": 5,
    "context_lectures": [
      15
    ],
    "token_usage": {
      "prompt_tokens": 1917,
      "output_tokens": 896,
      "total_tokens": 6118
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Deadlocks and Synchronization"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "עקרונות תכנות נכון, כגון אנקפסולציה ושימוש ב'קופסאות שחורות' (black boxes) עבור פעולות של אובייקטים, נחשבים חיוניים לפיתוח תוכנה מודרנית. עם זאת, חומר השיעור מציין כי עקרונות אלו 'לא עובדים טוב עם העניין של סנכרון, מקביליות וקיפאון'. איזו מהטענות הבאות מסבירה בצורה הטובה ביותר מדוע אנקפסולציה עלולה להקשות על מניעה או זיהוי של קיפאונות במערכות מקביליות, על פי חומר השיעור?",
      "code_snippet": "//Thread 1::\nlock(&L1);\nlock(&L2);\n\n//Thread 2::\nlock(&L2);\nlock(&L1);",
      "options": [
        "א. אנקפסולציה מפחיתה את הצורך במנעולים על ידי ריכוז משאבים בתוך אובייקטים, ובכך מצמצמת את הסיכוי לקיפאון.",
        "ב. כאשר אובייקט חושף רק ממשק (API) ופעולותיו הפנימיות תופסות מנעולים וקוראות לפעולות אחרות, הסדר והתלות בין תפיסות המנעולים נסתרים מהקוד הקורא, מה שמונע שליטה על סדר זה ועלול להוביל לקיפאון.",
        "ג. אנקפסולציה מחייבת שכל המנעולים יהיו גלובליים ולא פרטיים לאובייקטים, ובכך יוצרת נקודות חולשה שקל יותר לתקוף אותן באמצעות קיפאונות.",
        "ד. חלוקה לאובייקטים קטנים, עיקרון הנגזר מאנקפסולציה, מבטיחה שכל אובייקט יטפל במנעול יחיד בלבד, ובכך מונעת את התנאי של המתנה מעגלית."
      ]
    },
    "solution": {
      "correct_option": "ב",
      "explanation": "התשובה הנכונה היא ב'. חומר השיעור מציין במפורש כי 'אם אנחנו קוראים לפעולה של אובייקט, כתכנות מונחה עצמים אנחנו רואים את הפעולה כקופסא שחורה. אבל אם הפעולה הזו תופסת מנעול והיא קוראת לפעולות נוספות, עלול להיגרם מצב של קיפאון כי אין לנו שליטה מי תופס את המנעול, מתי ובאיזה סדר'. עקרון האנקפסולציה, שמטרתו להסתיר את פרטי המימוש הפנימיים של אובייקט, הופך לחיסרון בהקשר של מקביליות וקיפאונות. כאשר פעולה מוסתרת תופסת מנעולים בסדר מסוים, וייתכן שגם קוראת לפעולות נוספות שגם הן תופסות מנעולים, הקוד הקורא לפעולה זו אינו מודע לסדר תפיסת המנעולים הפנימי. חוסר שליטה וידע זה מקשה על מניעת תנאים לקיפאון כמו המתנה מעגלית (כפי שמודגם בקוד המצורף), שכן לא ניתן להבטיח סדר עקבי של תפיסת מנעולים על פני קריאות שונות לאובייקטים או בתוך קריאות מקוננות."
    }
  }
}