{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Deadlocks",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 17:59:27",
    "context_chunks_used": 5,
    "context_lectures": [
      16,
      15
    ],
    "token_usage": {
      "prompt_tokens": 2076,
      "output_tokens": 786,
      "total_tokens": 4995
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Deadlocks"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "בהינתן מערכת המשתמשת במספר מנעולים (locks), כאשר כל מנעול בנפרד הוכח כ\"חופשי מקיפאון\" (deadlock freedom) ואינו יכול לגרום לקיפאון בשימוש עצמאי. מדוע עדיין ייתכן מצב של קיפאון (deadlock) במערכת הכוללת?",
      "code_snippet": "//Thread 1::\nlock(&L1);\nlock(&L2);\n\n//Thread 2::\nlock(&L2);\nlock(&L1);",
      "options": [
        "א. תכונת ה\"חופשי מקיפאון\" אינה תכונה הרכבתית, ולכן שילוב של מנעולים בודדים, גם אם כל אחד מהם \"חופשי מקיפאון\", אינו מבטיח שהמערכת כולה תהיה חופשית מקיפאון.",
        "ב. קיפאון במערכת כזו יכול להתרחש רק אם אחד המנעולים, למרות ההוכחה, אינו באמת \"חופשי מקיפאון\" בפועל.",
        "ג. קיפאון נגרם תמיד כתוצאה מכשל חומרה המונע שחרור מנעולים, ולא קשור לאופן השימוש בהם על ידי תוכנה.",
        "ד. מצב כזה של קיפאון בלתי אפשרי, שכן אם כל רכיב בודד חופשי מקיפאון, גם המערכת כולה חייבת להיות חופשית מקיפאון באופן מוחלט."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "ההסבר הנכון מתבסס על העיקרון של- \"אין תכונת הרכבה\" (no composition property) עבור deadlocks, כפי שמופיע בחומר הלימוד. נאמר במפורש: \"ל-deadlock אין תכונת הרכבה. כלומר אם ניקח שני מנעולים שבשניהם אין deadlocks ונשתמש בשניהם, זה לא מבטיח שלא יהיו לנו deadlocks. כל מנעול בפני עצמו יגרום שבשימוש שלו ספציפית לא יהיו deadlocks, אבל השילוב שלהם כן יכול לגרום ל-deadlock.\" המשמעות היא שאף על פי שמנעול בודד עשוי להיות מתוכנן כך שלא ייווצר בו deadlock בשימוש עצמאי (כלומר, הוא מקיים deadlock freedom), הדרך שבה מנעולים שונים משולבים ונתפסים על ידי חוטים שונים (למשל, בסדר הפוך כפי שמתרחש בתנאי \"המתנה מעגלית\" - circular wait, כפי שמודגם בדוגמת הקוד) יכולה ליצור מצב של קיפאון במערכת הכוללת. לכן, האפשרות ששילוב מנעולים \"חופשיים מקיפאון\" יוביל לקיפאון היא נכונה ומצביעה על היעדר תכונת ההרכבה."
    }
  }
}