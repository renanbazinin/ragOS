{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Deadlocks and Synchronization",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 19:01:07",
    "context_chunks_used": 5,
    "context_lectures": [
      15
    ],
    "token_usage": {
      "prompt_tokens": 1917,
      "output_tokens": 1005,
      "total_tokens": 5836
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Deadlocks and Synchronization"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "בהתבסס על חומר ההרצאה, מדוע עקרונות תכנות נכון כמו אנקפסולציה ותכנות מונחה עצמים (המתייחס לפעולות כ'קופסה שחורה') מקשים על מניעת קיפאון במערכות מקביליות, במיוחד בהתחשב בכך של-deadlock אין תכונת הרכבה?",
      "code_snippet": null,
      "options": [
        "א. אנקפסולציה מונעת מהמתכנת לדעת באילו מנעולים פעולות פנימיות משתמשות ובאיזה סדר, מה שפוגע ביכולת לאכוף סדר עקבי לרכישת מנעולים (ובכך למנוע המתנה מעגלית). בנוסף, העובדה שמנעולים בודדים עשויים להיות חופשיים מקיפאון אינה מבטיחה שילובם יהיה חופשי מקיפאון, כיוון של-deadlock אין תכונת הרכבה.",
        "ב. עקרונות אלו גורמים למערכת להגיע למצב של הרעבה (starvation) במקום קיפאון, שכן חוטים נאלצים להמתין ללא הגבלת זמן למשאבים, אך המערכת כולה עדיין מתקדמת.",
        "ג. תכנות מונחה עצמים מחייב כל חוט לתפוס את כל המשאבים הדרושים לו בבת אחת (hold and wait), מה שמגביר את הסיכוי לקיפאון במקום למנוע אותו על ידי שחרור משאבים באופן יזום.",
        "ד. אנקפסולציה מקשה על איתור וניפוי שגיאות של קיפאונות לאחר שהם כבר התרחשו, אך אינה הגורם הישיר לקיומם או לקושי במניעתם מלכתחילה."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "ההרצאה מסבירה כי עקרונות תכנות נכון כגון אנקפסולציה ותכנות מונחה עצמים, הרואים פעולות כ'קופסה שחורה', אינם עובדים טוב עם מנעולים וקיפאון. הסיבה היא שאין לנו שליטה או ידיעה איזה מנעול נתפס, מתי ובאיזה סדר כאשר קוראים לפעולות של אובייקט. חוסר שליטה זה מונע את היכולת לאכוף סדר אחיד לרכישת מנעולים, ובכך מקשה למנוע את תנאי ה'המתנה מעגלית' (circular wait), שהוא אחד מארבעת התנאים ההכרחיים לקיפאון. בנוסף, ההרצאה מציינת במפורש של-deadlock אין 'תכונת הרכבה' (composition property), כלומר, גם אם ניקח שני מנעולים שבשניהם אין deadlocks בנפרד, שילובם אינו מבטיח שלא ייווצרו deadlocks. שילוב שני ההיבטים הללו – חוסר השליטה בסדר רכישת מנעולים בתוך קוד אנקפסולציה והעדר תכונת ההרכבה – הופך את מניעת הקיפאון למורכבת במיוחד. אפשרות ב' שגויה מכיוון שהרעבה (starvation) מוגדרת במצגת כמצב שבו המערכת כולה מתקדמת, בניגוד לקיפאון. אפשרות ג' שגויה מכיוון שאנקפסולציה אינה מחייבת 'hold and wait', אלא דווקא מונעת שליטה על אופן רכישת המשאבים. אפשרות ד' נכונה חלקית בכך שאנקפסולציה מקשה על איתור באגים, אך ההרצאה מדגישה שהיא משפיעה ישירות גם על *מניעת* הקיפאון מלכתחילה עקב חוסר השליטה."
    }
  }
}