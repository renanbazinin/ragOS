{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Mutexes",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-14 17:33:52",
    "context_chunks_used": 5,
    "context_lectures": [
      10,
      11,
      13,
      14,
      16
    ],
    "token_usage": {
      "prompt_tokens": 2001,
      "output_tokens": 561,
      "total_tokens": 3802
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Mutexes"
    ],
    "difficulty_estimation": "Medium",
    "content": {
      "text": "מה קורה למנעול (mutex) שחוט מחזיק בו, כאשר החוט קורא לפעולת `wait` על משתנה תנאי (condition variable)?",
      "code_snippet": "lock(&m1);\nwait(&cv1, &m1);\nunlock(&m1);\n\n// Atomic breakdown of wait:\n// unlock(&m1);\n// wait_for_signal(&cv1);\n// // after waking up:\n// lock(&m1);",
      "options": [
        "א. החוט ממשיך להחזיק במנעול בזמן שהוא ממתין לאות (signal).",
        "ב. החוט משחרר את המנעול, נחסם וממתין לאות, ולאחר מכן תופס מחדש את המנעול כשהוא מתעורר.",
        "ג. המנעול נהרס באופן אוטומטי כדי למנוע קיפאון (deadlock).",
        "ד. החוט משחרר את המנעול ומיד מנסה לתפוס אותו מחדש בלולאת המתנה פעילה (busy-wait)."
      ]
    },
    "solution": {
      "correct_option": "ב",
      "explanation": "כפי שמפורט בחומר ההרצאה, כאשר חוט קורא לפעולת `wait` על משתנה תנאי ומחזיק במנעול, הפעולה `wait` מבצעת באופן אטומי שחרור של המנעול, ולאחר מכן חוסמת את החוט עד שיקבל אות (signal) ממשתנה התנאי. רק לאחר שהחוט מתעורר ומקבל את האות, הוא תופס מחדש את המנעול ורק אז ממשיך בביצוע. פעולה זו חיונית כדי לאפשר לחוטים אחרים להיכנס לקטע הקריטי, לשנות את התנאי שעליו ממתינים, ולשלוח את האות, ובכך למנוע קיפאון. האפשרויות האחרות אינן מתארות את ההתנהגות הנכונה של `wait` כפי שהוצגה בחומר."
    }
  }
}