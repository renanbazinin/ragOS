{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "File Systems",
    "topic_hint": "Crash Consistency",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 18:20:24",
    "context_chunks_used": 5,
    "context_lectures": [
      20,
      21,
      22
    ],
    "token_usage": {
      "prompt_tokens": 1936,
      "output_tokens": 854,
      "total_tokens": 5731
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "File Systems",
    "topic": [
      "Crash Consistency"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "בהתייחס לבעיית ה-Crash Consistency במערכות קבצים, ובהתבסס על תיאור פעולת הוספת 4KB לקובץ קיים (append) והמגבלות של כלי ה-File System Checker (fsck) כפי שהוצגו בחומר ההרצאה, איזה מהתרחישים הבאים של קריסה (crash) יוביל למצב של חוסר עקביות במערכת הקבצים שלא יזוהה על ידי fsck, כאשר נראה כי המטא-דאטה תקין אך תוכן הנתונים בפועל אינו תקין?",
      "code_snippet": null,
      "options": [
        "א. קריסה מתרחשת לאחר שבלוק הנתונים החדש הוקצה וסומן ב-bitmap כתפוס, ולאחר שה-inode עודכן להצביע לבלוק החדש, אך לפני שהנתונים בפועל נכתבו לבלוק זה.",
        "ב. קריסה מתרחשת לאחר שהנתונים נכתבו לבלוק הנתונים החדש, אך לפני שבלוק זה סומן ב-bitmap כתפוס וגם לפני שה-inode עודכן להצביע אליו.",
        "ג. קריסה מתרחשת לאחר שה-inode עודכן להצביע לבלוק הנתונים החדש, אך לפני שבלוק הנתונים החדש הוקצה וסומן ב-bitmap כתפוס, ולפני שהנתונים נכתבו אליו.",
        "ד. קריסה מתרחשת בדיוק במהלך כתיבת הנתונים לבלוק החדש, באופן חלקי, כאשר כל המטא-דאטה (bitmap ו-inode) כבר עודכן."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "התשובה הנכונה היא א'. חומר ההרצאה מציין במפורש כי כלי ה-File System Checker (fsck) אינו יכול לגלות את כל סוגי חוסר העקביות. דוגמה ספציפית לכך היא מצב בו \"inode מצביע ל-דאטה כלשהו, בלי data block שנכתב לשם, וב-bitmap הדאטה הזה מסומן כתפוס. כלומר מצב מערכת הקבצים נראה תקין, אף לא כתבנו את הדאטה לדאטה בלוק בפועל. יש שם זבל. את המצב הזה הכלי הנ\"ל לא יכול לגלות.\" (הרצאה 21, קטע 15). תרחיש זה מתרחש כאשר הקריסה מתרחשת לאחר שכל עדכוני המטא-דאטה הנדרשים (הקצאת בלוק חדש וסימונו ב-bitmap, ועדכון ה-inode להצביע אליו) הושלמו בהצלחה, אך לפני שפעולת הכתיבה של הנתונים בפועל לבלוק זה בוצעה במלואה. במצב כזה, מערכת הקבצים נראית עקבית מבחינת המטא-דאטה שלה, אך הבלוק שאליו מצביע ה-inode מכיל 'זבל' (נתונים לא תקינים או ישנים), ו-fsck לא יבחין בכך כיוון שהוא אינו בודק את תוכן הנתונים עצמם אלא רק את עקביות המטא-דאטה."
    }
  }
}