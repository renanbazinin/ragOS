{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Atomic Operations and Synchronization",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-14 19:07:40",
    "context_chunks_used": 5,
    "context_lectures": [
      11,
      14,
      15
    ],
    "token_usage": {
      "prompt_tokens": 1926,
      "output_tokens": 982,
      "total_tokens": 5605
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Atomic Operations and Synchronization"
    ],
    "difficulty_estimation": "Medium",
    "content": {
      "text": "מהי ההגדרה הנכונה ביותר לפעולה אטומית במערכת הפעלה, וכיצד היא מושגת?",
      "code_snippet": null,
      "options": [
        "א. פעולה אטומית היא פעולה המבצעת את כל שלביה ברצף ללא הפרעה מחוטים אחרים, וניתן להשיגה באמצעות פקודות חומרה מיוחדות או מנעולים (mutexes).",
        "ב. פעולה אטומית היא פעולה שרק חוט אחד יכול לבצע אותה בכל רגע נתון, והיא מושגת תמיד על ידי קריאה למערכת ההפעלה שתבצע את הפעולה.",
        "ג. פעולה אטומית היא פעולה שמשנה את מצב המערכת בצורה בלתי הפיכה, והיא מושגת רק באמצעות פקודות חומרה כמו __sync_fetch_and_add.",
        "ד. פעולה אטומית היא פעולה שמתבצעת במהירות רבה במיוחד, והיא מושגת על ידי הימנעות מכל סוג של סינכרון."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "פעולה אטומית היא פעולה המובטחת להתבצע במלואה, ללא הפרעה או התערבות מחוטים או תהליכים אחרים, כאילו הייתה פעולה בודדת ובלתי ניתנת לחלוקה. חומר ההרצאה מתאר \"atomicity violation\" כהפרה של הכוונה ששתי שורות קוד ירוצו \"בבת אחת\" (אטומיות).\nניתן להשיג אטומיות בשתי דרכים עיקריות, שתיהן מוזכרות בחומר ההרצאה:\n1.  **פקודות חומרה אטומיות:** המעבד מספק פקודות מיוחדות (כמו __sync_fetch_and_add או TestAndSet) המבצעות מספר פעולות באופן אטומי, כלומר, כיחידה אחת בלתי ניתנת להפרעה. ההרצאה מציינת: \"פעולות אטומיות - פעולות חומרה שיש במעבד, שבבת אחת עושות כמה פעולות.\"\n2.  **מנגנוני נעילה (כמו mutexes):** על ידי תפיסת מנעול לפני קטע קוד קריטי ושחרורו לאחריו, אנו מבטיחים שרק חוט אחד יוכל להיכנס לקטע זה בכל רגע נתון, ובכך הופכים את קטע הקוד לאטומי ביחס לגישה למשאבים המשותפים המוגנים על ידי המנעול. ההרצאה מציגה את זה כפתרון ל-\"atomicity violation\": \"הפתרון לכך: מנעול. אם התכוונו שזה יהיה אטומי... נתפוס את המנעול בקטע הקוד שהתכוונו שיהיה אטומי\".\n\nלגבי שאר האפשרויות:\n*   אפשרות ב' שגויה מכיוון שאטומיות לא מושגת *תמיד* על ידי קריאה למערכת ההפעלה; פקודות חומרה אטומיות הן דוגמה לכך.\n*   אפשרות ג' שגויה מכיוון ששינוי בלתי הפיך אינו ההגדרה של אטומיות, ואטומיות אינה מושגת *רק* באמצעות פקודות חומרה (מנעולים הם דרך נוספת).\n*   אפשרות ד' שגויה לחלוטין. פעולות אטומיות אינן בהכרח מהירות יותר (החומר מציין שיש שיקולי יעילות), והן מהוות סוג של סינכרון, לא הימנעות ממנו."
    }
  }
}