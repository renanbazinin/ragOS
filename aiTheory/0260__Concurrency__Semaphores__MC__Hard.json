{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Semaphores",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 17:57:23",
    "context_chunks_used": 5,
    "context_lectures": [
      10,
      14
    ],
    "token_usage": {
      "prompt_tokens": 2016,
      "output_tokens": 826,
      "total_tokens": 4619
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Semaphores"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "בהתבסס על השימוש בסמפורים לצורך \"ויסות חוטים\" (Thread Throttling), כפי שתואר בחומר הלימוד, מהו הערך ההתחלתי המתאים לסמפור ומהי מטרתו העיקרית במקרה זה?",
      "code_snippet": "sem_t s;\nsem_init(&s, 0, init_value);\n...\nsem_wait(&s);\n// קטע קוד המשתמש במשאבים מוגבלים\nsem_post(&s);\n...",
      "options": [
        "א. הערך ההתחלתי צריך להיות 1, ומטרתו העיקרית היא להבטיח מניעה הדדית (mutual exclusion) לקטע הקוד המוגבל במשאבים.",
        "ב. הערך ההתחלתי צריך להיות כמספר החוטים המקסימלי המותרים במקביל, ומטרתו העיקרית היא להגביל את כמות החוטים המבצעים קטע קוד מסוים (למשל, עקב מגבלות זיכרון), ולא בהכרח לצורך סנכרון קטע קריטי.",
        "ג. הערך ההתחלתי צריך להיות 0, ומטרתו העיקרית היא לאותת לחוטים אחרים כאשר המשאבים מתפנים, ובכך למנוע מצב של הרעבה (starvation).",
        "ד. הערך ההתחלתי יכול להיות כל מספר חיובי גדול מ-1, ומטרתו העיקרית היא למנוע קיפאון (deadlock) בין חוטים המתחרים על משאבים."
      ]
    },
    "solution": {
      "correct_option": "ב",
      "explanation": "בחומר הלימוד, הוסבר כי שימוש נוסף לסמפורים הוא 'ויסות חוטים' (Thread Throttling). במקרה זה, מטרת הסמפור אינה בהכרח סנכרון קטע קריטי (מניעה הדדית), אלא הגבלת כמות החוטים שיכולים לבצע קטע קוד מסוים בו-זמנית, למשל עקב מגבלות על משאבים כמו זיכרון. לשם כך, מאתחלים את הסמפור לכמות המקסימלית של החוטים שאנו רוצים לאפשר שיפעלו במקביל. כל חוט מבצע `sem_wait()` לפני הכניסה לקטע הקוד המוגבל במשאבים ו-`sem_post()` לאחר מכן. פעולה זו מבטיחה שלא יעלה מספר החוטים המוגדר על ידי הערך ההתחלתי, ובכך מוגבל העומס על המשאבים. אפשרות א' מתארת שימוש בסמפור בינארי למניעה הדדית, שאינו המטרה העיקרית ב-Thread Throttling. אפשרות ג' אינה נכונה מכיוון שערך התחלתי של 0 יחסום את כל החוטים בתחילה. אפשרות ד' אינה מדויקת לגבי הערך ההתחלתי הספציפי והמטרה העיקרית בתיאור זה היא הגבלת משאבים ולא מניעת קיפאון כללית."
    }
  }
}