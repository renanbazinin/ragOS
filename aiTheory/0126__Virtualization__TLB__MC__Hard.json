{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Virtualization",
    "topic_hint": "TLB",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 17:22:10",
    "context_chunks_used": 5,
    "context_lectures": [
      8,
      7
    ],
    "token_usage": {
      "prompt_tokens": 2114,
      "output_tokens": 709,
      "total_tokens": 5232
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Virtualization",
    "topic": [
      "TLB"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "בהינתן מערכת הפעלה שאינה מיישמת מזהי מרחב כתובות (ASID) עבור רשומות ה-TLB, איזו פעולה קריטית סביר שתתבצע על ה-TLB במהלך החלפת הקשר (context switch) כדי להבטיח את תקינות תרגום הכתובות עבור התהליך החדש?",
      "code_snippet": null,
      "options": [
        "א. ה-TLB יישטף (flushed) לחלוטין מכל הרשומות שלו.",
        "ב. ה-MMU יבדוק את ה-Present Bit של כל רשומת TLB לפני השימוש בה.",
        "ג. ה-TLB יאוחזר מהזיכרון הראשי עבור התהליך החדש.",
        "ד. מערכת ההפעלה תעדכן באופן סלקטיבי רק את רשומות ה-TLB השייכות לדפים פעילים."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "החומר המצוין בשיעור קובע כי \"אם נעשה עכשיו context switch, הבעיה תהיה ש-tlb לא יהיה מעודכן עבור התהליך הנוכחי. הפתרון לכך: נוסיף לכל רשומה ב-tlb מזהה נוסף שנקרא ASID (address space id) שיציין לאיזה תהליך הרשומה הזו שייכת וכך ניתן להבדיל בין רשומות של תהליכים שונים.\" מכאן נובע, שאם מערכת אינה משתמשת ב-ASID, ה-TLB יכיל מיפויים השייכים לתהליך הקודם. כדי למנוע שימוש במיפויים שגויים אלו עבור התהליך החדש, יש צורך לנקות (לשטוף) את כל רשומות ה-TLB. פעולה זו מבטיחה שהתהליך החדש יתחיל עם TLB \"נקי\" ממיפויים שגויים, גם אם זה כרוך ביותר TLB misses בתחילה. שאר האפשרויות אינן פתרון לבעיה זו: בדיקת ה-Present Bit רלוונטית לשאלה האם הדף בזיכרון הפיזי ולא לאיזה תהליך הוא שייך; אחזור TLB מהזיכרון הראשי אינו מנגנון קיים עבור מטמון; ועדכון סלקטיבי אינו אפשרי ללא מזהה תהליך (כמו ASID) ברשומות ה-TLB עצמן, שכן המערכת לא תוכל להבחין אילו רשומות רלוונטיות לתהליך החדש."
    }
  }
}