{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Condition Variables",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-14 17:51:38",
    "context_chunks_used": 5,
    "context_lectures": [
      11,
      14
    ],
    "token_usage": {
      "prompt_tokens": 1903,
      "output_tokens": 772,
      "total_tokens": 5515
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Condition Variables"
    ],
    "difficulty_estimation": "Medium",
    "content": {
      "text": "בתרחיש בעיית יצרן/צרכן (Producer/Consumer) המתואר בחומר ההרצאה, מדוע נדרש שימוש בשני משתני תנאי (condition variables), כגון `empty` ו-`full`, במקום במשתנה תנאי בודד?",
      "code_snippet": "// דוגמה לשימוש במשתני תנאי בבעיית יצרן/צרכן (קטע קוד של צרכן):\n// if (count == 0)\n//     wait(&empty, &m1);\n// baDuBop(); // צורך פריט\n// --count;\n// signal(&full);\n// unlock(&m1);",
      "options": [
        "א. כדי למנוע קיפאון (deadlock) הנובע מערבוב הודעות המתנה, שבו יצרנים וצרכנים ממתינים על אותו משתנה תנאי למרות שהם מחכים לתנאים שונים (מקום פנוי לעומת פריטים זמינים).",
        "ב. כדי לאפשר ליצרנים וצרכנים להשתמש במנעולים נפרדים לכל משתנה תנאי, ובכך להגביר את מקביליות המערכת.",
        "ג. לאפשר לכל חוט (thread) של יצרן או צרכן להכריז על משתנה תנאי משלו, לניהול עצמאי של ההמתנה.",
        "ד. כדי לייעל את פעולת ה-broadcast ולאפשר שליחה סלקטיבית של אותות רק ליצרנים או רק לצרכנים."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "התשובה הנכונה היא א'. חומר ההרצאה (שיעור 14, קטע 13) מסביר כי שימוש במשתנה תנאי יחיד בבעיית יצרן/צרכן עלול להוביל למצב של קיפאון (deadlock). קיפאון זה מתרחש כאשר צרכן חוסם (ממתין) כי אין מוצרים במחסן, ויצרן חסום (ממתין) כי אין מקום פנוי במחסן, למרות שייתכן שיש מקום פנוי או מוצרים זמינים אך ההודעות מעורבבות. הפתרון לבעיה זו הוא שימוש בשני משתני תנאי נפרדים: `empty` ו-`full`. הצרכנים ממתינים על `empty` כאשר המחסן ריק (count == 0), והיצרנים שולחים לו סיגנל בעת הוספת מוצר. לעומת זאת, היצרנים ממתינים על `full` כאשר המחסן מלא, והצרכנים שולחים לו סיגנל בעת צריכת מוצר (פינוי מקום). הפרדה זו מבטיחה שכל סוג של חוט ממתין לתנאי הרלוונטי לו בלבד, ומונעת קיפאון הנובע מערבוב הודעות המתנה."
    }
  }
}