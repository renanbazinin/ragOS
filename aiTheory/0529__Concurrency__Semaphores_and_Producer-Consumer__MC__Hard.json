{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Semaphores and Producer-Consumer",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 19:02:38",
    "context_chunks_used": 5,
    "context_lectures": [
      14
    ],
    "token_usage": {
      "prompt_tokens": 1809,
      "output_tokens": 878,
      "total_tokens": 6863
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Semaphores and Producer-Consumer"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "בבעיית היצרן-צרכן (Bounded Buffer), הממומשת באמצעות סמפורים full ו-empty כפי שתואר בהרצאה, הסמפור full מאותחל ל-0 והסמפור empty מאותחל לערך MAX (גודל הבאפר). מהי הסיבה התיאורטית העיקרית מאחורי אתחול סמפורים אלו בערכים ספציפיים אלה?",
      "code_snippet": "init(&empty, MAX);\ninit(&full, 0);\nint fill = 0;\nint use = 0;\nint buff[MAX];",
      "options": [
        "א. להבטיח שצרכנים ימתינו אם הבאפר ריק, ושייצרנים יוכלו להוסיף פריטים כל עוד יש מקום פנוי בבאפר, עד לקיבולתו המלאה.",
        "ב. למנוע מצב תחרות (race condition) על גישה למערך הבאפר עצמו, ובכך להבטיח עקביות נתונים.",
        "ג. לוודא שמספר החוטים הפעילים בו-זמנית בקטע הקוד הקריטי של הוספה או הוצאה מוגבל למספר קבוע מראש.",
        "ד. לסנכרן בין מספר יצרנים למספר צרכנים כך שכל מוצר שנוצר יצרך על ידי צרכן אחד בלבד, ללא התערבות."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "ההרצאה מציינת כי הסמפור 'full' מייצג את מספר המדפים המלאים בבאפר, ולכן מאותחל ל-0 כיוון שבתחילה הבאפר ריק. אתחול זה מבטיח שכל צרכן שינסה לצרוך פריט כאשר הבאפר ריק יבצע 'sem_wait(&full)' וייחסם עד שיצרן יוסיף פריט. לעומת זאת, הסמפור 'empty' מייצג את מספר המדפים הפנויים, ולכן מאותחל ל-'MAX' (גודל הבאפר) כיוון שבתחילה כל המדפים פנויים. אתחול זה מאפשר ליצרנים להוסיף פריטים ללא חסימה עד שהבאפר יתמלא, כלומר עד ש-'empty' יגיע ל-0. אפשרות א' מתארת במדויק את התנהגות זו, שהיא התפקיד התיאורטי העיקרי של אתחול הסמפורים בערכים אלו בבעיית היצרן-צרכן עם באפר חסום. אפשרות ב' אינה נכונה מכיוון שסמפורים אלו אינם מיועדים למנוע מצבי תחרות על גישה למערך עצמו (שדורש מנגנון כמו mutex), אלא לנהל את מצב המלאי. אפשרות ג' מתארת שימוש אחר בסמפורים ('thread throttling') שגם הוזכר בהרצאה, אך אינו הסיבה העיקרית לאתחול הספציפי של 'full' ו-'empty' בבעיה זו. אפשרות ד' מתארת מטרה כללית של סנכרון, אך אינה הסיבה הספציפית לאתחול בערכים אלו, אלא תוצאה של המנגנון כולו."
    }
  }
}