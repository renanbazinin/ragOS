{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Deadlocks and Synchronization",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 19:01:46",
    "context_chunks_used": 5,
    "context_lectures": [
      15
    ],
    "token_usage": {
      "prompt_tokens": 1917,
      "output_tokens": 997,
      "total_tokens": 5718
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Deadlocks and Synchronization"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "בהתחשב בארבעת התנאים לקיומו של קיפאון, ובהתייחס לעקרונות תכנות נכון כגון אנקפסולציה ושימוש ב'קופסאות שחורות', איזה מהבאים מתאר בצורה הטובה ביותר את האתגר הייחודי במניעת 'המתנה מעגלית' (circular wait) במערכות מקביליות מורכבות?",
      "code_snippet": null,
      "options": [
        "א. אנקפסולציה מקשה על קביעת סדר רכישת מנעולים גלובלי ועקבי, שכן פעולות פנימיות של אובייקטים עשויות לתפוס מנעולים בסדר לא ידוע וליצור תרחישי המתנה מעגלית בלתי צפויים.",
        "ב. עקרונות תכנות נכון מחייבים שכל מנעול ישוחרר מיד לאחר השימוש בו, ובכך מונעים המתנה מעגלית על ידי הבטחת זמינות מיידית של משאבים לכל חוט.",
        "ג. השימוש בקופסאות שחורות מבטיח שכל מנעול נרכש ומשוחרר בתוך גבולות האובייקט בלבד, ובכך מונע מצב של חוטים התופסים משאבים בסדר הפוך.",
        "ד. המתנה מעגלית היא תופעה הנובעת אך ורק מתזמון בלתי צפוי של חוטים על ידי מערכת ההפעלה, ואינה מושפעת באופן מהותי מעקרונות האנקפסולציה או ארכיטקטורת הקוד."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "התשובה הנכונה היא א'. חומר ההרצאה מציין כי \"כל העניין של סנכרון, מקביליות וקיפאון- לא עובד טוב עם העקרונות של תכנות נכון (אנקפסולציה, קופסא שחורה וכו'..).\" בפרט, כאשר קוראים לפעולה של אובייקט כ\"קופסא שחורה\", אין לנו שליטה או ידע \"מי תופס את המנעול, מתי ובאיזה סדר\". תנאי ה\"המתנה מעגלית\" מתאר מצב שבו \"חוטים שונים תופסים משאבים בסדר הפוך\". מכיוון שאנקפסולציה מסתירה את סדר רכישת המנעולים בתוך אובייקטים, קשה מאוד לאכוף סדר רכישה גלובלי ועקבי על פני כל המערכת, ובכך למנוע המתנה מעגלית. אפשרות ב' אינה נכונה מכיוון ששחרור מיידי של מנעולים קשור יותר למניעת תנאי \"החזק והמתן\" (Hold and Wait) או לשיפור ביצועים, אך אינו מטפל ישירות בבעיה של סדר רכישה הפוך הנגרם מחוסר שקיפות של אנקפסולציה. אפשרות ג' אינה נכונה; ההרצאה מציינת שההפך הוא הנכון – אנקפסולציה (קופסאות שחורות) דווקא מקשה על שליטה בסדר רכישת המנעולים, ולא מונעת מצב של סדר הפוך. אפשרות ד' אינה נכונה, שכן ההרצאה מדגישה כי \"האופן בו הקוד נכתב ורץ, הוא זה שגרם ל-deadlock\", ומצביעה על הקשר בין עקרונות תכנות (כמו אנקפסולציה) לבין קשיי סנכרון וקיפאון. קיפאון אינו נובע *רק* מתזמון בלתי צפוי, אלא גם מאופן תכנון וארכיטקטורת הקוד."
    }
  }
}