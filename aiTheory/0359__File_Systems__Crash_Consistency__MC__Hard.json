{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "File Systems",
    "topic_hint": "Crash Consistency",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 18:20:58",
    "context_chunks_used": 5,
    "context_lectures": [
      20,
      21,
      22
    ],
    "token_usage": {
      "prompt_tokens": 1936,
      "output_tokens": 793,
      "total_tokens": 5424
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "File Systems",
    "topic": [
      "Crash Consistency"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "מערכת קבצים נתקלת בקריסה בלתי צפויה במהלך פעולת כתיבה. לאחר האתחול מחדש, כלי ה-`fsck` (File System Checker) מופעל. בהתבסס על החומר הנלמד, איזה מבין המצבים הבאים, המעידים על חוסר עקביות פנימי, כלי ה-`fsck` *לא יוכל* לגלות או לתקן באופן אמין?",
      "code_snippet": null,
      "options": [
        "א. Inode שמצביע לבלוק נתונים שסומן ב-bitmap כתפוס, אך בפועל הבלוק מכיל נתונים שגויים (\"זבל\") כיוון שהכתיבה אליו לא הושלמה.",
        "ב. Inode שמצביע לבלוק נתונים שאינו מסומן ב-bitmap כתפוס, מה שמעיד על בלוק דאטה תפוס אך לא מקושר.",
        "ג. בלוק נתונים שסומן ב-bitmap כתפוס, אך בפועל אין אף Inode שמצביע אליו (בלוק \"אבוד\").",
        "ד. Inode שמסומן ב-inode bitmap כתפוס, אך בפועל אינו מצביע לאף בלוק נתונים (Inode ריק אך מסומן כתפוס)."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "החומר המצוין בשיעור 21, קטע 15, מתאר במפורש את המגבלה הזו של כלי ה-`fsck`. נאמר שם: \"אבל אם מערכת הקבצים שלנו נראית תקינה ויש בעיה, הוא לא יוכל לתקן אותה. למשל: נניח ויש לנו inode שמצביע ל-דאטה כלשהו, בלי data block שנכתב לשם, וב-bitmap הדאטה הזה מסומן כתפוס. כלומר מצב מערכת הקבצים נראה תקין, אף לא כתבנו את הדאטה לדאטה בלוק בפועל. יש שם זבל. את המצב הזה הכלי הנ\"ל לא יכול לגלות.\" מצב זה מתאים בדיוק לאפשרות א'. במצב זה, מבחינה מבנית, ה-inode מצביע לבלוק, וה-bitmap מציין שהבלוק תפוס – הכל נראה תקין מבחינת המטא-דאטה, אך תוכן הבלוק עצמו פגום. כלי ה-`fsck` בודק בעיקר עקביות מבנית של מטא-דאטה ולא את תקינות התוכן של הנתונים בתוך הבלוקים. האפשרויות האחרות (ב, ג, ד) מתארות מצבים של חוסר עקביות במטא-דאטה (כגון בלוק תפוס אך לא מקושר, או Inode שמצביע לבלוק לא מסומן), שאותם כלי ה-`fsck` נועד לזהות ולתקן."
    }
  }
}