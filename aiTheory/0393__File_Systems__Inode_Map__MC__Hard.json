{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "File Systems",
    "topic_hint": "Inode Map",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 18:28:36",
    "context_chunks_used": 5,
    "context_lectures": [
      22
    ],
    "token_usage": {
      "prompt_tokens": 1897,
      "output_tokens": 1000,
      "total_tokens": 9157
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "File Systems",
    "topic": [
      "Inode Map"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "מערכת קבצים מסוג LFS מאופיינת בכך שמפת ה-inodes (imap) מחולקת לחלקים ומיקומם הפיזי על הדיסק משתנה עם עדכונים. אזור ה-Checkpoint Region (CR) נשמר במיקום קבוע ומתעדכן לעיתים רחוקות (למשל, כל 30 דקות). בהתחשב בכך, מהו העיקרון המרכזי המאפשר למערכת לשחזר גרסה עקבית של ה-imap לאחר קריסה והפעלה מחדש?",
      "code_snippet": null,
      "options": [
        "א. ה-CR מכיל רשימה של מצביעים לגרסאות העדכניות ביותר של *כל אחד מחלקי ה-imap*, כפי שהיו ידועות בעת כתיבת ה-CR האחרונה, ובכך משמש כנקודת כניסה יחידה לשחזור המפה.",
        "ב. ה-CR מצביע תמיד על קובץ יומן (log) נפרד המכיל את כל השינויים שבוצעו ב-imap מאז כתיבת ה-CR הקודם, ומערכת הקבצים משחזרת את ה-imap על ידי יישום שינויים אלו.",
        "ג. כל חלק של ה-imap מכיל מצביע ל-CR, ומאפשר ל-CR \"לסרוק\" את הדיסק ולאתר את כל חלקי ה-imap הפזורים.",
        "ד. ה-CR מאחסן עותק מלא ואטומי של ה-imap כולו, ובכל פעם שמתעדכן ה-imap בזיכרון, נכתב עותק מלא וחדש ל-CR."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "התשובה הנכונה היא א'. ה-CR (Checkpoint Region) נשמר במיקום קבוע, מה שמאפשר לאתרו בקלות לאחר אתחול המערכת. תפקידו הוא להכיל מצביעים למיקומים הפיזיים של כל חלקי ה-imap על הדיסק. כאשר המערכת כותבת CR חדש (למרות שזה קורה לעיתים רחוקות), היא מעדכנת אותו עם המצביעים לגרסאות ה'עדכניות ביותר' של חלקי ה-imap כפי שהיו בזיכרון באותו רגע. לאחר קריסה והפעלה מחדש, המערכת קוראת את ה-CR האחרון שנכתב. המצביעים שבתוכו מאפשרים לה לאתר את כל חלקי ה-imap שהיו עקביים בנקודת הזמן שבה נכתב ה-CR, ובכך לשחזר את מבנה ה-imap כולו לגרסה עקבית (אף אם לא בהכרח לגרסה האחרונה ממש לפני הקריסה, עקב העדכון התכוף של חלקי ה-imap והעדכון הנדיר של ה-CR עצמו). \n\nאפשרויות ב', ג' ו-ד' שגויות על פי חומר ההרצאה:\nב. חומר ההרצאה אינו מזכיר קובץ יומן נפרד לשינויי imap המשמש לשחזור לאחר קריסה. השחזור מתבצע ישירות דרך המצביעים ב-CR.\nג. הקשר הוא הפוך: ה-CR מצביע על חלקי ה-imap, ולא חלקי ה-imap מצביעים על ה-CR. כמו כן, סריקת הדיסק לאיתור חלקי imap היא שיטה לא יעילה ואינה מתוארת.\nד. ה-imap מפוצל לחלקים ואינו נכתב כעותק מלא ואטומי ב-CR. בנוסף, ה-CR מתעדכן לעיתים רחוקות, ולא בכל שינוי ב-imap, כדי למנוע פגיעה בביצועים."
    }
  }
}