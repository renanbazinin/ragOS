{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "File Systems",
    "topic_hint": "Data Blocks and Bitmaps",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-14 18:11:03",
    "context_chunks_used": 5,
    "context_lectures": [
      20,
      21
    ],
    "token_usage": {
      "prompt_tokens": 1783,
      "output_tokens": 787,
      "total_tokens": 4593
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "File Systems",
    "topic": [
      "Data Blocks and Bitmaps"
    ],
    "difficulty_estimation": "Medium",
    "content": {
      "text": "במערכת קבצים המשתמשת ב-data bitmap וב-inodes, מהי הסכנה העיקרית אם המערכת קורסת לאחר שבלוק נתונים חדש וגם ה-data bitmap עודכנו (כך שהבלוק מסומן כתפוס), אך לפני שה-inode עודכן להצביע על בלוק הנתונים החדש?",
      "code_snippet": null,
      "options": [
        "א. ה-inode יצביע לבלוק נתונים שאינו מסומן כתפוס ב-data bitmap, מה שיכול להוביל לשימוש כפול בבלוק.",
        "ב. הבלוק החדש יסומן כתפוס ב-data bitmap ויכיל נתונים, אך אף inode לא יצביע אליו, מה שיוביל ל\"דליפת זיכרון\" (memory leak) בבלוקי הנתונים.",
        "ג. ה-data bitmap ימשיך לסמן את הבלוק כפנוי, למרות שהוא מכיל נתונים, מה שיגרום לאיבוד נתונים בעת הקצאת הבלוק מחדש.",
        "ד. הקובץ ימשיך להכיל את הנתונים המקוריים בלבד, והבלוק החדש לא יהיה נגיש כלל, אך לא תיווצר אי-עקביות במערכת הקבצים."
      ]
    },
    "solution": {
      "correct_option": "ב",
      "explanation": "השאלה מתארת מצב שבו מתבצעת כתיבה לקובץ, והמערכת קורסת לאחר שבלוק הנתונים החדש נכתב לדיסק וה-data bitmap עודכן כדי לסמן את הבלוק כתפוס, אך לפני שה-inode של הקובץ עודכן להצביע על בלוק זה. במצב כזה, כפי שמוזכר בחומר ההרצאה (Lecture 21, chunk 12, סעיף iii), הבעיה שנוצרת היא \"דליפת זיכרון\" (memory leak). הבלוק מסומן כתפוס ב-data bitmap ולכן לא יוקצה מחדש לקובץ אחר, אך מכיוון שאף inode אינו מצביע אליו, הוא למעשה בלתי נגיש ולא ניתן לשימוש על ידי אף קובץ. זוהי אי-עקביות במערכת הקבצים.\n\nאפשרויות אחרות אינן נכונות:\nאפשרות א' מתארת תרחיש אחר לגמרי שבו ה-data bitmap לא עודכן, בעוד שהשאלה מציינת שהוא כן עודכן (Lecture 21, chunk 12, סעיף ii).\nאפשרות ג' שגויה מכיוון שהשאלה מציינת שה-data bitmap *עודכן* וסימן את הבלוק כתפוס.\nאפשרות ד' שגויה כיוון שאכן נוצרת אי-עקביות משמעותית בצורת \"דליפת זיכרון\" של בלוק נתונים."
    }
  }
}