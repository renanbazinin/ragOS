{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Starvation",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 18:04:06",
    "context_chunks_used": 5,
    "context_lectures": [
      16,
      13
    ],
    "token_usage": {
      "prompt_tokens": 1782,
      "output_tokens": 762,
      "total_tokens": 8049
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Starvation"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "בהתבסס על חומר הקורס, ובפרט על ההבחנה בין הרעבה (starvation) לקיפאון (deadlock) ולבאגים בקוד, איזה מהתרחישים הבאים מתאר בצורה המדויקת ביותר מצב של הרעבה, כפי שעלול לקרות במערכת המשתמשת במנעולים לא הוגנים (כדוגמת הקוד המצורף)?",
      "code_snippet": "int turn;\nvoid lock(int i) {\n    turn = 1-i;\n    while (turn != i);\n}\nvoid unlock(int i) {\n    turn = 1-i;\n}",
      "options": [
        "א. חוט אחד (למשל, חוט 1) מצליח לרכוש ולשחרר את המשאב באופן חוזר ונשנה, בעוד שחוט אחר (למשל, חוט 0) נשאר חסום באופן עקבי ואינו מצליח לרכוש את המשאב כלל.",
        "ב. שני חוטים (חוט 0 וחוט 1) מנסים לרכוש את המשאב בו-זמנית, אך נכנסים למצב שבו כל אחד מהם ממתין לזה השני, ואף אחד מהם אינו מתקדם.",
        "ג. חוט אחד (למשל, חוט 1) רוכש את המשאב ונכשל בשחרורו עקב באג בקוד, ובכך מונע מכל החוטים האחרים לגשת למשאב.",
        "ד. חוט 0 משנה את ערך המשתנה turn ל-1, ומיד לאחר מכן חוט 1 משנה את turn ל-0, מה שיוצר לולאה אינסופית שבה שני החוטים משנים את turn ללא הרף אך אף אחד אינו נכנס לקטע הקריטי."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "אפשרות א' מתארת במדויק את הגדרת ההרעבה כפי שהוצגה בחומר הקורס: 'תהליך (חוט) שחסום בזמן שחוטים אחרים מתקדמים'. כמו כן, ההסבר מדגיש את הנקודה ש'בשביל הרעבה צריך שיהיה מישהו שתמיד תופס ומשחרר את המשאב' – כלומר, חוט אחד (חוט 1 בדוגמה) מצליח להתקדם שוב ושוב, בעוד חוט אחר (חוט 0) נחסם באופן עקבי. זהו בדיוק התרחיש שתואר בהקשר של מנעולים לא הוגנים, למשל בבעיית ה-Reader-Writer lock שבה קוראים רבים יכולים להרעיב כותב, או בתזמון מסוים עם קוד מנעול דומה לזה שהוצג, שבו חוט אחד יכול להתקדם תמיד על חשבון השני."
    }
  }
}