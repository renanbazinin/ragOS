{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "File Systems",
    "topic_hint": "Inode Map",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 18:29:04",
    "context_chunks_used": 5,
    "context_lectures": [
      22
    ],
    "token_usage": {
      "prompt_tokens": 1897,
      "output_tokens": 1129,
      "total_tokens": 7861
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "File Systems",
    "topic": [
      "Inode Map"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "במערכת קבצים LFS, ה-Inode Map (imap) מחולק לחלקים, וכל חלק יכול להתעדכן באופן עצמאי על הדיסק. ה-Checkpoint Region (CR) משמש לאיתור הגרסה העדכנית של ה-imap. בהתחשב בכך שה-CR מתעדכן לעיתים רחוקות יחסית (לדוגמה, כל 30 דקות), איזו מהטענות הבאות מתארת בצורה המדויקת ביותר כיצד המערכת מבטיחה שחזור עקבי של ה-imap המלא לאחר קריסה?",
      "code_snippet": null,
      "options": [
        "א. ה-CR, על אף עדכונו התקופתי, מכיל מצביעים ישירים לגרסאות העדכניות ביותר של *כל* חלקי ה-imap שנכתבו לדיסק *עד לנקודת זמן העדכון האחרונה שלו*, ובכך מאפשר שחזור קונסיסטנטי של ה-imap בזיכרון.",
        "ב. המערכת משחזרת את ה-imap על ידי סריקת כל הסגמנטים האחרונים על הדיסק, זיהוי חלקי ה-imap החדשים ביותר, ואיסופם ליצירת ה-imap השלם, תוך התעלמות מה-CR שאינו יכול להבטיח עדכניות.",
        "ג. ה-CR מצביע רק לבלוק הראשי של ה-imap, אשר בתורו מכיל מצביעים לחלקי ה-imap האחרים. מנגנון זה מחייב שרשרת קריאות ואינו מבטיח עקביות של כל החלקים במקרה של קריסה.",
        "ד. בזמן קריסה, המערכת מאבדת את היכולת לשחזר את חלקי ה-imap שלא נכללו בעדכון האחרון של ה-CR, ונדרש תהליך תיקון מורכב לשחזור הנתונים החסרים."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "החומר המצוין בשיעור מסביר כי ה-CR (Checkpoint Region) הוא מצביע קבוע במיקומו הפיזי על הדיסק, אשר תפקידו להצביע לגרסה העדכנית ביותר של ה-imap. מכיוון שה-imap יכול להיות מחולק לחלקים, ה-CR מכיל מצביעים לגרסה העדכנית של *כל* חלק ב-imap. למרות שה-CR עצמו מתעדכן לעיתים רחוקות יחסית (כדי למנוע פגיעה בביצועים), כאשר הוא נכתב, הוא מכיל את ה\"נתון המעודכן\" – כלומר, את המצביעים לגרסאות האחרונות של חלקי ה-imap כפי שהיו בזיכרון המערכת בעת כתיבת ה-CR. לכן, לאחר קריסה ואתחול מחדש, המערכת קוראת את ה-CR, ומשתמשת במצביעים שבו כדי לאתר ולקרוא את כל חלקי ה-imap העדכניים ביותר *שנרשמו לדיסק עד לנקודת הזמן שבה ה-CR עצמו עודכן לאחרונה*. זה מאפשר שחזור עקבי של ה-imap בזיכרון המערכת, כפי שצוין: \"אם נסגור את המחשב ונדליק אותו מחדש, אין בעיה, נקרא את ה-cr, הוא יצביע לכל החלקים של ה-imap, נקרא גם אותם וכך נוכל לשחזר את ה-imap ולעבוד כרגיל.\"\n\nאפשרות ב' שגויה מכיוון שהיא מתארת סריקה יקרה של הדיסק, בעוד תפקיד ה-CR הוא בדיוק לספק נקודת כניסה ישירה ויעילה ל-imap.\nאפשרות ג' שגויה מכיוון שהחומר מציין במפורש שה-CR מכיל מצביעים ל\"כל חלק\", ולא רק לחלק ראשי שמוביל לשרשרת.\nאפשרות ד' שגויה, שכן הטקסט מציין \"אין בעיה\" בשחזור ה-imap באמצעות ה-CR, מה שמעיד על עקביות ושלמות מספקת לצורך פעולה רגילה, גם אם לא כל שינוי שבוצע *אחרי* עדכון ה-CR האחרון נכלל."
    }
  }
}