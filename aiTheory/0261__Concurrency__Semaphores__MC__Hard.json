{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Semaphores",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 17:57:39",
    "context_chunks_used": 5,
    "context_lectures": [
      10,
      14
    ],
    "token_usage": {
      "prompt_tokens": 2016,
      "output_tokens": 1130,
      "total_tokens": 5472
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Semaphores"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "מערכת הפעלה משתמשת בסמפורים בשני תרחישים שונים: \n1. הבטחת מניעה הדדית (mutual exclusion) עבור קטע קריטי.\n2. הגבלת מספר התהליכים (throttling) שיכולים להקצות משאב יקר (לדוגמה, זיכרון) באופן סימולטני למקסימום K תהליכים.\n\nאיזו קביעה נכונה לגבי הערך ההתחלתי של הסמפור בכל אחד מהתרחישים הללו ומהות השימוש בו?",
      "code_snippet": null,
      "options": [
        "א. עבור מניעה הדדית, הערך ההתחלתי הוא 1, והסמפור מייצג זמינות מנעול. עבור הגבלת משאבים, הערך ההתחלתי הוא K, והסמפור מייצג את מספר ה\"היתרים\" הנותרים לשימוש במשאב.",
        "ב. עבור מניעה הדדית, הערך ההתחלתי הוא 0, והסמפור מייצג את מספר התהליכים הממתינים. עבור הגבלת משאבים, הערך ההתחלתי הוא K, והסמפור מייצג את מספר התהליכים שכבר משתמשים במשאב.",
        "ג. בשני המקרים, הערך ההתחלתי הוא 1, אך עבור מניעה הדדית הוא מבטיח שרק תהליך אחד יכנס, ועבור הגבלת משאבים הוא מבטיח שרק תהליך אחד יקצה זיכרון.",
        "ד. עבור מניעה הדדית, הערך ההתחלתי הוא K, והסמפור מייצג את מספר הקטעים הקריטיים הזמינים. עבור הגבלת משאבים, הערך ההתחלתי הוא 1, והסמפור מייצג האם המשאב פנוי או תפוס."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "התשובה הנכונה היא א'.\n\nעבור מניעה הדדית (mutual exclusion), הסמפור משמש כמנעול בינארי. לפי חומר ההרצאה (Lecture 14, chunk 21), \"אנחנו נותנים את הסמפור להיות 1\" כערך התחלתי. ערך 1 מסמל שהמנעול פנוי, וערך 0 מסמל שהוא תפוס. כל תהליך שמבקש להיכנס לקטע קריטי מבצע `sem_wait()`, שמקטינה את ערך הסמפור. אם הסמפור היה 1, הוא הופך ל-0 והתהליך נכנס. אם היה 0, התהליך ממתין. בסיום הקטע הקריטי, התהליך מבצע `sem_post()`, שמגדילה את ערך הסמפור ומסמנת שהמנעול שוחרר.\n\nעבור הגבלת מספר תהליכים (thread throttling) לצורך ניהול משאבים, הסמפור משמש כמונה המייצג את מספר המקומות הפנויים (או ההיתרים) לשימוש במשאב. לפי חומר ההרצאה (Lecture 14, chunk 34), \"נאתחל את הסמפור שלנו לכמות המקסימלית שאנחנו רוצים להחזיק במקביל\". כלומר, אם K הוא המספר המקסימלי של תהליכים שיכולים להשתמש במשאב בו זמנית, הערך ההתחלתי של הסמפור יהיה K. כל תהליך לפני שימוש במשאב מבצע `sem_wait()`, שמקטינה את המונה (תופס \"היתר\" אחד), ולאחר סיום השימוש מבצע `sem_post()`, שמגדילה את המונה (משחרר \"היתר\").\n\nהאפשרויות האחרות אינן נכונות:\nב. הערך ההתחלתי למניעה הדדית הוא 1, לא 0. כמו כן, הסמפור במקרה של הגבלת משאבים מייצג את היתרים זמינים, לא את מספר התהליכים שכבר משתמשים.\nג. הערך ההתחלתי להגבלת משאבים הוא K, לאו דווקא 1, אלא אם כן K=1.\nד. הערכים ההתחלתיים וההסברים הפוכים ולא מדויקים ביחס לשימושם הנכון."
    }
  }
}