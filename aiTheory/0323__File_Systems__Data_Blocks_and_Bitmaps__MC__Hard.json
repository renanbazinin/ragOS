{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "File Systems",
    "topic_hint": "Data Blocks and Bitmaps",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 18:12:28",
    "context_chunks_used": 5,
    "context_lectures": [
      20,
      21
    ],
    "token_usage": {
      "prompt_tokens": 1783,
      "output_tokens": 841,
      "total_tokens": 7009
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "File Systems",
    "topic": [
      "Data Blocks and Bitmaps"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "בעת הוספת בלוק נתונים חדש לקובץ קיים, מערכת הקבצים נדרשת לעדכן שלושה רכיבים עיקריים: ה-inode של הקובץ, בלוק הנתונים עצמו, וה-data bitmap. בהתבסס על החומר הנלמד, איזו בעיית עקביות חמורה עלולה להיווצר במערכת הקבצים אם המערכת קורסת *לאחר* שבלוק הנתונים נכתב וגם ה-inode עודכן להצביע אליו, אך *לפני* שה-data bitmap עודכן לסמן את הבלוק כתפוס?",
      "code_snippet": null,
      "options": [
        "א. בלוק הנתונים ייחשב כ\"דליפת זיכרון\" (memory leak), כלומר הוא מסומן כתפוס ב-data bitmap אך אין אליו מצביע מ-inode כלשהו.",
        "ב. ה-data bitmap יסמן את בלוק הנתונים כפנוי, למרות שה-inode מצביע אליו, מה שמאפשר לבלוק להינתן לקובץ אחר ויוביל לשחיתות נתונים.",
        "ג. ה-inode של הקובץ יכיל מצביע שגוי לבלוק נתונים שאינו קיים, מה שיגרום לשגיאות קריאה עתידיות עבור הקובץ.",
        "ד. ה-inode bitmap יסמן את ה-inode כפנוי, למרות שהוא בשימוש, מה שעלול לגרום להקצאת ה-inode לקובץ חדש."
      ]
    },
    "solution": {
      "correct_option": "ב",
      "explanation": "התשובה הנכונה היא ב'. על פי חומר ההרצאה (Lecture 21, chunk 12, סעיף ii), אם המערכת קורסת לאחר עדכון ה-inode וה-data block, אך לפני עדכון ה-data bitmap, נוצר מצב שבו ה-data bitmap עדיין מסמן את הבלוק כפנוי. במקביל, ה-inode של הקובץ כבר מצביע לבלוק זה. בעיה זו עלולה להוביל לכך שמערכת הקבצים תקצה את הבלוק הפנוי לכאורה לקובץ אחר, מה שייצור שחיתות נתונים חמורה שכן שני קבצים יצביעו לאותו בלוק פיזי, או שקובץ אחד יצביע לבלוק שהתוכן שלו \"נדרס\" על ידי קובץ אחר. \nאפשרות א' מתארת בעיית \"דליפת זיכרון\" (memory leak), הנוצרת כאשר המערכת קורסת לאחר עדכון ה-data block וה-data bitmap, אך לפני עדכון ה-inode (Lecture 21, chunk 12, סעיף iii). במקרה זה, הבלוק מסומן כתפוס ב-data bitmap אך אף inode אינו מצביע אליו. אפשרויות ג' ו-ד' מתארות בעיות שאינן תואמות את תרחיש הקריסה הספציפי המתואר בשאלה, או מתייחסות לרכיבים אחרים (inode bitmap) באופן שאינו קשור ישירות לבעיה המרכזית של הקצאת בלוק נתונים חדש במצב זה."
    }
  }
}