{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "File Systems",
    "topic_hint": "Journaling",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 18:23:36",
    "context_chunks_used": 5,
    "context_lectures": [
      21
    ],
    "token_usage": {
      "prompt_tokens": 1706,
      "output_tokens": 983,
      "total_tokens": 6887
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "File Systems",
    "topic": [
      "Journaling"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "במערכת קבצים המשתמשת ב-`metadata journaling` (המכונה גם `ordered journaling`), מהו המצב הצפוי של המערכת לאחר קריסה המתרחשת *לאחר* שבלוק הנתונים נכתב בהצלחה למיקומו הסופי על הדיסק, אך *לפני* שמטא-הנתונים של הטרנזקציה (כולל `TxB` ו-`metadata` של הטרנזקציה) נכתבו במלואם ליומן וסונכרנו?",
      "code_snippet": null,
      "options": [
        "א. מטא-הנתונים של מערכת הקבצים יהיו לא עקביים עם בלוק הנתונים, וידרשו סריקה מלאה (לדוגמה, `fsck`) כדי לשחזר את הנתונים היתומים.",
        "ב. מערכת הקבצים תתאושש למצב עקבי, אך בלוק הנתונים החדש יאבד (יהפוך לבלוק יתום) מכיוון שהטרנזקציה לא תועדה ביומן.",
        "ג. היומן יופעל מחדש (replayed), ומכיוון שבלוק הנתונים כבר נכתב, הטרנזקציה תושלם בהצלחה.",
        "ד. המערכת תזהה טרנזקציה לא שלמה ביומן ותחזיר את בלוק הנתונים למצבו הקודם."
      ]
    },
    "solution": {
      "correct_option": "ב",
      "explanation": "השאלה מתייחסת לפרוטוקול הספציפי של `metadata journaling` (או `ordered journaling`), כפי שתואר בחומר ההרצאה:\n1. Data write: Write data to final location, wait for completion\n2. Journal write: Write transaction contents (TxB and metadata), wait for completion\n\nהמצב המתואר בשאלה הוא קריסה המתרחשת *לאחר* שלב 1 (כתיבת הנתונים למיקומם הסופי בדיסק והמתנה לסיום הכתיבה) אך *לפני* שלב 2 (כתיבת ה-`TxB` ומטא-הנתונים של הטרנזקציה ליומן וסנכרונם).\n\nבמקרה כזה:\n- בלוק הנתונים החדש אכן נכתב פיזית לדיסק במיקומו הסופי.\n- אך מכיוון ששלב 2 לא הושלם, הטרנזקציה לא התחילה להירשם ביומן (אין `TxB` או מטא-נתונים ביומן שמתארים את השינוי). מטא-הנתונים של מערכת הקבצים הראשית (לדוגמה, ה-inode המצביע על הנתונים) עדיין משקפים את המצב הקודם (לפני הניסיון לכתוב את הנתונים החדשים).\n\nכתוצאה מכך, בעת התאוששות מקריסה, מערכת הקבצים תסרוק את היומן ולא תמצא שום תיעוד לטרנזקציה זו. לכן, היא תתאושש למצב עקבי שבו מטא-הנתונים שלה תקינים ושלמים (הם פשוט משקפים את המצב הישן). עם זאת, בלוק הנתונים החדש שנכתב לדיסק אינו מקושר עוד לשום מטא-נתונים, ולכן הוא הופך לבלוק 'יתום' (orphaned block) שאבד למערכת הקבצים. זוהי תכונה מהותית של `ordered journaling` – הוא מבטיח עקביות של מטא-נתונים על חשבון אובדן פוטנציאלי של נתונים במקרה קריסה מסוים זה.\n\nלכן, אפשרות ב' היא הנכונה ביותר."
    }
  }
}