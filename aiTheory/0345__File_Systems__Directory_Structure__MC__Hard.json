{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "File Systems",
    "topic_hint": "Directory Structure",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 18:17:18",
    "context_chunks_used": 5,
    "context_lectures": [
      20,
      21
    ],
    "token_usage": {
      "prompt_tokens": 2034,
      "output_tokens": 893,
      "total_tokens": 5296
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "File Systems",
    "topic": [
      "Directory Structure"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "בעת יצירת קישור קשיח (hard link) לקובץ קיים, מתבצעות שתי פעולות עיקריות במערכת הקבצים:\n1. עדכון רשומת התיקייה (directory entry) בתיקיית האב כדי לכלול את הקישור החדש.\n2. הגדלת מונה הקישורים (Links count) ב-inode של הקובץ המקורי.\nבהתבסס על עקרונות עקביות מערכת הקבצים שנדונו בחומר הלימוד, מה תהיה התוצאה אם מערכת הקבצים תקרוס לאחר שבוצעה רק הפעולה השנייה (הגדלת מונה הקישורים ב-inode), אך לפני שבוצעה הפעולה הראשונה (עדכון רשומת התיקייה)?",
      "code_snippet": null,
      "options": [
        "א. הקובץ המקורי ייחשב כבעל קישור נוסף, אך לא תהיה דרך אמיתית לגשת אליו דרך הקישור החדש, מה שיוביל למצב של 'דליפת' קישור (link leak) ב-inode.",
        "ב. הקובץ המקורי יימחק באופן מיידי מכיוון שמערכת הקבצים לא תמצא רשומה מתאימה בתיקייה עבור הקישור החדש.",
        "ג. מערכת הקבצים תתקן אוטומטית את המצב בעת האתחול מחדש, מכיוון שזוהי פעולה פשוטה שאינה דורשת שיחזור מורכב.",
        "ד. הקובץ המקורי יהפוך לבלתי נגיש לחלוטין, ותהיה גישה אליו רק דרך הקישור החדש שאינו קיים בפועל."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "בחומר הלימוד נדון מקרה שבו מערכת הקבצים קורסת לאחר עדכון ה-data bitmap בלבד, לפני שבלוק הנתונים החדש מקושר ל-inode כלשהו. במקרה כזה, הבלוק מסומן כתפוס אך אינו בשימוש, מה שמוביל ל'דליפה' (leak) של זיכרון - בלוק מבוזבז שמסומן כתפוס אך איש אינו משתמש בו. באופן דומה, כאשר מונה הקישורים (Links count) ב-inode גדל אך רשומת התיקייה המתאימה טרם נוצרה, ה-inode מציין שיש לו קישור נוסף שאינו קיים בפועל. מצב זה יוצר אי-עקביות במערכת הקבצים, שבה ה-metadata (מונה הקישורים) אינו משקף נכונה את המצב הפיזי או הלוגי של הקבצים בתיקיות. חומר הלימוד מציין במפורש כי במצב קריסה כזה, 'כשנעלה את המחשב מחדש, לא נדע שקרסנו באמצע הפעולה, אין לנו דרך לדעת זאת, והגענו למצב לא תקין של מערכת הקבצים שלנו'. לכן, מערכת הקבצים לא תתקן זאת אוטומטית בעת אתחול מחדש. הקובץ עדיין נגיש דרך הקישורים הקודמים שלו, אך ה-inode שלו מדווח על מספר קישורים שגוי, מהווה 'דליפת' קישור (link leak) ב-inode."
    }
  }
}