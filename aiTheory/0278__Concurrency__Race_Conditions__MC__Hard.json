{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Race Conditions",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 18:01:45",
    "context_chunks_used": 5,
    "context_lectures": [
      16,
      10,
      11
    ],
    "token_usage": {
      "prompt_tokens": 1914,
      "output_tokens": 1082,
      "total_tokens": 6987
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Race Conditions"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "בהקשר של מערכות הפעלה מרובות חוטים, מהו המאפיין המהותי ביותר המגדיר מצב מרוץ (Race Condition) בקטע קריטי?",
      "code_snippet": null,
      "options": [
        "א. תוצאת הפעולות על המשאב המשותף תלויה בסדר הלא-דטרמיניסטי שבו חוטים שונים ניגשים אליו ומבצעים עליו שינויים.",
        "ב. חוטים מרובים נכנסים למצב של קיפאון (Deadlock) ואינם יכולים להמשיך את פעולתם.",
        "ג. יותר מחוט אחד רץ בתוך הקטע הקריטי בו-זמנית, מה שמונע מניעה הדדית.",
        "ד. ביצועי המערכת נפגעים באופן משמעותי עקב ריבוי החלפות הקשר (Context Switches) בין החוטים."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "מצב מרוץ (Race Condition) מתרחש כאשר מספר חוטים ניגשים למשאב משותף (כמו משתנה גלובלי או קובץ) ומשנים אותו, והתוצאה הסופית של הפעולות הללו תלויה בסדר הספציפי והבלתי צפוי (לא-דטרמיניסטי) שבו החוטים מבצעים את פעולותיהם. כפי שצוין בחומר ההרצאה (Lecture 10, chunk 29 ו-Lecture 11, chunk 1), סדר הריצה של חוטים נקבע על ידי המתזמן של מערכת ההפעלה ואינו ניתן לשליטה מדויקת, מה שיכול להוביל לפלטים שונים \"כתלות במזלנו שלנו\". זוהי ההגדרה המהותית של מצב מרוץ – התוצאה אינה עקבית ואינה ניתנת לחיזוי.\n\nאפשרות ב' אינה נכונה מכיוון שקיפאון (Deadlock) הוא מצב שבו שני חוטים או יותר חסומים וממתינים זה לזה למשאב שלעולם לא ישוחרר. בעוד שקיפאון הוא בעיה חמורה שיכולה לנבוע מבעיות סנכרון, הוא אינו ההגדרה של מצב מרוץ עצמו, אלא תוצאה אפשרית של תכנון לקוי של מנגנוני סנכרון. מצב מרוץ יכול להתקיים גם ללא קיפאון.\n\nאפשרות ג' אינה נכונה מכיוון שהאפשרות ש\"יותר מחוט אחד רץ בתוך הקטע הקריטי בו-זמנית\" מתארת הפרה של תנאי \"מניעה הדדית\" (Mutual Exclusion). מניעה הדדית היא דרישה קריטית למניעת מצבי מרוץ (Lecture 16, chunk 8). כאשר אין מניעה הדדית, חוטים יכולים לגשת למשאב משותף בו-זמנית, וזהו התנאי המקדים שמאפשר למצב מרוץ להתרחש. עם זאת, מצב המרוץ עצמו מוגדר על ידי התוצאה הבלתי צפויה הנובעת מהגישה הבו-זמנית למשאב המשותף (כפי שמתואר באפשרות א'), ולא רק על ידי העובדה שהגישה הבו-זמנית התרחשה. כלומר, הפרת מניעה הדדית היא *הגורם* המאפשר למצב מרוץ להתממש, אך לא *ההגדרה המהותית* של מצב המרוץ כהתנהגות המערכתית שבה התוצאה משתנה בהתאם לסדר הריצה.\n\nאפשרות ד' אינה נכונה מכיוון שפגיעה בביצועי המערכת עקב ריבוי החלפות קשר היא תופעה שיכולה להתרחש במערכות מרובות חוטים, אך אינה קשורה ישירות להגדרה של מצב מרוץ. מצב מרוץ מתייחס לנכונות הלוגית של הפלט, בעוד שהחלפות קשר משפיעות על היעילות והביצועים."
    }
  }
}