{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "File Systems",
    "topic_hint": "Journaling",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 18:24:01",
    "context_chunks_used": 5,
    "context_lectures": [
      21
    ],
    "token_usage": {
      "prompt_tokens": 1706,
      "output_tokens": 1010,
      "total_tokens": 6626
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "File Systems",
    "topic": [
      "Journaling"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "במערכת קבצים המשתמשת ב-metadata journaling (הידועה גם כ-ordered journaling), פרוטוקול הכתיבה קובע כי כתיבת הנתונים עצמם למיקומם הסופי בדיסק מתרחשת לפני כתיבת ה-metadata המתאר אותם ליומן. בהתחשב בפרוטוקול זה, מהי ההשלכה הסבירה ביותר במקרה של קריסת מערכת שהתרחשה *לאחר* השלמת כתיבת הנתונים לדיסק אך *לפני* שהטרנזקציה סומנה כ-committed ביומן (כלומר, לפני כתיבת ה-Txe)?",
      "code_snippet": null,
      "options": [
        "א. הנתונים החדשים יימצאו בדיסק אך לא יהיו מקושרים או נגישים באמצעות ה-metadata של מערכת הקבצים, שכן עדכון ה-metadata הרלוונטי לא בוצע במלואו דרך היומן ולכן לא ישוחזר.",
        "ב. מערכת הקבצים תשוחזר למצב עקבי לחלוטין כאילו הטרנזקציה מעולם לא החלה, ללא כל אובדן נתונים או חוסר עקביות.",
        "ג. ה-metadata ביומן יצביע על הנתונים החדשים שהושלמו, ומערכת הקבצים תתאושש ותשלים את העדכון באופן אוטומטי.",
        "ד. הנתונים הישנים בדיסק יימחקו באופן אוטומטי, והמקום יסומן כפנוי, מה שיגרום לאובדן נתונים אך ישמור על עקביות ה-metadata."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "התשובה הנכונה היא א'. בפרוטוקול metadata journaling (או ordered journaling), שלב כתיבת הנתונים (Data write) למיקומם הסופי בדיסק מתבצע ראשון וממתין להשלמה. לאחר מכן נכתב ה-metadata הרלוונטי ליומן (Journal write). עם זאת, הטרנזקציה נחשבת 'מבוצעת' (committed) רק לאחר כתיבת ה-Txe ליומן (Journal commit). אם המערכת קורסת לאחר שהנתונים נכתבו לדיסק אך לפני כתיבת ה-Txe, הנתונים החדשים אמנם קיימים פיזית בדיסק. אך מכיוון שה-Txe לא נכתב, היומן לא יזהה את הטרנזקציה כשלמה. בעת התאוששות המערכת מקריסה, היומן יסרוק את הטרנזקציות ויפעיל מחדש רק טרנזקציות שסומנו כ'מבוצעות' במלואן (עם Txe). במקרה זה, עדכון ה-metadata ביומן לא יופעל, ומבני ה-metadata הראשיים של מערכת הקבצים (כמו טבלאות inodes או מפות סיביות) יישארו במצבם הקודם. התוצאה היא שהנתונים החדשים שהיו אמורים להיות מקושרים באמצעות ה-metadata נשארים בדיסק אך אינם נגישים או מקושרים על ידי מערכת הקבצים, ונוצר מצב של חוסר עקביות.\n\nאפשרויות אחרות אינן נכונות: \nב. המערכת לא תשוחזר כאילו הטרנזקציה מעולם לא החלה, שכן הנתונים החדשים כבר נכתבו לדיסק. \nג. ה-metadata ביומן לא יאפשר התאוששות אוטומטית כי חסר ה-Txe המעיד על השלמת הטרנזקציה. \nד. הבעיה המרכזית אינה מחיקת נתונים ישנים או סימון מקום כפנוי, אלא חוסר הגישה לנתונים החדשים שנכתבו."
    }
  }
}