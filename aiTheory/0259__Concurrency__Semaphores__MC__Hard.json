{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Semaphores",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 17:57:10",
    "context_chunks_used": 5,
    "context_lectures": [
      10,
      14
    ],
    "token_usage": {
      "prompt_tokens": 2016,
      "output_tokens": 1023,
      "total_tokens": 6544
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Semaphores"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "בהתחשב בשימושים השונים של סמפורים כפי שתוארו בחומר הלימוד, מהי ההשפעה המיידית הנכונה ביותר של אתחול סמפור עם ערך התחלתי של 0 (כפי שמוצג בדוגמת הקוד)?",
      "code_snippet": "sem_t s;\nsem_init(&s, 0, 0); // init_value = 0\n// ... later in code ...\nsem_wait(&s);\n// critical or throttled section\nsem_post(&s);",
      "options": [
        "א. אם הסמפור נועד לספק מניעה הדדית (mutual exclusion), אתחול ל-0 יבטיח שחוט אחד בלבד יוכל להיכנס לקטע הקריטי באופן מיידי.",
        "ב. כאשר הסמפור משמש להגבלת כמות חוטים במקטע קוד (thread throttling), אתחול ל-0 יאפשר לכל החוטים להיכנס מיד ללא הגבלה.",
        "ג. אתחול סמפור ל-0, בין אם הוא משמש למניעה הדדית או להגבלת כמות חוטים, יגרום לכך שכל חוט שינסה לבצע פעולת sem_wait ימתין עד שיתבצע sem_post.",
        "ד. אתחול ל-0 מיועד למקרים בהם יש צורך לאפשר לחוטים לצאת מקטע קוד מסוים אך לא להיכנס אליו."
      ]
    },
    "solution": {
      "correct_option": "ג",
      "explanation": "החומר מתאר שני שימושים עיקריים לסמפורים: מניעה הדדית (כמו מנעול בינארי) והגבלת כמות חוטים (thread throttling).\n1.  **סמפור בינארי למניעה הדדית:** החומר מציין שאם סמפור בינארי משמש כמנעול, הוא מאותחל לערך 1. לאחר פעולת `sem_wait`, ערכו יורד ל-0, וכל חוט נוסף שינסה לבצע `sem_wait` ימתין כי הערך הוא 0. מכאן, אם הסמפור מאותחל מלכתחילה ל-0, משמעות הדבר היא שהמנעול \"תפוס\" וכל חוט שיבצע `sem_wait` ימתין מיד.\n2.  **סמפור להגבלת כמות חוטים:** החומר מסביר שיש לאתחל את הסמפור \"לכמות המקסימלית שאנחנו רוצים להחזיק במקביל\". אם כמות מקסימלית זו היא 0, הרי שאין מקומות פנויים, וכל חוט שינסה לבצע `sem_wait` כדי \"לקחת את המשאב הזה\" ימתין עד שמשאב כזה יהיה זמין (כלומר, עד שיתבצע `sem_post` שיעלה את ערך הסמפור).\n\nלכן, בשני המקרים, אתחול סמפור ל-0 גורם לכך שפעולת `sem_wait` תחסום את החוט המבצע אותה עד שיתבצע `sem_post` שיעלה את ערך הסמפור מעל 0.\n\n*   א. שגויה, אתחול ל-0 לא מאפשר כניסה מיידית; דווקא אתחול ל-1 מאפשר זאת, כפי שמתואר בחומר עבור סמפור בינארי.\n*   ב. שגויה, אתחול ל-0 מגביל את הכניסה ל-0 חוטים, כלומר חוסם את כולם, בניגוד ל\"ללא הגבלה\".\n*   ד. שגויה, סמפורים שולטים בכניסה (באמצעות `sem_wait`) וביציאה/שחרור משאב (באמצעות `sem_post`), ולא רק ביציאה ללא כניסה."
    }
  }
}