{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Virtualization",
    "topic_hint": "TLB",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 17:21:33",
    "context_chunks_used": 5,
    "context_lectures": [
      8,
      7
    ],
    "token_usage": {
      "prompt_tokens": 2114,
      "output_tokens": 872,
      "total_tokens": 5298
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Virtualization",
    "topic": [
      "TLB"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "תהליך מנסה לגשת לכתובת זיכרון וירטואלית. ה-MMU מבצע את פעולת התרגום. בהינתן הרצף הבא:\n1. בדיקה ב-TLB מניבה 'TLB miss'.\n2. ה-MMU ניגש לטבלת הדפים ומוצא את ה-Page Table Entry (PTE) המתאים.\n3. ה-'Present bit' ב-PTE זה מוגדר ל-0.\n\nמהי התוצאה המיידית של רצף אירועים זה, ומה קורה בהמשך?",
      "code_snippet": "for (int i = 0; i < 10; i++; ++i) {\n  ++a[i];\n}",
      "options": [
        "א. ה-MMU יוצר 'trap' למערכת ההפעלה, כיוון שהדף אינו נמצא בזיכרון הפיזי (RAM), וה-TLB אינו מתעדכן במיפוי זה.",
        "ב. ה-MMU מעדכן את ה-TLB במיפוי שנמצא בטבלת הדפים, ולאחר מכן מערכת ההפעלה מטפלת ב'page fault'.",
        "ג. ה-MMU ממשיך לחפש את המיפוי ברמת טבלת דפים גבוהה יותר, ורק אם לא ימצא שם, ייווצר 'trap'.",
        "ד. התהליך מופסק באופן מיידי על ידי החומרה כיוון שניסה לגשת לכתובת לא חוקית."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "התשובה הנכונה היא א'. על פי חומר ההרצאה (Lecture 8, chunk 10), כאשר ה-MMU ניגש לטבלת הדפים עקב 'TLB miss' ומוצא PTE שה-'Present bit' שלו מוגדר ל-0, משמעות הדבר היא שהדף אינו נמצא בזיכרון הפיזי (RAM). במצב כזה, ה-MMU אינו יכול לתרגם את הכתובת הווירטואלית לכתובת פיזית תקינה, ולכן הוא יוצר 'trap' למערכת ההפעלה. תפקיד ה-'trap' הוא להודיע למערכת ההפעלה על האירוע, ולאפשר לה לטפל בו (לדוגמה, לטעון את הדף מהדיסק לזיכרון). בנוסף, ה-TLB מחזיק רק רשומות שה-'Present bit' שלהן הוא 1, ולכן מיפוי עם 'Present bit' 0 לא יעודכן ב-TLB. אפשרות ב' שגויה מכיוון שה-TLB אינו מתעדכן במיפויים שבהם ה-'Present bit' הוא 0 (Lecture 8, chunk 10). אפשרות ג' שגויה מכיוון שה-'Present bit' מוגדר ב-PTE עצמו, וערך 0 מצביע על היעדר הדף בזיכרון הפיזי, ולא על צורך בחיפוש נוסף בטבלת דפים. אפשרות ד' שגויה מכיוון שהחומרה יוצרת 'trap' למערכת ההפעלה, המאפשר למערכת ההפעלה לטפל במצב, במקום להפסיק את התהליך באופן מיידי וללא התערבות."
    }
  }
}