{
  "metadata": {
    "source": "ai_generated_from_summary",
    "subject": "Concurrency",
    "topic_hint": "Deadlocks",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-14 17:59:13",
    "context_chunks_used": 5,
    "context_lectures": [
      16,
      15
    ],
    "token_usage": {
      "prompt_tokens": 2076,
      "output_tokens": 766,
      "total_tokens": 5904
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "subject": "Concurrency",
    "topic": [
      "Deadlocks"
    ],
    "difficulty_estimation": "Hard",
    "content": {
      "text": "לפי חומר ההרצאה, \"ל-deadlock אין תכונת הרכבה\". מה המשמעות העמוקה ביותר של קביעה זו בהקשר של תכנון מערכות מקביליות המשתמשות במספר מנעולים?",
      "code_snippet": "// דוגמה למצב של המתנה מעגלית בין שני מנעולים:\n//Thread 1::\nlock(&L1);\nlock(&L2);\n\n//Thread 2::\nlock(&L2);\nlock(&L1);",
      "options": [
        "א. גם אם כל מנעול בפני עצמו מתוכנן באופן שמבטיח deadlock freedom (כלומר, אינו גורם לקיפאון בשימוש יחיד בו), השילוב של שני מנעולים כאלה או יותר בקוד משותף עלול עדיין להוביל לקיפאון מערכתי, לדוגמה באמצעות המתנה מעגלית (circular wait) בין חוטים התופסים את המנעולים בסדר שונה.",
        "ב. מנעול יכול לקיים deadlock freedom רק אם הוא לא מקיים mutual exclusion, מה שמגביל מאוד את השימוש במנעולים למניעת קיפאון.",
        "ג. כדי למנוע קיפאון במערכת מרובת מנעולים, מספיק לוודא שכל מנעול בודד מקיים deadlock freedom, ואין צורך להתחשב באינטראקציה ביניהם.",
        "ד. העובדה של-deadlock אין תכונת הרכבה משמעותה שקיפאון יכול להתרחש רק כאשר ישנו מנעול אחד בלבד במערכת שאינו מקיים deadlock freedom."
      ]
    },
    "solution": {
      "correct_option": "א",
      "explanation": "התשובה הנכונה היא א'. חומר ההרצאה מציין במפורש כי \"ל-deadlock אין תכונת הרכבה. כלומר אם ניקח שני מנעולים שבשניהם אין deadlocks ונשתמש בשניהם, זה לא מבטיח שלא יהיו לנו deadlocks. כל מנעול בפני עצמו יגרום שבשימוש שלו ספציפית לא יהיו deadlocks, אבל השילוב שלהם כן יכול לגרום ל-deadlock\". המשמעות היא שבעוד שמנעול בודד עשוי להיות מתוכנן כך שהוא לא ייכנס לקיפאון בעצמו (deadlock freedom), הדרך שבה חוטים שונים רוכשים ומשחררים מספר מנעולים במערכת יכולה ליצור תנאים לקיפאון מערכתי. התנאי הקלאסי לכך הוא המתנה מעגלית (circular wait), כפי שהודגם בדוגמת הקוד, בה חוטים תופסים משאבים (מנעולים) בסדר הפוך וכל אחד מחכה למשאב שהשני מחזיק. לכן, הבטחת deadlock freedom למנעולים בודדים אינה מספיקה למניעת קיפאון במערכת מורכבת."
    }
  }
}