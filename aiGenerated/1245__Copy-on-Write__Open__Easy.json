{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Copy-on-Write",
    "requested_type": "Open",
    "requested_difficulty": "Easy",
    "generated_at": "2026-02-08 08:55:51",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 4669,
      "output_tokens": 1143,
      "total_tokens": 7810
    }
  },
  "question": {
    "id": 1,
    "type": "Open",
    "topic": [
      "Memory Management",
      "Copy-on-Write",
      "Processes"
    ],
    "content": {
      "text": "תהליך אב יוצר תהליך בן באמצעות קריאת המערכת `fork()`. לפני ה-`fork()`, תהליך האב הקצה זיכרון וכתב בו נתונים.\n\nא. הסבר/י את הרעיון המרכזי מאחורי מנגנון Copy-on-Write (CoW) בהקשר של ניהול זיכרון ותהליכים, וציין/י את היתרון העיקרי שלו.\n\nב. תאר/י כיצד מנגנון CoW משפיע על בלוקי הזיכרון (pages) במקרה הבא: תהליך אב יוצר תהליך בן, ושניהם ניגשים לאותו דף זיכרון. לאחר מכן, תהליך הבן מבצע כתיבה לדף זיכרון זה. פרט/י מה קורה לדף הזיכרון ברמת מערכת ההפעלה (לדוגמה: מצב דף, שכפול, שינוי הרשאות) בשלבים הבאים:\n    1. מיד לאחר קריאת ה-`fork()` אך לפני כל כתיבה לדף המשותף.\n    2. כאשר תהליך הבן מנסה לכתוב לדף המשותף.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "א. Copy-on-Write (CoW) הוא מנגנון אופטימיזציה בניהול זיכרון, המאפשר לתהליכים שונים (לדוגמה, אב ובן לאחר `fork()`) לשתף את אותם דפי זיכרון פיזיים. הרעיון המרכזי הוא לדחות את פעולת השכפול של דפי הזיכרון עד לרגע שבו אחד התהליכים מנסה לכתוב לדף המשותף. היתרון העיקרי של CoW הוא חיסכון משמעותי בזיכרון ובזמן: אם תהליך הבן רק קורא מהזיכרון המשותף או מסיים את פעולתו לפני שינוי כלשהו, אין צורך לשכפל את הזיכרון כלל, מה שחוסך משאבי מערכת.\n\nב.\n1. מיד לאחר קריאת ה-`fork()`:\n    *   דפי הזיכרון (pages) שהיו שייכים לתהליך האב משותפים כעת גם לתהליך הבן.\n    *   בטבלאות הדפים (page tables) של האב והבן, הערכים עבור דפים אלו יצביעו לאותו דף פיזי בזיכרון.\n    *   הדפים הללו יסומנו במערכת ההפעלה כ\"קריאה בלבד\" (read-only) עבור שני התהליכים. זהו סימון פנימי המאפשר למערכת ההפעלה לזהות ניסיונות כתיבה.\n\n2. כאשר תהליך הבן מנסה לכתוב לדף המשותף:\n    *   מכיוון שהדף מסומן כ\"קריאה בלבד\", ניסיון הכתיבה של תהליך הבן יגרום ל-Page Fault (הפרעת דף).\n    *   מערכת ההפעלה תיירט את ה-Page Fault. היא תבין שמדובר בדף מסומן CoW.\n    *   מערכת ההפעלה תקצה דף זיכרון פיזי חדש.\n    *   היא תעתיק את תוכן הדף המקורי (המשותף) לדף הפיזי החדש שהוקצה.\n    *   טבלת הדפים של תהליך הבן תעודכן כך שהערך עבור הדף המדובר יצביע כעת לדף הפיזי החדש.\n    *   הדף החדש יסומן כ\"קריאה-כתיבה\" (read-write) עבור תהליך הבן.\n    *   טבלת הדפים של תהליך האב תמשיך להצביע על הדף הפיזי המקורי, שיישאר מסומן כ\"קריאה-כתיבה\" עבור האב (או \"קריאה בלבד\" אם ישנם תהליכים נוספים שמשתפים אותו).\n    *   לאחר מכן, פעולת הכתיבה של תהליך הבן תושלם לדף החדש שלו, מבלי להשפיע על דף הזיכרון של תהליך האב."
    },
    "difficulty_estimation": "Easy"
  }
}