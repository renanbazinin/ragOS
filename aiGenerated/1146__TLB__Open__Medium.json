{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "TLB",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-08 08:13:00",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2223,
      "output_tokens": 966,
      "total_tokens": 4526
    }
  },
  "question": {
    "id": 9,
    "type": "Open",
    "topic": [
      "TLB",
      "Memory Management",
      "Context Switch",
      "Performance"
    ],
    "content": {
      "text": "כיצד מעבר קונטקסט (Context Switch) משפיע על ה-TLB? תאר את הגישה המסורתית לטיפול במצב זה ואת מנגנון ASID (Address Space Identifier) כחלופה. הסבר את היתרונות והחסרונות של כל גישה בהקשר של ביצועים.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": 10,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "השפעת Context Switch על TLB:\nכאשר מתרחש מעבר קונטקסט בין תהליכים, מרחב הכתובות הווירטואלי משתנה. אם ה-TLB ימשיך להכיל כניסות מתהליך קודם, הוא עלול לספק תרגומי כתובות שגויים עבור התהליך החדש, מכיוון שאותן כתובות וירטואליות יכולות למפות לכתובות פיזיות שונות בתהליכים שונים.\n\nגישה מסורתית (TLB Invalidation/Flush):\nהגישה המסורתית היא לבצע \"ניקוי\" (flush/invalidation) של כל או חלק מכניסות ה-TLB בעת מעבר קונטקסט.\nיתרונות: פשוטה ליישום בחומרה. מבטיחה נכונות של תרגומי הכתובות עבור התהליך החדש.\nחסרונות: פוגעת בביצועים. ניקוי ה-TLB גורם לכך שכל גישות הזיכרון הראשונות של התהליך החדש יגרמו ל-TLB Miss, מה שמצריך גישה לטבלאות הדפים בזיכרון הראשי, פעולה יקרה ואיטית יותר. גם אם התהליך הקודם יחזור לרוץ מאוחר יותר, כניסות ה-TLB שלו כבר לא יהיו קיימות ויהיה צורך לטעון אותן מחדש.\n\nמנגנון ASID (Address Space Identifier):\nASID הוא מזהה ייחודי המשויך לכל מרחב כתובות (כלומר, לכל תהליך). כאשר כניסה נטענת ל-TLB, היא נטענת יחד עם ה-ASID של התהליך שיצר אותה. בעת תרגום כתובת וירטואלית, ה-MMU בודק לא רק את הכתובת הווירטואלית אלא גם שה-ASID של הכניסה ב-TLB תואם את ה-ASID הנוכחי של התהליך הרץ.\nיתרונות: משפר ביצועים משמעותית. אין צורך לנקות את ה-TLB במעבר קונטקסט, מכיוון שכניסות מתהליכים שונים יכולות לדור בכפיפה אחת ב-TLB. כאשר תהליך חוזר לרוץ, ייתכן שכניסות ה-TLB שלו עדיין קיימות ויכולות לשמש ל-TLB Hit, מה שמפחית את מספר ה-TLB Misses ואת הצורך בגישה לטבלאות הדפים.\nחסרונות: מורכבות חומרה וניהולית גדולה יותר. ה-TLB צריך להיות גדול יותר כדי להכיל את ה-ASID. ייתכן מצב של TLB thrashing אם יש יותר מדי תהליכים פעילים וה-TLB קטן מדי, והוא עדיין יצטרך לפנות כניסות ישנות (אך לא בהכרח בגלל context switch). מערכת ההפעלה צריכה לנהל את הקצאת ה-ASIDs לתהליכים ולדאוג למחזוריות שלהם."
    },
    "difficulty_estimation": "Medium"
  }
}