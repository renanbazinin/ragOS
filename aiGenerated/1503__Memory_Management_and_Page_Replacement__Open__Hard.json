{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Memory Management and Page Replacement",
    "requested_type": "Open",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-08 10:52:11",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 3221,
      "output_tokens": 3473,
      "total_tokens": 14744
    }
  },
  "question": {
    "id": 101,
    "type": "Open",
    "topic": [
      "Memory Management",
      "Paging",
      "Page Replacement Algorithms",
      "Operating Systems"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה המשתמשת במנגנון זיכרון וירטואלי מבוסס דפדוף (Paging), עם גודל דף של 4KB. הזיכרון הפיזי מוגבל ל-3 מסגרות דף (frames) בלבד.\nמערכת ההפעלה מממשת אלגוריתם החלפת דפים מותאם אישית בשם \"הזדקנות עם עדיפות\" (Aging with Priority - AWP). לכל מסגרת דף בזיכרון הפיזי יש:\n1.  **מונה גיל (Age Counter):** בגודל 4 ביטים (0-15). מאופס ל-0 בכל גישה לדף.\n2.  **ביט עדיפות (Priority Bit):** מוגדר כ-1 עבור דפים חשובים, ו-0 עבור דפים רגילים.\n\n**כללי האלגוריתם:**\n*   **הזדקנות:** לפני כל גישה לדף (למעט הגישה הראשונה למערכת), כל מוני הגיל של הדפים הנמצאים בזיכרון הפיזי מוגדלים ב-1.\n*   **החלפה:** כאשר מתרחש Page Fault ואין מסגרות פנויות:\n    *   נבחר להחלפה הדף בעל מונה הגיל הגבוה ביותר מבין כל הדפים שביט העדיפות שלהם הוא 0.\n    *   אם אין דפים שביט העדיפות שלהם הוא 0 (כל הדפים בזיכרון הם בעלי עדיפות), אז נבחר להחלפה הדף בעל מונה הגיל הגבוה ביותר מבין כולם.\n    *   במקרה של שוויון במוני הגיל, נבחר הדף שהוכנס לזיכרון לפני זמן רב יותר (FIFO tie-breaker).\n\nנתונה סדרת גישות לדפים וירטואליים: `P1, P2, P3, P1, P4, P5, P2, P3, P6, P1, P5, P7`.\nבתחילת הריצה, הזיכרון הפיזי ריק. דפים `P1, P3, P6` מוגדרים על ידי מערכת ההפעלה כבעלי עדיפות גבוהה (priority=1) באופן קבוע. שאר הדפים הם בעדיפות רגילה (priority=0).\n\n**נדרש:**\n1.  בצעו מעקב מפורט אחר סדרת הגישות. עבור כל גישה, הציגו את מצב הזיכרון הפיזי (אילו דפים נמצאים בכל מסגרת, מהו מונה הגיל וביט העדיפות של כל אחד) ואת מספר ה-Page Faults המצטבר.\n2.  חשבו את המספר הכולל של Page Faults שיתרחשו.\n3.  דונו ביתרונות ובחסרונות של אלגוריתם AWP זה בהשוואה לאלגוריתמים סטנדרטיים (כגון LRU או FIFO).\n4.  הציעו שיפור אחד לאלגוריתם AWP כדי להתמודד עם חיסרון שהצגתם.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "**פתרון מפורט:**\n\n**נתונים:**\n*   מספר מסגרות פיזיות: 3\n*   דפים בעדיפות (priority=1): P1, P3, P6\n*   דפים ללא עדיפות (priority=0): P2, P4, P5, P7\n\n**מעקב אחר סדרת הגישות וחישוב Page Faults:**\nמצב הזיכרון יוצג כרשימת מסגרות `[(דף, גיל, עדיפות)]`. PF מציין Page Fault.\n\n1.  **P1:** (אין הזדקנות לפני הגישה הראשונה)\n    *   P1 לא בזיכרון, יש מקום פנוי. PF!\n    *   מצב: `[(P1,0,1), (null), (null)]`\n    *   PF מצטבר: 1\n\n2.  **P2:**\n    *   הזדקנות: `[(P1,1,1), (null), (null)]`\n    *   P2 לא בזיכרון, יש מקום פנוי. PF!\n    *   מצב: `[(P1,1,1), (P2,0,0), (null)]`\n    *   PF מצטבר: 2\n\n3.  **P3:**\n    *   הזדקנות: `[(P1,2,1), (P2,1,0), (null)]`\n    *   P3 לא בזיכרון, יש מקום פנוי. PF!\n    *   מצב: `[(P1,2,1), (P2,1,0), (P3,0,1)]`\n    *   PF מצטבר: 3\n\n4.  **P1:**\n    *   הזדקנות: `[(P1,3,1), (P2,2,0), (P3,1,1)]`\n    *   P1 נמצא בזיכרון. איפוס גיל P1.\n    *   מצב: `[(P1,0,1), (P2,2,0), (P3,1,1)]`\n    *   PF מצטבר: 3\n\n5.  **P4:**\n    *   הזדקנות: `[(P1,1,1), (P2,3,0), (P3,2,1)]`\n    *   P4 לא בזיכרון, אין מקום פנוי. PF!\n    *   החלפה: דפים ללא עדיפות: P2 (גיל 3). נבחר P2.\n    *   מצב: `[(P1,1,1), (P4,0,0), (P3,2,1)]`\n    *   PF מצטבר: 4\n\n6.  **P5:**\n    *   הזדקנות: `[(P1,2,1), (P4,1,0), (P3,3,1)]`\n    *   P5 לא בזיכרון, אין מקום פנוי. PF!\n    *   החלפה: דפים ללא עדיפות: P4 (גיל 1). נבחר P4.\n    *   מצב: `[(P1,2,1), (P5,0,0), (P3,3,1)]`\n    *   PF מצטבר: 5\n\n7.  **P2:**\n    *   הזדקנות: `[(P1,3,1), (P5,1,0), (P3,4,1)]`\n    *   P2 לא בזיכרון, אין מקום פנוי. PF!\n    *   החלפה: דפים ללא עדיפות: P5 (גיל 1). נבחר P5.\n    *   מצב: `[(P1,3,1), (P2,0,0), (P3,4,1)]`\n    *   PF מצטבר: 6\n\n8.  **P3:**\n    *   הזדקנות: `[(P1,4,1), (P2,1,0), (P3,5,1)]`\n    *   P3 נמצא בזיכרון. איפוס גיל P3.\n    *   מצב: `[(P1,4,1), (P2,1,0), (P3,0,1)]`\n    *   PF מצטבר: 6\n\n9.  **P6:**\n    *   הזדקנות: `[(P1,5,1), (P2,2,0), (P3,1,1)]`\n    *   P6 לא בזיכרון, אין מקום פנוי. PF!\n    *   החלפה: דפים ללא עדיפות: P2 (גיל 2). נבחר P2.\n    *   מצב: `[(P1,5,1), (P6,0,1), (P3,1,1)]`\n    *   PF מצטבר: 7\n\n10. **P1:**\n    *   הזדקנות: `[(P1,6,1), (P6,1,1), (P3,2,1)]`\n    *   P1 נמצא בזיכרון. איפוס גיל P1.\n    *   מצב: `[(P1,0,1), (P6,1,1), (P3,2,1)]`\n    *   PF מצטבר: 7\n\n11. **P5:**\n    *   הזדקנות: `[(P1,1,1), (P6,2,1), (P3,3,1)]`\n    *   P5 לא בזיכרון, אין מקום פנוי. PF!\n    *   החלפה: אין דפים ללא עדיפות. כולם בעדיפות (P1, P6, P3). נבחר את בעל הגיל הגבוה ביותר: P3 (גיל 3).\n    *   מצב: `[(P1,1,1), (P6,2,1), (P5,0,0)]`\n    *   PF מצטבר: 8\n\n12. **P7:**\n    *   הזדקנות: `[(P1,2,1), (P6,3,1), (P5,1,0)]`\n    *   P7 לא בזיכרון, אין מקום פנוי. PF!\n    *   החלפה: דפים ללא עדיפות: P5 (גיל 1). נבחר P5.\n    *   מצב: `[(P1,2,1), (P6,3,1), (P7,0,0)]`\n    *   PF מצטבר: 9\n\n**2. המספר הכולל של Page Faults:**\n9 Page Faults.\n\n**3. יתרונות וחסרונות של אלגוריתם AWP בהשוואה לאלגוריתמים סטנדרטיים:**\n\n**יתרונות:**\n*   **הגנה על דפים קריטיים:** היתרון הבולט ביותר הוא היכולת להגן על דפים המסומנים כבעלי עדיפות גבוהה מפני החלפה מהירה. זה מבטיח שנתונים או קוד חיוניים למערכת או ליישומים קריטיים יישארו בזיכרון, מה שיכול לשפר משמעותית את הביצועים והיציבות של המערכת עבור משימות אלו.\n*   **שילוב היוריסטיקות:** האלגוריתם משלב את רעיון ה\"גיל\" (בדומה ל-LRU או שעון שנייה) עם מידע סמנטי (עדיפות), ובכך הוא יכול להיות חכם יותר מאלגוריתמים המבוססים אך ורק על היסטוריית גישה או זמן טעינה.\n\n**חסרונות:**\n*   **הרעבה (Starvation) לדפים בעדיפות נמוכה:** כפי שניתן לראות במעקב, דפים ללא עדיפות (כמו P2, P4, P5, P7) נוטים להיות מוחלפים במהירות ובתדירות גבוהה, גם אם הם נדרשים יחסית לעיתים קרובות. הם תמיד יהיו המועמדים הראשונים להחלפה, מה שעלול לגרום ל-thrashing עבור תהליכים המשתמשים בדפים אלו, ולפגוע בביצועי המערכת הכוללים.\n*   **תלות בהגדרת עדיפויות נכונה:** יעילות האלגוריתם תלויה באופן קריטי ביכולת של מערכת ההפעלה או המתכנת להגדיר נכון את ביט העדיפות. הגדרות שגויות עלולות להוביל לבחירות החלפה לא אופטימליות ולפגיעה בביצועים.\n*   **תקורת ניהול:** נדרש לנהל ביט עדיפות נוסף ומונה גיל לכל מסגרת, ולוגיקת ההחלפה מורכבת יותר מאשר באלגוריתמים פשוטים כמו FIFO או אפילו LRU טהור.\n\n**4. הצעת שיפור לאלגוריתם AWP:**\n\nכדי להתמודד עם חיסרון ההרעבה לדפים בעדיפות נמוכה, ניתן להציע **מנגנון דינמי לשינוי עדיפות (Dynamic Priority Adjustment)**:\n*   **תיאור השיפור:** אם דף בעדיפות נמוכה (priority=0) נבחר להחלפה מספר רב של פעמים ברצף, או אם הוא מגיע לגיל גבוה במיוחד (לדוגמה, 10) אך עדיין נדרש (כלומר, הוא נגיש שוב זמן קצר לאחר שהוחלף), מערכת ההפעלה יכולה להעלות באופן זמני את ביט העדיפות שלו ל-1. ניתן להגדיר שהעדיפות תרד בחזרה ל-0 לאחר מספר גישות או פרק זמן מסוים, או אם הדף לא נגיש לתקופה ארוכה.\n*   **יתרונות השיפור:** שיפור זה יאפשר לדפים שאינם מוגדרים כקריטיים במקור, אך בפועל נמצאים בשימוש תדיר, לקבל הגנה טובה יותר מפני החלפה. זה יפחית את תופעת ההרעבה וה-thrashing עבור תהליכים לא קריטיים, וישפר את ההיענות הכוללת של המערכת, מבלי לוותר על ההגנה הבסיסית לדפים הקריטיים באמת."
    },
    "difficulty_estimation": "Hard"
  }
}