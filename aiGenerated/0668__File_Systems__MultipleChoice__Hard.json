{
  "metadata": {
    "source": "ai_generated",
    "subject": "File Systems",
    "topic_hint": "File Systems",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-07 23:29:15",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 969,
      "output_tokens": 708,
      "total_tokens": 4549
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "topic": [
      "File Systems",
      "Journaling",
      "Data Integrity"
    ],
    "content": {
      "text": "במערכת קבצים מיומנת (journaling file system) כמו ext4, המוגדרת במצב `data=ordered`, תהליך כותב מידע קטן לקובץ קיים. מיד לאחר פעולת הכתיבה ולפני שהתהליך הספיק לבצע קריאה ל-`fsync()`, המערכת קורסת באופן בלתי צפוי. לאחר אתחול מחדש ושחזור מערכת הקבצים, מהו המצב הסביר ביותר של הקובץ?",
      "code_snippet": null,
      "options": [
        "א. הקובץ יכיל את הנתונים החדשים, ומטא-הנתונים (גודל קובץ, זמן שינוי) יעודכנו בהתאם.",
        "ב. הקובץ יכיל את הנתונים החדשים, אך מטא-הנתונים לא יעודכנו.",
        "ג. הקובץ ישוחזר למצבו המקורי לפני הכתיבה, ללא הנתונים החדשים.",
        "ד. הקובץ עלול להכיל נתונים שגויים (corrupted data) או שילוב בלתי עקבי של נתונים ישנים וחדשים."
      ]
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ג",
      "explanation": "במצב `data=ordered` (הגדרת ברירת מחדל ב-ext4), מערכת הקבצים מבטיחה שבלוקי הנתונים ייכתבו לדיסק *לפני* שמטא-הנתונים המתאימים (כמו גודל קובץ או מצביעי בלוקים) יעודכנו ביומן. אם קריסה מתרחשת *לאחר* כתיבת הנתונים לדיסק אך *לפני* שמטא-הנתונים עודכנו ביומן או שהיומן נכתב לדיסק (פעולה ש-`fsync()` מסייעת להבטיח), אז לאחר השחזור, היומן ינוגן אך שינוי מטא-הנתונים לא יופיע בו. כתוצאה מכך, מערכת הקבצים תחזור למצבה העקבי האחרון, והקובץ יופיע כאילו הכתיבה מעולם לא התרחשה, כלומר יכיל את הנתונים המקוריים שלו. הנתונים החדשים, גם אם נכתבו לדיסק, לא יהיו נגישים דרך מערכת הקבצים, מה שמבטיח עקביות של מטא-הנתונים אך לא מבטיח שהנתונים עצמם שרדו ללא קריאה ל-`fsync()`."
    },
    "difficulty_estimation": "Hard"
  }
}