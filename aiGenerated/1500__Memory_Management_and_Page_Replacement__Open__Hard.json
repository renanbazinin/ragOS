{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Memory Management and Page Replacement",
    "requested_type": "Open",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-08 10:49:39",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 3221,
      "output_tokens": 3821,
      "total_tokens": 21706
    }
  },
  "question": {
    "id": 101,
    "type": "Open",
    "topic": [
      "Memory Management",
      "Page Replacement",
      "Virtual Memory",
      "Clock Algorithm",
      "Enhanced Second Chance"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה המשתמשת בזיכרון וירטואלי עם גודל דף של 4KB. הזיכרון הפיזי מורכב מ-4 מסגרות (frames) בלבד. המערכת מריצה שני תהליכים, P1 ו-P2, ומשתמשת באלגוריתם החלפת דפים \"שעון משופר\" (Enhanced Second Chance) לניהול גלובלי של המסגרות.\n\nהאלגוריתם פועל כדלקמן:\nכאשר מתרחשת פסיקת דף עבור דף מסוים, ה-clock_hand מתחיל לסרוק מסגרות החל מהמיקום הנוכחי שלו (כולל) ומחפש מסגרת פנויה לפי סדר העדיפויות הבא:\n1.  מסגרת עם (R=0, D=0): דף נקי ולא בשימוש לאחרונה. מסגרת זו מוחלפת מיד. ה-clock_hand מתקדם למסגרת הבאה (לאחר המסגרת שהוחלפה).\n2.  מסגרת עם (R=0, D=1): דף מלוכלך ולא בשימוש לאחרונה. דף זה נכתב לדיסק (Disk Write) ואז המסגרת מוחלפת. ה-clock_hand מתקדם למסגרת הבאה.\n3.  מסגרת עם (R=1, X): דף בשימוש לאחרונה (כאשר X יכול להיות 0 או 1). ביט R שלו מתאפס (R=0), וה-clock_hand ממשיך לסרוק את המסגרת הבאה. אם כל המסגרות נסרקו (כלומר, ה-clock_hand השלים סיבוב שלם וחזר לנקודת ההתחלה של הסריקה), וביטי ה-R של כל המסגרות שהיו R=1 אופסו, אך לא נמצאה מסגרת מתאימה להחלפה לפי עדיפות 1 או 2, אז מתחילה סריקה נוספת החל מנקודת ההתחלה המקורית של הסריקה הנוכחית. בסריקה השנייה, האלגוריתם ימצא בהכרח מסגרת עם R=0 (שכן כל ביטי ה-R אופסו בסריקה הראשונה) ויחליף אותה לפי עדיפות 1 או 2.\n\n**תנאי מיוחד**: כאשר תהליך מושהה (Suspended), כל הדפים השייכים לו הופכים להיות מועמדים מועדפים להחלפה. במצב זה, ביט ה-R של דף השייך לתהליך מושהה מתעלם ממנו, והוא נחשב תמיד כ-R=0 לצורך קביעת עדיפות ההחלפה. כלומר, דף מושהה עם R=1, D=0 יטופל כ-(0,0), ודף מושהה עם R=1, D=1 יטופל כ-(0,1). ביטים R ו-D בפועל בטבלת הדפים נשמרים ומשתנים רק כרגיל (R מתאפס בסריקת השעון, D מתעדכן בכתיבה).\n\nבהתחלה, כל המסגרות ריקות וה-clock_hand מצביע על מסגרת 0.\n\nנתונה רצף הפעולות הבא:\n1.  P1 ניגש לדף 0 (קריאה)\n2.  P2 ניגש לדף 0 (קריאה)\n3.  P1 ניגש לדף 1 (כתיבה)\n4.  P2 ניגש לדף 1 (קריאה)\n5.  P1 ניגש לדף 0 (קריאה)\n6.  P2 מושהה (Suspended)\n7.  P1 ניגש לדף 2 (כתיבה)\n8.  P2 ניגש לדף 0 (קריאה)\n9.  P1 ניגש לדף 1 (קריאה)\n10. P2 חוזר לפעולה (Resumed)\n11. P2 ניגש לדף 2 (כתיבה)\n\n**נדרש:**\nא.  עבור כל גישה לזיכרון (1-11), ציין האם התרחשה פסיקת דף (Page Fault).\nב.  לאחר גישה מספר 7, תאר את מצב המסגרות הפיזיות (לכל מסגרת: איזה דף (תהליך, מספר דף) היא מכילה, ומהם ערכי R ו-D הנוכחיים של הדף). יש לציין את מיקום ה-clock_hand.\nג.  לאחר גישה מספר 11, תאר את מצב המסגרות הפיזיות (כמו בסעיף ב'). יש לציין את מיקום ה-clock_hand.\nD.  מהו המספר הכולל של כתיבות לדיסק (Disk Writes) שבוצעו במהלך כל רצף הפעולות?\nה.  מהו המספר הכולל של פסיקות דף (Page Faults) שבוצעו במהלך כל רצף הפעולות?\n\nפרט את כל השלבים והחישובים שלך בפירוט מלא.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "פתרון:\nננהל מעקב מפורט אחר מצב 4 המסגרות הפיזיות, ביטי ה-R וה-D של הדפים בהן, מיקום ה-clock_hand, והאם תהליך P2 מושהה. נשתמש בפורמט: F[אינדקס מסגרת]: (תהליך, דף, R, D).\n\n**מצב התחלתי:**\nF0: (ריק)\nF1: (ריק)\nF2: (ריק)\nF3: (ריק)\nclock_hand = 0\nDisk_Writes = 0\nPage_Faults = 0\nP2_suspended = false\n\n--- מעקב אחר הפעולות ---\n\n**1. P1 ניגש לדף 0 (קריאה)**\n*   P1-0 אינו בזיכרון. **פסיקת דף**. (Page Faults: 1)\n*   clock_hand מתחיל סריקה מ-0.\n*   F0 ריקה. נטען P1-0 ל-F0. R=1, D=0.\n*   clock_hand מתקדם ל-1.\n*   מצב המסגרות: F0: (P1, 0, 1, 0), F1: (ריק), F2: (ריק), F3: (ריק)\n\n**2. P2 ניגש לדף 0 (קריאה)**\n*   P2-0 אינו בזיכרון. **פסיקת דף**. (Page Faults: 2)\n*   clock_hand מתחיל סריקה מ-1.\n*   F1 ריקה. נטען P2-0 ל-F1. R=1, D=0.\n*   clock_hand מתקדם ל-2.\n*   מצב המסגרות: F0: (P1, 0, 1, 0), F1: (P2, 0, 1, 0), F2: (ריק), F3: (ריק)\n\n**3. P1 ניגש לדף 1 (כתיבה)**\n*   P1-1 אינו בזיכרון. **פסיקת דף**. (Page Faults: 3)\n*   clock_hand מתחיל סריקה מ-2.\n*   F2 ריקה. נטען P1-1 ל-F2. R=1, D=1 (בגלל כתיבה).\n*   clock_hand מתקדם ל-3.\n*   מצב המסגרות: F0: (P1, 0, 1, 0), F1: (P2, 0, 1, 0), F2: (P1, 1, 1, 1), F3: (ריק)\n\n**4. P2 ניגש לדף 1 (קריאה)**\n*   P2-1 אינו בזיכרון. **פסיקת דף**. (Page Faults: 4)\n*   clock_hand מתחיל סריקה מ-3.\n*   F3 ריקה. נטען P2-1 ל-F3. R=1, D=0.\n*   clock_hand מתקדם ל-0.\n*   מצב המסגרות: F0: (P1, 0, 1, 0), F1: (P2, 0, 1, 0), F2: (P1, 1, 1, 1), F3: (P2, 1, 1, 0)\n\n**5. P1 ניגש לדף 0 (קריאה)**\n*   P1-0 נמצא ב-F0. **אין פסיקת דף**. (Page Faults: 4)\n*   ביט R של F0 (P1, 0) נשאר 1 (כבר 1).\n*   מצב המסגרות: F0: (P1, 0, 1, 0), F1: (P2, 0, 1, 0), F2: (P1, 1, 1, 1), F3: (P2, 1, 1, 0)\n\n**6. P2 מושהה (Suspended)**\n*   P2_suspended = true. **אין פסיקת דף**. (Page Faults: 4)\n\n**7. P1 ניגש לדף 2 (כתיבה)**\n*   P1-2 אינו בזיכרון. כל המסגרות מלאות. **פסיקת דף**. (Page Faults: 5)\n*   clock_hand מתחיל סריקה מ-0 (המיקום הנוכחי שלו):\n    *   **F0**: (P1, 0, R=1, D=0). R=1. מאפסים R ל-0. (F0: (P1, 0, 0, 0)). הסורק ממשיך ל-1.\n    *   **F1**: (P2, 0, R=1, D=0). P2 מושהה, לכן נתייחס ל-R כ-0. מצב אפקטיבי (R=0, D=0). זוהי עדיפות 1. נחליף את F1.\n        *   פליטה של (P2, 0) מ-F1 (D=0, אין כתיבה לדיסק).\n        *   טעינת P1-2 ל-F1. R=1, D=1.\n        *   clock_hand מתקדם ל-2 (לאחר המסגרת שהוחלפה).\n\n**ב. מצב המסגרות הפיזיות לאחר גישה מספר 7:**\n*   F0: (P1, 0, R=0, D=0)\n*   F1: (P1, 2, R=1, D=1)\n*   F2: (P1, 1, R=1, D=1)\n*   F3: (P2, 1, R=1, D=0) (P2 מושהה)\n*   clock_hand = 2\n\n**8. P2 ניגש לדף 0 (קריאה)**\n*   P2-0 אינו בזיכרון (הודח מ-F1). כל המסגרות מלאות. **פסיקת דף**. (Page Faults: 6)\n*   clock_hand מתחיל סריקה מ-2 (המיקום הנוכחי שלו):\n    *   **F2**: (P1, 1, R=1, D=1). R=1. מאפסים R ל-0. (F2: (P1, 1, 0, 1)). הסורק ממשיך ל-3.\n    *   **F3**: (P2, 1, R=1, D=0). P2 מושהה, לכן נתייחס ל-R כ-0. מצב אפקטיבי (R=0, D=0). זוהי עדיפות 1. נחליף את F3.\n        *   פליטה של (P2, 1) מ-F3 (D=0, אין כתיבה לדיסק).\n        *   טעינת P2-0 ל-F3. R=1, D=0.\n        *   clock_hand מתקדם ל-0.\n\n**9. P1 ניגש לדף 1 (קריאה)**\n*   P1-1 נמצא ב-F2. **אין פסיקת דף**. (Page Faults: 6)\n*   ביט R של F2 (P1, 1) נקבע ל-1.\n*   מצב המסגרות: F0: (P1, 0, 0, 0), F1: (P1, 2, 1, 1), F2: (P1, 1, 1, 1), F3: (P2, 0, 1, 0) (P2 מושהה)\n\n**10. P2 חוזר לפעולה (Resumed)**\n*   P2_suspended = false. **אין פסיקת דף**. (Page Faults: 6)\n\n**11. P2 ניגש לדף 2 (כתיבה)**\n*   P2-2 אינו בזיכרון. כל המסגרות מלאות. **פסיקת דף**. (Page Faults: 7)\n*   clock_hand מתחיל סריקה מ-0 (המיקום הנוכחי שלו):\n    *   **F0**: (P1, 0, R=0, D=0). R=0, D=0. זוהי עדיפות 1. נחליף את F0.\n        *   פליטה של (P1, 0) מ-F0 (D=0, אין כתיבה לדיסק).\n        *   טעינת P2-2 ל-F0. R=1, D=1.\n        *   clock_hand מתקדם ל-1.\n\n**ג. מצב המסגרות הפיזיות לאחר גישה מספר 11:**\n*   F0: (P2, 2, R=1, D=1)\n*   F1: (P1, 2, R=1, D=1)\n*   F2: (P1, 1, R=1, D=1)\n*   F3: (P2, 0, R=1, D=0)\n*   clock_hand = 1\n\n**ד. המספר הכולל של כתיבות לדיסק (Disk Writes):**\nבמהלך כל רצף הפעולות, לא הודח אף דף מלוכלך (D=1) כאשר הוא היה בעדיפות (R=0). כל הפליטות היו של דפים נקיים (D=0).\n**סה\"כ כתיבות לדיסק = 0**\n\n**ה. המספר הכולל של פסיקות דף (Page Faults):**\nפסיקות דף התרחשו בגישות מספר: 1, 2, 3, 4, 7, 8, 11.\n**סה\"כ פסיקות דף = 7**",
      "difficulty_estimation": "Hard"
    }
  }
}