{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Paging",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-07 22:54:40",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 969,
      "output_tokens": 1217,
      "total_tokens": 6033
    }
  },
  "question": {
    "id": 101,
    "type": "MultipleChoice",
    "topic": [
      "Paging",
      "Virtual Memory",
      "Multi-level Paging"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה 64 ביט המשתמשת בכתובות וירטואליות קנוניות באורך 48 ביט. המערכת מיישמת דפדוף היררכי בן 4 רמות (4-level hierarchical paging). גודל דף הוא 4KB, וגודל כניסה בטבלת דפים (PTE) הוא 8 בתים. מהו נפח הזיכרון המרבי (ב-GB) שייצרכו טבלאות הדפים של תהליך בודד, אם הוא ממפה באופן מלא את כל מרחב הכתובות הווירטואלי הקנוני שלו?",
      "code_snippet": null,
      "options": [
        "א. 4GB",
        "ב. 64GB",
        "ג. 128GB",
        "ד. 513GB",
        "ה. 1024GB"
      ]
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ד",
      "explanation": "נפח כתובת וירטואלית קנונית: 48 ביט.\nגודל דף: 4KB = 2^12 בתים, לכן 12 ביטים מוקצים ל-offset.\nמספר ביטים ל-Virtual Page Number (VPN): 48 - 12 = 36 ביטים.\nגודל כניסה בטבלת דפים (PTE): 8 בתים.\nמספר כניסות לכל טבלת דפים (שגודלה כגודל דף אחד): 4KB / 8 בתים = 4096 / 8 = 512 כניסות.\nמספר ביטים לכל אינדקס בטבלת דפים: log2(512) = 9 ביטים.\nמספר רמות טבלאות דפים נדרשות: 36 ביטים (VPN) / 9 ביטים לרמה = 4 רמות. זה תואם את הנתון בשאלה.\n\nכדי למפות באופן מלא את כל מרחב הכתובות הווירטואלי הקנוני (48 ביט), נצטרך את טבלאות הדפים הבאות:\n1.  רמה 4 (PML4): טבלת דפים אחת.\n2.  רמה 3 (PDPT): אם טבלת ה-PML4 מלאה, היא מפנה ל-512 טבלאות דפים ברמה 3.\n3.  רמה 2 (PD): אם כל טבלאות ה-PDPT מלאות, הן מפנות ל-512 * 512 = 512^2 טבלאות דפים ברמה 2.\n4.  רמה 1 (PT): אם כל טבלאות ה-PD מלאות, הן מפנות ל-512 * 512 * 512 = 512^3 טבלאות דפים ברמה 1.\n\nסה\"כ דפים המשמשים לטבלאות דפים:\n1 (PML4) + 512 (PDPTs) + 512^2 (PDs) + 512^3 (PTs)\n= 1 + 512 + 262,144 + 134,217,728\n= 134,480,385 דפים.\n\nנפח זיכרון כולל בבתים: 134,480,385 דפים * 4096 בתים/דף = 550,810,320,000 בתים.\n\nנמיר ל-GB:\n550,810,320,000 בתים / (1024 * 1024 * 1024) בתים/GB ≈ 512.98 GB.\nהתשובה הקרובה ביותר היא 513GB.\n\nהערה: ניתן גם לחשב בקירוב: נפח טבלאות הדפים ברמה הנמוכה ביותר הוא הדומיננטי.\n512^3 דפים * 4KB/דף = (2^9)^3 * 2^12 בתים = 2^27 * 2^12 בתים = 2^39 בתים.\n2^39 בתים / (2^10)^3 בתים/GB = 2^39 / 2^30 GB = 2^9 GB = 512 GB.\nהוספת הדפים מהרמות הגבוהות יותר (כ-1GB נוסף) מביאה ל-513GB."
    },
    "difficulty_estimation": "Hard"
  }
}