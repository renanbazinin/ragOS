{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "CPU Scheduling and Context Switching",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-08 11:46:18",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2319,
      "output_tokens": 1467,
      "total_tokens": 7102
    }
  },
  "question": {
    "id": 1,
    "type": "Open",
    "topic": [
      "CPU Scheduling",
      "Context Switching",
      "Operating System Concepts"
    ],
    "content": {
      "text": "הסבירו מהו מיתוג הקשר (Context Switching) במערכת הפעלה. פרטו אילו רכיבים נשמרים ומשוחזרים במהלך מיתוג הקשר, וכיצד תדירות גבוהה של מיתוגי קשר משפיעה על ביצועי המערכת. תארו תרחיש שבו אלגוריתם תזמון מסוים עלול לגרום למספר רב של מיתוגי קשר, והציעו דרך למתן השפעה זו.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": 10,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "מיתוג קשר (Context Switching) הוא התהליך שבו מערכת ההפעלה שומרת את מצבו (הקשרו) של תהליך או חוט אחד, וטוענת את מצבו של תהליך או חוט אחר, על מנת לאפשר למעבד להחליף בין ביצועם. תהליך זה חיוני כדי לאפשר ריבוי משימות (multitasking).\n\n**רכיבים הנשמרים ומשוחזרים:**\nבמהלך מיתוג קשר, נשמרים ונשחזרים הרכיבים הבאים (בין היתר):\n*   **אוגרי המעבד (CPU Registers):** כולל את מונה התוכנית (Program Counter - PC), מצביע המחסנית (Stack Pointer - SP), ואוגרים כלליים שבהם השתמש התהליך הנוכחי. אלו מכילים את המידע הדרוש כדי שהתהליך יוכל להמשיך מנקודת העצירה.\n*   **מצב התהליך (Process State):** המידע אודות מצבו הנוכחי של התהליך (לדוגמה: רץ, מוכן, חסום).\n*   **מידע ניהול זיכרון (Memory Management Information):** כולל מצביעים לטבלאות דפים (Page Tables) או מידע אחר הקשור למרחב הכתובות הווירטואלי של התהליך. במערכות רבות, ייתכן שיהיה צורך בניקוי ה-TLB (Translation Lookaside Buffer).\n*   **מידע אודות קלט/פלט (I/O Status Information):** אם התהליך היה מעורב בפעולות קלט/פלט, ייתכן שיהיה צורך לשמור מידע קשור.\n\n**השפעת תדירות גבוהה של מיתוגי קשר על ביצועי המערכת:**\nתדירות גבוהה של מיתוגי קשר פוגעת בביצועי המערכת מכמה סיבות:\n*   **תקורה (Overhead):** כל מיתוג קשר דורש זמן מעבד לביצוע פעולות השמירה והשחזור. זמן זה הוא זמן מבוזבז שאינו מקדם את עבודתם השימושית של התהליכים. ככל שתדירות המיתוגים גבוהה יותר, כך גדל אחוז זמן המעבד המושקע בתקורה.\n*   **פגיעה בביצועי מטמון (Cache Performance):** כאשר תהליך חדש נטען למעבד, סביר להניח שהנתונים וההוראות שלו אינם נמצאים במטמוני המעבד (Cache). כתוצאה מכך, המעבד יצטרך לגשת לזיכרון הראשי (שהוא איטי בהרבה) כדי לטעון אותם, מה שמאט משמעותית את הביצועים (Cache Misses). תהליך שרץ זמן רב יותר נוטה למלא את המטמון בנתונים רלוונטיים לו, ומיתוג קשר פוגע באפקט זה.\n*   **ניקוי TLB (TLB Flush):** במערכות רבות, שינוי מרחב הכתובות הווירטואלי (כאשר עוברים מתהליך אחד לאחר) דורש ניקוי של ה-TLB. ניקוי זה גורם לכך שגישות הזיכרון הבאות יהיו איטיות יותר עד שה-TLB יתמלא מחדש במיפויים הרלוונטיים לתהליך החדש.\n\n**תרחיש ודרך למיתון ההשפעה:**\n*   **תרחיש:** אלגוריתם תזמון **Round-Robin (RR)** עם **קוונטום זמן (time quantum) קצר מאוד**. בתרחיש כזה, כל תהליך מקבל משבצת זמן קצרה מאוד לרוץ, ולאחר מכן מופסק ומתבצע מיתוג קשר לתהליך הבא בתור. אם ישנם תהליכים רבים במצב 'מוכן' (ready queue), המערכת תבצע מספר עצום של מיתוגי קשר בזמן קצר, מה שיוביל לתקורה משמעותית ופגיעה בביצועים.\n*   **דרך למיתון ההשפעה:** **הגדלת קוונטום הזמן (time quantum)**. על ידי הגדלת קוונטום הזמן, כל תהליך יקבל זמן ריצה ארוך יותר לפני שיבוצע מיתוג קשר. הדבר יפחית את תדירות מיתוגי הקשר ויצמצם את התקורה וההשפעות השליליות על המטמון. עם זאת, יש למצוא איזון, שכן קוונטום זמן גדול מדי עלול להגדיל את זמן התגובה (response time) של תהליכים אינטראקטיביים, ולגרום למערכת להרגיש פחות רספונסיבית. ישנה נקודה אופטימלית שבה התקורה של מיתוגי הקשר מאוזנת מול הצורך בתגובתיות."
    },
    "difficulty_estimation": "Medium"
  }
}