{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Scheduling",
    "requested_type": "Open",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-09 20:37:29",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 3419,
      "output_tokens": 3791,
      "total_tokens": 27775
    }
  },
  "question": {
    "id": 10,
    "type": "Open",
    "topic": [
      "Scheduling",
      "Priority Scheduling",
      "Aging",
      "Context Switching",
      "Process States"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה המשתמשת באלגוריתם תזמון קדימויות דורסני (preemptive priority scheduling). קדימות נמוכה יותר (מספר קטן יותר) מציינת קדימות גבוהה יותר. עלות החלפת הקשר (context switch) היא יחידת זמן אחת. המערכת מיישמת מנגנון 'הזדקנות' (aging) למניעת הרעבה: בכל יחידת זמן `t` שהיא כפולה של 5 (לדוגמה: t=0, 5, 10, וכו'), ערך הקדימות של כל התהליכים הנמצאים בתור ההרצה (ready queue) יורד ב-1 (כלומר, הקדימות שלהם משתפרת). ערך הקדימות המינימלי הוא 1. בדיקת ההזדקנות מתבצעת בתחילת יחידת זמן `t` כזו, לפני קבלת החלטת התזמון באותה יחידת זמן.\n\nלהלן טבלת תהליכים עם זמני הגעה, זמני ריצת מעבד, וקדימויות התחלתיות:\n\n| תהליך | זמן הגעה | פרץ מעבד 1 | פרץ קלט/פלט | פרץ מעבד 2 | קדימות התחלתית |\n| :----- | :-------- | :--------- | :---------- | :---------- | :-------------- |\n| P1     | 0         | 10         | -           | -           | 4               |\n| P2     | 2         | 5          | 8           | 5           | 1               |\n| P3     | 4         | 3          | -           | -           | 5               |\n| P4     | 6         | 7          | -           | -           | 2               |\n\nיש לשרטט תרשים גאנט המפרט את ריצת התהליכים לאורך זמן. עבור כל תהליך, יש לחשב את זמן ההשלמה (completion time), זמן המחזור (turnaround time) וזמן ההמתנה (waiting time). לבסוף, יש לחשב את זמן המחזור הממוצע ואת זמן ההמתנה הממוצע. בנוסף, הסבר כיצד מנגנון ההזדקנות השפיע על התזמון הכללי.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "**ניתוח ושרטוט תרשים גאנט:**\n\nנתוני תהליכים:\n*   P1: הגעה 0, פרץ מעבד 10, קדימות התחלתית 4\n*   P2: הגעה 2, פרץ מעבד 5, קלט/פלט 8, פרץ מעבד 5, קדימות התחלתית 1\n*   P3: הגעה 4, פרץ מעבד 3, קדימות התחלתית 5\n*   P4: הגעה 6, פרץ מעבד 7, קדימות התחלתית 2\n\nעלות החלפת קשר: 1 יחידת זמן.\nהזדקנות: בכל t=5k, קדימות תהליכים בתור ההרצה משתפרת ב-1 (ערך הקדימות יורד ב-1, מינימום 1).\n\n**תרשים גאנט מפורט ושינויי קדימות:**\n\n| זמן | אירוע | מעבד | תור הרצה (קדימות) | חסומים (זמן סיום ק/פ) | P1 קדימות | P2 קדימות | P3 קדימות | P4 קדימות |\n| :-- | :---- | :--- | :----------------- | :-------------------- | :-------- | :-------- | :-------- | :-------- |\n| 0   | P1 מגיע | P1   |                    |                       | 4         |           |           |           |\n| 1   |         | P1   |                    |                       | 4         |           |           |           |\n| 2   | P2 מגיע | CS1  | P1(4), P2(1)       |                       | 4         | 1         |           |           | (P2 קדימות גבוהה מ-P1) |\n| 3   |         | P2   | P1(4)              |                       | 4         | 1         |           |           |\n| 4   | P3 מגיע | P2   | P1(4), P3(5)       |                       | 4         | 1         | 5         |           |\n| 5   | **הזדקנות** | P2   | P1(3), P3(4)       |                       | 3         | 1         | 4         |           | (P1: 4->3, P3: 5->4) |\n| 6   | P4 מגיע | P2   | P1(3), P3(4), P4(2)|                       | 3         | 1         | 4         | 2         |\n| 7   |         | P2   | P1(3), P3(4), P4(2)|                       | 3         | 1         | 4         | 2         |\n| 8   | P2 סיים 1 | CS2  | P1(3), P3(4), P4(2)| P2(16)                | 3         | 1         | 4         | 2         | (P2 עובר לק/פ, יסיים ב-8+8=16. P4 קדימות גבוהה ביותר) |\n| 9   |         | P4   | P1(3), P3(4)       | P2(16)                | 3         | 1         | 4         | 2         |\n| 10  | **הזדקנות** | P4   | P1(2), P3(4)       | P2(16)                | 2         | 1         | 4         | 2         | (P1: 3->2, P3: 4->3) |\n| 11  |         | P4   | P1(2), P3(4)       | P2(16)                | 2         | 1         | 4         | 2         |\n| 12  |         | P4   | P1(2), P3(4)       | P2(16)                | 2         | 1         | 4         | 2         |\n| 13  |         | P4   | P1(2), P3(4)       | P2(16)                | 2         | 1         | 4         | 2         |\n| 14  |         | P4   | P1(2), P3(4)       | P2(16)                | 2         | 1         | 4         | 2         |\n| 15  |         | P4   | P1(2), P3(4)       | P2(16)                | 2         | 1         | 4         | 2         |\n| 16  | P4 סיים | CS3  | P1(2), P3(4), P2(1)|                       | 2         | 1         | 4         | 2         | (P4 סיים. P2 סיים ק/פ והפך ל-Ready. P2 קדימות גבוהה ביותר) |\n| 17  |         | P2   | P1(2), P3(4)       |                       | 2         | 1         | 4         | 2         |\n| 18  |         | P2   | P1(2), P3(4)       |                       | 2         | 1         | 4         | 2         |\n| 19  |         | P2   | P1(2), P3(4)       |                       | 2         | 1         | 4         | 2         |\n| 20  | **הזדקנות** | P2   | P1(1), P3(3)       |                       | 1         | 1         | 3         | 2         | (P1: 2->1, P3: 3->2) |\n| 21  |         | P2   | P1(1), P3(3)       |                       | 1         | 1         | 3         | 2         |\n| 22  | P2 סיים 2 | CS4  | P1(1), P3(3)       |                       | 1         | 1         | 3         | 2         | (P2 סיים לגמרי. P1 קדימות גבוהה ביותר) |\n| 23  |         | P1   | P3(3)              |                       | 1         | 1         | 3         | 2         |\n| 24  |         | P1   | P3(3)              |                       | 1         | 1         | 3         | 2         |\n| 25  | **הזדקנות** | P1   | P3(2)              |                       | 1         | 1         | 2         | 2         | (P3: 3->2) |\n| 26  |         | P1   | P3(2)              |                       | 1         | 1         | 2         | 2         |\n| 27  |         | P1   | P3(2)              |                       | 1         | 1         | 2         | 2         |\n| 28  |         | P1   | P3(2)              |                       | 1         | 1         | 2         | 2         |\n| 29  |         | P1   | P3(2)              |                       | 1         | 1         | 2         | 2         |\n| 30  | **הזדקנות** | P1   | P3(1)              |                       | 1         | 1         | 1         | 2         | (P3: 2->1) |\n| 31  | P1 סיים | CS5  | P3(1)              |                       | 1         | 1         | 1         | 2         | (P1 סיים לגמרי. P3 קדימות גבוהה ביותר) |\n| 32  |         | P3   |                    |                       | 1         | 1         | 1         | 2         |\n| 33  |         | P3   |                    |                       | 1         | 1         | 1         | 2         |\n| 34  |         | P3   |                    |                       | 1         | 1         | 1         | 2         |\n| 35  | P3 סיים |      |                    |                       | 1         | 1         | 1         | 2         | (P3 סיים לגמרי) |\n\n**חישובים:**\n\n*   **P1**:\n    *   זמן הגעה: 0\n    *   זמן סיום: 31\n    *   זמן ריצת מעבד כולל: 10\n    *   זמן מחזור (Turnaround Time) = זמן סיום - זמן הגעה = 31 - 0 = 31\n    *   זמן המתנה (Waiting Time) = (זמן בתור הרצה) = (3-2) + (8-3) + (9-8) + (16-9) + (17-16) + (22-17) + (23-22) = 1 + 5 + 1 + 7 + 1 + 5 + 1 = 21\n\n*   **P2**:\n    *   זמן הגעה: 2\n    *   זמן סיום: 22\n    *   זמן ריצת מעבד כולל: 10\n    *   זמן מחזור (Turnaround Time) = זמן סיום - זמן הגעה = 22 - 2 = 20\n    *   זמן המתנה (Waiting Time) = 0 (P2 רץ מיד עם הגעתו/חזרתו מק/פ, למעט זמני החלפת קשר שאינם נחשבים המתנה עבור התהליך)\n\n*   **P3**:\n    *   זמן הגעה: 4\n    *   זמן סיום: 35\n    *   זמן ריצת מעבד כולל: 3\n    *   זמן מחזור (Turnaround Time) = זמן סיום - זמן הגעה = 35 - 4 = 31\n    *   זמן המתנה (Waiting Time) = (32-4) = 28\n\n*   **P4**:\n    *   זמן הגעה: 6\n    *   זמן סיום: 16\n    *   זמן ריצת מעבד כולל: 7\n    *   זמן מחזור (Turnaround Time) = זמן סיום - זמן הגעה = 16 - 6 = 10\n    *   זמן המתנה (Waiting Time) = (9-6) = 3\n\n**חישוב ממוצעים:**\n*   זמן מחזור ממוצע = (31 + 20 + 31 + 10) / 4 = 92 / 4 = 23\n*   זמן המתנה ממוצע = (21 + 0 + 28 + 3) / 4 = 52 / 4 = 13\n\n**השפעת מנגנון ההזדקנות על התזמון הכללי:**\n\nמנגנון ההזדקנות מנע הרעבה (starvation) של תהליכים בעלי קדימות נמוכה. ללא מנגנון זה, תהליכים כמו P1 ו-P3, שהתחילו עם קדימויות 4 ו-5 בהתאמה (נמוכות יחסית), היו נאלצים להמתין זמן רב מאוד, ואולי אף אינסופי, אם תהליכים בעלי קדימות גבוהה יותר (כמו P2 ו-P4) היו ממשיכים להגיע או לבצע פעולות ק/פ ולחזור לתור ההרצה. לדוגמה, P3 התחיל עם קדימות 5 (הכי נמוכה), אך בזכות ההזדקנות, קדימותו השתפרה ל-4 (בזמן 5), ל-3 (בזמן 10), ל-2 (בזמן 25), ולבסוף ל-1 (בזמן 30). שיפור זה איפשר לו בסופו של דבר לקבל זמן מעבד ולהשלים את ריצתו, למרות שהיו תהליכים אחרים עם קדימות התחלתית גבוהה יותר. ההזדקנות מבטיחה שכל תהליך יקבל בסופו של דבר הזדמנות לרוץ, גם במחיר של הגדלת זמני המתנה של תהליכים בעלי קדימות גבוהה יותר במקרים מסוימים (כפי שקרה ל-P1 שהקדימות שלו השתפרה אך עדיין נאלץ להמתין עד ש-P2 סיים)."
    },
    "difficulty_estimation": "Hard"
  }
}