{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Virtual Memory",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-07 22:17:53",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 969,
      "output_tokens": 1016,
      "total_tokens": 5260
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "topic": [
      "Virtual Memory",
      "Copy-on-Write",
      "Paging",
      "Page Faults"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה המשתמשת בזיכרון וירטואלי ובדפים בגודל 4KB. תהליך אב (Parent) מקצה מערך בגודל 1GB ומאתחל אותו. מיד לאחר מכן, תהליך האב מבצע קריאה ל-`fork()`, היוצרת תהליך בן (Child).\nלאחר ה-`fork()`, גם תהליך האב וגם תהליך הבן מבצעים לולאה שלמה על כל המערך בגודל 1GB, וכותבים לכל איבר במערך (לדוגמה: `array[i] = array[i] + 1;`).\nהנח כי המערך כולו היה טעון בזיכרון פיזי לפני קריאת ה-`fork()`, וכי יש מספיק זיכרון פיזי במערכת כדי להכיל את כל הדפים הנדרשים.\nמהו המספר המינימלי של פסיקות דף (page faults) שיתרחשו *עקב פעולות כתיבה* למערך זה, בסך הכל עבור שני התהליכים (אב ובן)?",
      "code_snippet": null,
      "options": [
        "א. 0",
        "ב. 262,144",
        "ג. 524,288",
        "ד. 1,048,576",
        "ה. לא ניתן לקבוע ללא מידע נוסף"
      ]
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ג",
      "explanation": "ראשית, נחשב את מספר הדפים במערך בגודל 1GB:\n1GB = 1024 MB = 1024 * 1024 KB = 1,048,576 KB.\nמספר הדפים = 1,048,576 KB / 4 KB/דף = 262,144 דפים.\n\nכאשר תהליך האב קורא ל-`fork()`, כל הדפים של המערך משותפים בין האב לבן במצב Copy-on-Write (CoW). המשמעות היא שהדפים יועתקו רק כאשר אחד התהליכים ינסה לכתוב אליהם.\n\nשני התהליכים, האב והבן, מבצעים לולאה שלמה וכותבים לכל איבר במערך. עבור כל דף במערך:\n1.  התהליך הראשון (אב או בן) שיכתוב לאיבר כלשהו בדף זה, יגרום לפסיקת דף CoW. מערכת ההפעלה תיצור עותק פרטי של הדף עבור תהליך זה. זוהי פסיקת דף אחת.\n2.  התהליך השני שיכתוב לאיבר כלשהו באותו דף (שעדיין משותף במובן של כתובת וירטואלית, אך ייתכן שכבר עבר CoW עבור התהליך הראשון), יגרום גם הוא לפסיקת דף CoW. מערכת ההפעלה תיצור עותק פרטי של הדף עבור תהליך זה. זוהי פסיקת דף נוספת.\n\nלכן, כל אחד מ-262,144 הדפים יגרום לשתי פסיקות דף CoW בסך הכל (אחת עבור הכתיבה הראשונה של האב לדף, ואחת עבור הכתיבה הראשונה של הבן לדף). לאחר שדף הפך לפרטי עבור תהליך מסוים, כתיבות נוספות לאותו דף על ידי אותו תהליך לא יגרמו לפסיקות CoW נוספות.\n\nסה\"כ פסיקות דף CoW = 262,144 דפים * 2 פסיקות/דף = 524,288 פסיקות דף."
    },
    "difficulty_estimation": "Hard"
  }
}