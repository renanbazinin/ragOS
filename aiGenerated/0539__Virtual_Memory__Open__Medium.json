{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Virtual Memory",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 22:31:53",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1964,
      "output_tokens": 1358,
      "total_tokens": 7169
    }
  },
  "question": {
    "id": 10,
    "type": "Open",
    "topic": [
      "Virtual Memory",
      "Paging",
      "Memory Management",
      "Multi-level Page Tables"
    ],
    "content": {
      "text": "נתונה מערכת עם זיכרון וירטואלי של 2GB, גודל דף של 8KB, וזיכרון פיזי של 128MB.\nהמערכת משתמשת בטבלת דפים היררכית דו-רמתית (Two-level page table), כאשר גודל כל רשומה בטבלת הדפים (PTE) הוא 4 בתים.\n\n1. מהם הגדלים של ה-VPN וה-PFN?\n2. כמה ביטים מוקצים לכל רמה בטבלת הדפים הדו-רמתית, וכמה ביטים מוקצים להיסט (offset)? נמקו.\n3. כמה דפים פיזיים מינימליים יידרשו לאחסון טבלת הדפים עבור תהליך המשתמש בכל הזיכרון הוירטואלי שלו?",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "1. **VPN ו-PFN**:\n   *   גודל זיכרון וירטואלי: 2GB = 2^31 בתים, לכן כתובת וירטואלית היא באורך 31 ביטים.\n   *   גודל דף: 8KB = 2^13 בתים, לכן ההיסט (offset) הוא באורך 13 ביטים.\n   *   VPN (Virtual Page Number): כתובת וירטואלית פחות היסט = 31 - 13 = 18 ביטים.\n   *   גודל זיכרון פיזי: 128MB = 2^27 בתים, לכן כתובת פיזית היא באורך 27 ביטים.\n   *   PFN (Physical Frame Number): כתובת פיזית פחות היסט = 27 - 13 = 14 ביטים.\n\n2. **ביטים לכל רמה ולהיסט**:\n   *   כפי שחושב לעיל, ההיסט הוא 13 ביטים.\n   *   נותרו 18 ביטים עבור ה-VPN שיחולקו בין שתי רמות טבלת הדפים.\n   *   גודל דף הוא 8KB, וגודל רשומת טבלה (PTE) הוא 4 בתים.\n   *   מספר הרשומות המקסימלי שיכול להיכנס לדף אחד הוא: 8KB / 4B = 2^13 / 2^2 = 2^11 = 2048 רשומות.\n   *   לכן, כל אינדקס (עבור רמה P1 או P2) יכול להיות לכל היותר 11 ביטים (log2(2048)).\n   *   מכיוון שצריך לחלק 18 ביטים לשתי רמות (P1 + P2 = 18), וכל רמה לא יכולה להיות גדולה מ-11 ביטים, נבחר חלוקה סימטרית של 9 ביטים לכל רמה.\n   *   לכן, P1 = 9 ביטים, P2 = 9 ביטים, וההיסט = 13 ביטים.\n\n3. **דפים פיזיים לאחסון טבלת הדפים**: \n   *   תהליך המשתמש בכל הזיכרון הוירטואלי שלו משמעותו שכל 2^18 דפים וירטואליים ממופים.\n   *   **רמה ראשונה (Page Directory)**: מכילה 2^P1 רשומות. עם P1=9, יש 2^9 = 512 רשומות.\n     *   גודל ה-Page Directory הוא 512 רשומות * 4 בתים/רשומה = 2048 בתים = 2KB.\n     *   גודל זה נכנס לדף פיזי אחד (8KB), לכן נדרש 1 דף פיזי ל-Page Directory.\n   *   **רמה שנייה (Page Tables)**: כל רשומה ב-Page Directory מצביעה על טבלת דפים ברמה השנייה.\n     *   מכיוון שכל הזיכרון הוירטואלי בשימוש, כל 512 הרשומות ב-Page Directory יהיו תקפות ויצביעו על טבלת דפים ברמה השנייה.\n     *   כל טבלת דפים ברמה השנייה מכילה 2^P2 רשומות. עם P2=9, יש 2^9 = 512 רשומות.\n     *   גודל כל טבלת דפים ברמה השנייה הוא 512 רשומות * 4 בתים/רשומה = 2048 בתים = 2KB.\n     *   גודל זה נכנס לדף פיזי אחד (8KB).\n     *   מכיוון שיש 512 טבלאות דפים ברמה השנייה (אחת לכל רשומה ב-Page Directory), נדרשים 512 דפים פיזיים עבורן.\n   *   **סה\"כ דפים פיזיים**: 1 (ל-Page Directory) + 512 (לטבלאות הדפים ברמה השנייה) = 513 דפים פיזיים."
    },
    "difficulty_estimation": "Medium"
  }
}