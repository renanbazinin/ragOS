{
  "metadata": {
    "source": "ai_generated",
    "subject": "File Systems",
    "topic_hint": "File Systems",
    "requested_type": "CodeAnalysis",
    "requested_difficulty": "Easy",
    "generated_at": "2026-02-07 23:44:08",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2852,
      "output_tokens": 1090,
      "total_tokens": 6876
    }
  },
  "question": {
    "id": 101,
    "type": "CodeAnalysis",
    "topic": [
      "File Systems",
      "System Calls",
      "I/O"
    ],
    "content": {
      "text": "נתונה תוכנית ה-C הבאה המבצעת פעולות על קובץ. מה יהיה הפלט הסופי של התוכנית על המסך? יש להניח שכל קריאות המערכת מצליחות.",
      "code_snippet": "#include <stdio.h>\n#include <stdlib.h>\n#include <unistd.h>\n#include <fcntl.h>\n#include <string.h>\n\nint main() {\n    char *filename = \"my_file.txt\";\n    char write_data[] = \"ABCDEFGHIJ\"; // 10 characters\n    char read_buffer[6]; // To read up to 5 characters + null terminator\n    int fd;\n    ssize_t bytes_read;\n\n    // 1. Open file for writing, create if not exists, truncate if exists\n    fd = open(filename, O_CREAT | O_WRONLY | O_TRUNC, 0644);\n    if (fd == -1) {\n        perror(\"Error opening file for write\");\n        return 1;\n    }\n\n    // 2. Write data to the file\n    write(fd, write_data, strlen(write_data));\n    close(fd); // Close the file\n\n    // 3. Open the file for reading\n    fd = open(filename, O_RDONLY);\n    if (fd == -1) {\n        perror(\"Error opening file for read\");\n        return 1;\n    }\n\n    // 4. Seek to offset 2 from the beginning\n    lseek(fd, 2, SEEK_SET);\n\n    // 5. Read 3 bytes\n    bytes_read = read(fd, read_buffer, 3);\n    if (bytes_read == -1) {\n        perror(\"Error reading from file\");\n        return 1;\n    }\n    read_buffer[bytes_read] = '\\0'; // Null-terminate the string\n    printf(\"%s\", read_buffer);\n\n    // 6. Seek to offset 2 from the current position\n    lseek(fd, 2, SEEK_CUR);\n\n    // 7. Read 2 bytes\n    bytes_read = read(fd, read_buffer, 2);\n    if (bytes_read == -1) {\n        perror(\"Error reading from file\");\n        return 1;\n    }\n    read_buffer[bytes_read] = '\\0'; // Null-terminate the string\n    printf(\"%s\", read_buffer);\n\n    close(fd);\n    unlink(filename); // Clean up the file\n    return 0;\n}"
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "התוכנית יוצרת קובץ בשם 'my_file.txt' וכותבת אליו את המחרוזת 'ABCDEFGHIJ'. לאחר מכן, היא פותחת את הקובץ לקריאה.\nהקריאה הראשונה:\n- הפקודה `lseek(fd, 2, SEEK_SET)` מזיזה את מצביע הקובץ למיקום 2 מההתחלה (התו השלישי, 'C').\n- הפקודה `read(fd, read_buffer, 3)` קוראת 3 בתים מהמיקום הנוכחי, כלומר 'C', 'D', 'E'. הפלט הראשון יהיה \"CDE\". מצביע הקובץ מתקדם למיקום 5.\nהקריאה השנייה:\n- הפקודה `lseek(fd, 2, SEEK_CUR)` מזיזה את מצביע הקובץ 2 בתים קדימה מהמיקום הנוכחי (שהוא 5). לכן, המצביע יעבור למיקום 5 + 2 = 7 (התו השמיני, 'H').\n- הפקודה `read(fd, read_buffer, 2)` קוראת 2 בתים מהמיקום הנוכחי, כלומר 'H', 'I'. הפלט השני יהיה \"HI\".\nהפלט הסופי המודפס למסך הוא שילוב של שתי ההדפסות: \"CDEHI\"."
    },
    "difficulty_estimation": "Easy"
  }
}