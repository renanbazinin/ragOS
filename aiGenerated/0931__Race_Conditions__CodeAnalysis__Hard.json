{
  "metadata": {
    "source": "ai_generated",
    "subject": "Concurrency",
    "topic_hint": "Race Conditions",
    "requested_type": "CodeAnalysis",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-08 01:24:50",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 5728,
      "output_tokens": 2561,
      "total_tokens": 26989
    }
  },
  "question": {
    "id": 1,
    "type": "CodeAnalysis",
    "topic": [
      "Race Conditions",
      "Concurrency",
      "Threads"
    ],
    "content": {
      "text": "נתונה תוכנית C בה שני חוטים (threads) מריצים במקביל פונקציות שונות, תוך גישה למשתנים גלובליים משותפים `a` ו-`b`, המאותחלים שניהם ל-0. ניתן להניח שכל שורת קוד מתבצעת באופן אטומי. יש לפרט את כל זוגות הערכים האפשריים עבור המשתנים `a, b` אשר יכולים להתקבל לאחר ששני החוטים מסיימים את ריצתם. לכל זוג ערכים יש להסביר בקצרה תזמון ריצה אחד המוביל אליו.",
      "code_snippet": "int a = 0;\nint b = 0;\n\nvoid* thread1_func(void* arg) {\n    a = 1;\n    b = b + a;\n    a = a + 1;\n    return NULL;\n}\n\nvoid* thread2_func(void* arg) {\n    b = 1;\n    a = a + b;\n    b = b + 1;\n    return NULL;\n}\n"
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "הערכים ההתחלתיים: a=0, b=0\nפעולות חוט 1 (T1): T1_1: a = 1; T1_2: b = b + a; T1_3: a = a + 1;\nפעולות חוט 2 (T2): T2_1: b = 1; T2_2: a = a + b; T2_3: b = b + 1;\n\nלהלן כל זוגות הערכים האפשריים עבור המשתנים a, b לאחר סיום ריצת שני החוטים, בצירוף דוגמה לתזמון ריצה המוביל לכל זוג:\n\n1.  **(3, 2)**: תזמון: T1_1, T1_2, T1_3, T2_1, T2_2, T2_3\n    - T1_1 (a=1): (a=1, b=0)\n    - T1_2 (b=b+a): (a=1, b=1)\n    - T1_3 (a=a+1): (a=2, b=1)\n    - T2_1 (b=1): (a=2, b=1)\n    - T2_2 (a=a+b): (a=3, b=1)\n    - T2_3 (b=b+1): (a=3, b=2)\n\n2.  **(2, 3)**: תזמון: T2_1, T2_2, T2_3, T1_1, T1_2, T1_3\n    - T2_1 (b=1): (a=0, b=1)\n    - T2_2 (a=a+b): (a=1, b=1)\n    - T2_3 (b=b+1): (a=1, b=2)\n    - T1_1 (a=1): (a=1, b=2)\n    - T1_2 (b=b+a): (a=1, b=3)\n    - T1_3 (a=a+1): (a=2, b=3)\n\n3.  **(4, 3)**: תזמון: T1_1, T2_1, T1_2, T2_2, T1_3, T2_3\n    - T1_1 (a=1): (a=1, b=0)\n    - T2_1 (b=1): (a=1, b=1)\n    - T1_2 (b=b+a): (a=1, b=2)\n    - T2_2 (a=a+b): (a=3, b=2)\n    - T1_3 (a=a+1): (a=4, b=2)\n    - T2_3 (b=b+1): (a=4, b=3)\n\n4.  **(3, 4)**: תזמון: T2_1, T1_1, T2_2, T1_2, T2_3, T1_3\n    - T2_1 (b=1): (a=0, b=1)\n    - T1_1 (a=1): (a=1, b=1)\n    - T2_2 (a=a+b): (a=2, b=1)\n    - T1_2 (b=b+a): (a=2, b=3)\n    - T2_3 (b=b+1): (a=2, b=4)\n    - T1_3 (a=a+1): (a=3, b=4)\n\n5.  **(5, 3)**: תזמון: T1_1, T2_1, T2_3, T1_2, T2_2, T1_3\n    - T1_1 (a=1): (a=1, b=0)\n    - T2_1 (b=1): (a=1, b=1)\n    - T2_3 (b=b+1): (a=1, b=2)\n    - T1_2 (b=b+a): (a=1, b=3)\n    - T2_2 (a=a+b): (a=4, b=3)\n    - T1_3 (a=a+1): (a=5, b=3)\n\n6.  **(3, 5)**: תזמון: T2_1, T1_1, T1_3, T2_2, T1_2, T2_3\n    - T2_1 (b=1): (a=0, b=1)\n    - T1_1 (a=1): (a=1, b=1)\n    - T1_3 (a=a+1): (a=2, b=1)\n    - T2_2 (a=a+b): (a=3, b=1)\n    - T1_2 (b=b+a): (a=3, b=4)\n    - T2_3 (b=b+1): (a=3, b=5)\n\n7.  **(6, 4)**: תזמון: T1_1, T1_3, T2_1, T2_3, T1_2, T2_2\n    - T1_1 (a=1): (a=1, b=0)\n    - T1_3 (a=a+1): (a=2, b=0)\n    - T2_1 (b=1): (a=2, b=1)\n    - T2_3 (b=b+1): (a=2, b=2)\n    - T1_2 (b=b+a): (a=2, b=4)\n    - T2_2 (a=a+b): (a=6, b=4)\n\n8.  **(4, 6)**: תזמון: T2_1, T2_3, T1_1, T1_3, T2_2, T1_2\n    - T2_1 (b=1): (a=0, b=1)\n    - T2_3 (b=b+1): (a=0, b=2)\n    - T1_1 (a=1): (a=1, b=2)\n    - T1_3 (a=a+1): (a=2, b=2)\n    - T2_2 (a=a+b): (a=4, b=2)\n    - T1_2 (b=b+a): (a=4, b=6)\n\n9.  **(5, 4)**: תזמון: T1_1, T1_3, T2_1, T1_2, T2_2, T2_3\n    - T1_1 (a=1): (a=1, b=0)\n    - T1_3 (a=a+1): (a=2, b=0)\n    - T2_1 (b=1): (a=2, b=1)\n    - T1_2 (b=b+a): (a=2, b=3)\n    - T2_2 (a=a+b): (a=5, b=3)\n    - T2_3 (b=b+1): (a=5, b=4)\n\n10. **(4, 5)**: תזמון: T2_1, T2_3, T1_1, T2_2, T1_2, T1_3\n    - T2_1 (b=1): (a=0, b=1)\n    - T2_3 (b=b+1): (a=0, b=2)\n    - T1_1 (a=1): (a=1, b=2)\n    - T2_2 (a=a+b): (a=3, b=2)\n    - T1_2 (b=b+a): (a=3, b=5)\n    - T1_3 (a=a+1): (a=4, b=5)\n\n11. **(2, 2)**: תזמון: T2_2, T1_1, T1_2, T1_3, T2_1, T2_3\n    - T2_2 (a=a+b): (a=0, b=0)  (a ו-b שניהם 0 לפני פעולה זו)\n    - T1_1 (a=1): (a=1, b=0)\n    - T1_2 (b=b+a): (a=1, b=1)\n    - T1_3 (a=a+1): (a=2, b=1)\n    - T2_1 (b=1): (a=2, b=1)\n    - T2_3 (b=b+1): (a=2, b=2)"
    },
    "difficulty_estimation": "Hard"
  }
}