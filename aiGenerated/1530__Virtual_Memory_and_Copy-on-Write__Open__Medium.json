{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Virtual Memory and Copy-on-Write",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-08 11:11:14",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2412,
      "output_tokens": 1136,
      "total_tokens": 7482
    }
  },
  "question": {
    "id": 101,
    "type": "Open",
    "topic": [
      "Virtual Memory",
      "Copy-on-Write",
      "Memory Management"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה התומכת במנגנון Copy-on-Write (CoW). גודל הדף במערכת הוא 4KB. תהליך אב (parent process) מקצה בלוק זיכרון בגודל 400KB (כלומר 100 דפים) ומאתחל את כולו בערכים מסוימים. לאחר מכן, הוא מבצע קריאת מערכת `fork()` ליצירת תהליך בן (child process).\nמיד לאחר ה-fork, גם תהליך האב וגם תהליך הבן מבצעים פעולות קריאה על כל 100 הדפים שהוקצו. לאחר מכן, תהליך האב כותב לדף ה-51 של הבלוק, ותהליך הבן כותב לדף ה-52 של הבלוק.\n\nא. כמה דפי זיכרון פיזיים נצרכים עבור בלוק הזיכרון לאחר ההקצאה והאתחול על ידי תהליך האב, ולפני קריאת ה-`fork()`?\nב. כמה דפי זיכרון פיזיים נצרכים עבור בלוק הזיכרון מיד לאחר קריאת ה-`fork()`?\nג. כמה דפי זיכרון פיזיים נצרכים עבור בלוק הזיכרון לאחר ששני התהליכים (האב והבן) סיימו את כל פעולות הכתיבה והקריאה המתוארות?",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "הסבר:\nא. לפני ה-`fork()`: תהליך האב מקצה 100 דפים ומאתחל את כולם. פעולה זו גורמת לכל 100 הדפים להיכתב לזיכרון הפיזי. לכן, נדרשים 100 דפי זיכרון פיזיים.\n\nב. מיד לאחר ה-`fork()`: בזכות מנגנון ה-Copy-on-Write, תהליך הבן מקבל העתק לוגי של מרחב הכתובות של האב, אך בפועל, דפי הזיכרון הפיזיים אינם משוכפלים מיד. גם האב וגם הבן מצביעים לאותם 100 דפים פיזיים. טבלאות הדפים שלהם יצביעו על אותן מסגרות פיזיות, כאשר הדפים מסומנים כ-read-only. פעולות הקריאה של האב והבן אינן משנות את המצב הזה או גורמות לשכפול. לכן, עדיין נצרכים 100 דפי זיכרון פיזיים בלבד עבור הנתונים.\n\nג. לאחר פעולות הכתיבה:\n1.  כאשר תהליך האב כותב לדף ה-51: מנגנון ה-CoW מזהה ניסיון כתיבה לדף המשותף. המערכת יוצרת עותק חדש של דף 51 עבור תהליך האב ומעתיקה אליו את התוכן המקורי. טבלת הדפים של האב מתעדכנת להצביע על העותק החדש. דף 51 המקורי נשאר בזיכרון הפיזי ומופנה כעת רק מתהליך הבן. מצב זה מוסיף דף פיזי אחד. כעת יש 100 (דפים מקוריים) + 1 (עותק של דף 51 לאב) = 101 דפים פיזיים.\n2.  כאשר תהליך הבן כותב לדף ה-52: מתרחש תהליך דומה. המערכת יוצרת עותק חדש של דף 52 עבור תהליך הבן. טבלת הדפים של הבן מתעדכנת להצביע על העותק החדש. דף 52 המקורי נשאר בזיכרון הפיזי ומופנה כעת רק מתהליך האב. מצב זה מוסיף דף פיזי נוסף. כעת יש 101 (דפים מהשלב הקודם) + 1 (עותק של דף 52 לבן) = 102 דפים פיזיים.\n\nלסיכום, בסוף התהליך נצרכים 102 דפי זיכרון פיזיים עבור הנתונים בבלוק הזיכרון."
    },
    "difficulty_estimation": "Medium"
  }
}