{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Copy-on-Write",
    "requested_type": "Open",
    "requested_difficulty": "Easy",
    "generated_at": "2026-02-08 08:55:20",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 4669,
      "output_tokens": 980,
      "total_tokens": 7786
    }
  },
  "question": {
    "id": 1,
    "type": "Open",
    "topic": [
      "Copy-on-Write",
      "File Systems",
      "Memory Management"
    ],
    "content": {
      "text": "הסבר את הרעיון של Copy-on-Write (CoW) במערכות קבצים. תאר מה מתרחש ברמת בלוקי הנתונים ומונה ההפניות (reference count) כאשר מתבצעות הפעולות הבאות:\n1. משתמש מעתיק קובץ גדול בשם `fileA` לקובץ חדש בשם `fileB`.\n2. לאחר מכן, המשתמש משנה חלק קטן מהקובץ `fileB`.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "Copy-on-Write (CoW) הוא מנגנון אופטימיזציה המאפשר למספר ישויות לשתף משאב (כמו בלוק נתונים בזיכרון או בדיסק) עד שאחת מהן מנסה לשנות אותו. רק אז נוצר עותק של המשאב עבור הישות המבצעת את השינוי, בעוד שהאחרות ממשיכות להשתמש במשאב המקורי. המנגנון חוסך במשאבים (זיכרון/דיסק) ובזמן עיבוד.\n\n1.  **העתקת `fileA` ל-`fileB`:**\n    *   **מה מתרחש:** במערכת קבצים המשתמשת ב-CoW, כאשר קובץ `fileA` מועתק ל-`fileB`, אין שכפול פיזי של בלוקי הנתונים של `fileA` אל `fileB`. במקום זאת, מערכת הקבצים יוצרת inode חדש עבור `fileB`. ה-inode של `fileB` יצביע לאותם בלוקי נתונים אליהם מצביע ה-inode של `fileA`.\n    *   **מונה הפניות (Reference Count):** עבור כל בלוק נתונים שמשותף כעת בין `fileA` ל-`fileB`, מונה ההפניות שלו יוגדל באחד. מונה זה עוקב אחר כמה inodes מצביעים לבלוק נתונים מסוים.\n\n2.  **שינוי חלק קטן בקובץ `fileB`:**\n    *   **מה מתרחש:** כאשר משתמש משנה חלק קטן ב-`fileB`, מערכת הקבצים מזהה שבלוק הנתונים הספציפי שאליו נכתב השינוי הוא בלוק משותף (כלומר, מונה ההפניות שלו גדול מ-1). במקרה זה, מערכת הקבצים מבצעת את הפעולות הבאות:\n        *   מקצה בלוק נתונים חדש לחלוטין.\n        *   מעתיקה את התוכן של הבלוק המקורי (המשותף) אל הבלוק החדש.\n        *   כותבת את השינוי (החלק הקטן) לתוך הבלוק החדש.\n        *   מעדכנת את המצביע ב-inode של `fileB` כך שיצביע כעת אל הבלוק החדש (העותק).\n    *   **מונה הפניות (Reference Count):**\n        *   מונה ההפניות של הבלוק המקורי (המשותף) שהועתק יקטן באחד.\n        *   מונה ההפניות של הבלוק החדש שנוצר יהיה 1.\n\n**היתרון:** היתרון העיקרי של CoW במקרה זה הוא חיסכון משמעותי במקום בדיסק ובזמן העתקה. במקום לשכפל את כל הנתונים של קובץ גדול בעת העתקתו, משתפים את הנתונים, ורק כאשר מתבצע שינוי בפועל, משוכפל רק הבלוק הספציפי שצריך להשתנות."
    },
    "difficulty_estimation": "Easy"
  }
}