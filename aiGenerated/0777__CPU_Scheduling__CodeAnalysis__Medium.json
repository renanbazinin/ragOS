{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "CPU Scheduling",
    "requested_type": "CodeAnalysis",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-08 00:17:33",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2670,
      "output_tokens": 1944,
      "total_tokens": 11139
    }
  },
  "question": {
    "id": 8,
    "type": "CodeAnalysis",
    "topic": [
      "CPU Scheduling",
      "Threads",
      "Concurrency"
    ],
    "content": {
      "text": "נתונה התוכנית הבאה המשתמשת בחוטים (threads).\nהניחו כי המערכת משתמשת במתזמן (CPU Scheduler) מסוג Round Robin עם קוונטום זמן של 3 יחידות עבודה.\nכל קריאת `printf` בתוכנית מייצגת יחידת עבודה אחת, אלא אם צוין אחרת, ואינה גורמת לחסימה ארוכה.\nזמן יצירת החוטים והכנסתם לתור המוכנים (Ready Queue) הוא כדלקמן:\n- חוט T1 נוצר ראשון. כל איטרציה בלולאה שלו (כולל ה-printf) דורשת יחידת עבודה אחת. סה\"כ 5 איטרציות.\n- חוט T2 נוצר שני. כל איטרציה בלולאה שלו (כולל ה-printf) דורשת 2 יחידות עבודה. סה\"כ 3 איטרציות.\n- חוט T3 נוצר שלישי. כל איטרציה בלולאה שלו (כולל ה-printf) דורשת יחידת עבודה אחת. סה\"כ 4 איטרציות.\nהניחו כי אין תקורה (overhead) למעבר הקשר (context switch).\nכתבו את הפלט המדויק של התוכנית.",
      "code_snippet": "#include <stdio.h>\n#include <pthread.h>\n\nvoid* thread_func_T1(void* arg) {\n    for (int i = 0; i < 5; ++i) {\n        printf(\"T1: %d\\n\", i + 1);\n        // סימולציה של יחידת עבודה אחת\n    }\n    return NULL;\n}\n\nvoid* thread_func_T2(void* arg) {\n    for (int i = 0; i < 3; ++i) {\n        printf(\"T2: %d\\n\", i + 1);\n        // סימולציה של 2 יחידות עבודה\n    }\n    return NULL;\n}\n\nvoid* thread_func_T3(void* arg) {\n    for (int i = 0; i < 4; ++i) {\n        printf(\"T3: %d\\n\", i + 1);\n        // סימולציה של יחידת עבודה אחת\n    }\n    return NULL;\n}\n\nint main() {\n    pthread_t tid[3];\n\n    // יצירת חוטים. נניח שהם נכנסים לתור המוכנים בסדר זה: T1, T2, T3\n    pthread_create(&tid[0], NULL, thread_func_T1, NULL);\n    pthread_create(&tid[1], NULL, thread_func_T2, NULL);\n    pthread_create(&tid[2], NULL, thread_func_T3, NULL);\n\n    pthread_join(tid[0], NULL);\n    pthread_join(tid[1], NULL);\n    pthread_join(tid[2], NULL);\n\n    return 0;\n}",
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "הפתרון מבוסס על מעקב אחר ביצוע החוטים לפי מתזמן Round Robin עם קוונטום של 3 יחידות עבודה. סדר הכניסה לתור המוכנים הוא T1, T2, T3.\n\n*   **שלב 1 (זמן 0):** T1 מקבל את המעבד.\n    *   T1 מבצע איטרציה 1 (1 יחידה) - מדפיס \"T1: 1\".\n    *   T1 מבצע איטרציה 2 (1 יחידה) - מדפיס \"T1: 2\".\n    *   T1 מבצע איטרציה 3 (1 יחידה) - מדפיס \"T1: 3\".\n    *   קוונטום T1 נגמר (3 יחידות). T1 עובר לסוף תור המוכנים. תור: [T2, T3, T1].\n\n*   **שלב 2 (זמן 3):** T2 מקבל את המעבד.\n    *   T2 מבצע איטרציה 1 (2 יחידות) - מדפיס \"T2: 1\".\n    *   T2 השתמש ב-2 יחידות מתוך הקוונטום שלו. נותרה לו יחידה אחת בקוונטום הנוכחי.\n    *   קוונטום T2 נגמר (3 יחידות). T2 עובר לסוף תור המוכנים. תור: [T3, T1, T2].\n\n*   **שלב 3 (זמן 6):** T3 מקבל את המעבד.\n    *   T3 מבצע איטרציה 1 (1 יחידה) - מדפיס \"T3: 1\".\n    *   T3 מבצע איטרציה 2 (1 יחידה) - מדפיס \"T3: 2\".\n    *   T3 מבצע איטרציה 3 (1 יחידה) - מדפיס \"T3: 3\".\n    *   קוונטום T3 נגמר (3 יחידות). T3 עובר לסוף תור המוכנים. תור: [T1, T2, T3].\n\n*   **שלב 4 (זמן 9):** T1 מקבל את המעבד.\n    *   T1 מבצע איטרציה 4 (1 יחידה) - מדפיס \"T1: 4\".\n    *   T1 מבצע איטרציה 5 (1 יחידה) - מדפיס \"T1: 5\".\n    *   T1 מסיים את עבודתו (סה\"כ 2 יחידות בקוונטום זה). T1 יוצא מהמערכת. תור: [T2, T3].\n\n*   **שלב 5 (זמן 11):** T2 מקבל את המעבד.\n    *   T2 מבצע איטרציה 2 (2 יחידות) - מדפיס \"T2: 2\".\n    *   T2 השתמש ב-2 יחידות מתוך הקוונטום שלו. נותרה לו יחידה אחת בקוונטום הנוכחי.\n    *   קוונטום T2 נגמר (3 יחידות). T2 עובר לסוף תור המוכנים. תור: [T3, T2].\n\n*   **שלב 6 (זמן 14):** T3 מקבל את המעבד.\n    *   T3 מבצע איטרציה 4 (1 יחידה) - מדפיס \"T3: 4\".\n    *   T3 מסיים את עבודתו (סה\"כ 1 יחידה בקוונטום זה). T3 יוצא מהמערכת. תור: [T2].\n\n*   **שלב 7 (זמן 15):** T2 מקבל את המעבד.\n    *   T2 מבצע איטרציה 3 (2 יחידות) - מדפיס \"T2: 3\".\n    *   T2 מסיים את עבודתו (סה\"כ 2 יחידות בקוונטום זה). T2 יוצא מהמערכת. תור: [].\n\n**פלט סופי:**\nT1: 1\nT1: 2\nT1: 3\nT2: 1\nT3: 1\nT3: 2\nT3: 3\nT1: 4\nT1: 5\nT2: 2\nT3: 4\nT2: 3"
    },
    "difficulty_estimation": "Medium"
  }
}