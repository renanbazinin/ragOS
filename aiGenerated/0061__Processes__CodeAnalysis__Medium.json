{
  "metadata": {
    "source": "ai_generated",
    "topic_hint": "Processes",
    "requested_type": "CodeAnalysis",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 18:27:20",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2231,
      "output_tokens": 728,
      "total_tokens": 5773
    },
    "subject": "Virtualization"
  },
  "question": {
    "id": 10,
    "type": "CodeAnalysis",
    "topic": [
      "Processes",
      "System Calls"
    ],
    "content": {
      "text": "נתון קטע הקוד הבא בשפת C. הניחו כי כל קריאות המערכת מצליחות, וכי הפלט מודפס ישירות למסך ללא שימוש ב-buffer פנימי. מה יהיו הערכים המודפסים על המסך בסיום ריצת התוכנית (הסדר אינו מחייב)?",
      "code_snippet": "int main() {\n    int x = 0;\n    for (int i = 0; i < 2; i++) {\n        if (fork() == 0) {\n            x += 2;\n        } else {\n            x += 1;\n            wait(NULL);\n        }\n    }\n    printf(\"%d \", x);\n    return 0;\n}",
      "options": [
        "א. 2 3 3 4",
        "ב. 1 2 3 4",
        "ג. 2 2 4 4",
        "ד. 0 1 2 3",
        "ה. אף אחת מהתשובות אינה נכונה"
      ]
    },
    "sub_questions": null,
    "points": 10,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "א",
      "explanation": "נעקוב אחר פיצול התהליכים וערך המשתנה x (הנמצא במרחב הכתובות הנפרד של כל תהליך):\n1. התהליך המקורי (P0) מתחיל עם x=0.\n2. איטרציה ראשונה (i=0): P0 מבצע fork. נוצר בן P1. בבן (P1) התנאי מתקיים ו-x גדל ל-2. באב (P0) התנאי לא מתקיים, x גדל ל-1 והוא ממתין לבנו.\n3. איטרציה שנייה (i=1):\n   - תהליך P1 (שבו x=2) מבצע fork ויוצר את P3. ב-P3 (הבן החדש) x=2+2=4. ב-P1 (האב של P3) x=2+1=3.\n   - לאחר ש-P1 מסיים, P0 ממשיך לאיטרציה השנייה שלו. P0 (שבו x=1) מבצע fork ויוצר את P2. ב-P2 (הבן החדש) x=1+2=3. ב-P0 (האב) x=1+1=2.\n4. בסיום, כל ארבעת התהליכים שנוצרו (P0, P1, P2, P3) מדפיסים את ערך ה-x שלהם: 2, 3, 3, 4."
    },
    "difficulty_estimation": "Medium"
  }
}