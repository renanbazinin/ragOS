{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Virtual Memory and Paging",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-08 20:50:33",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2075,
      "output_tokens": 1450,
      "total_tokens": 5472
    }
  },
  "question": {
    "id": 1,
    "type": "Open",
    "topic": [
      "Virtual Memory",
      "Paging",
      "Memory Management",
      "Multi-level Page Tables"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה התומכת בזיכרון וירטואלי עם טבלת דפים היררכית בעלת שתי רמות (two-level page table).\n\nפרמטרי המערכת הם:\n*   גודל זיכרון פיזי: 256MB\n*   גודל דף: 4KB\n*   גודל כניסה בטבלת הדפים (PTE): 4 בתים\n\nענה על השאלות הבאות:\n1.  מהו גודל ה-PFN (Physical Frame Number) בביטים?\n2.  כמה ביטים מוקצים לכל אינדקס בטבלת הדפים (לכל רמה)?\n3.  מהו גודל הכתובת הווירטואלית המקסימלי במערכת זו (בביטים)?\n4.  מהו גודל הזיכרון הווירטואלי המקסימלי שתהליך יכול לגשת אליו (ב-GB)?\n5.  נניח שתהליך מסוים משתמש ב-100MB זיכרון וירטואלי רציף (החל מכתובת 0) וכל הדפים שלו נמצאים בזיכרון פיזי. כמה זיכרון פיזי תופסות טבלאות הדפים עבור תהליך זה?",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "1.  **גודל ה-PFN:**\n    *   זיכרון פיזי: 256MB = 2^28 בתים.\n    *   גודל דף: 4KB = 2^12 בתים.\n    *   מספר מסגרות פיזיות: 2^28 / 2^12 = 2^16 מסגרות.\n    *   לכן, גודל ה-PFN הוא log2(2^16) = 16 ביטים.\n\n2.  **ביטים לכל אינדקס בטבלת הדפים:**\n    *   מספר כניסות לדף טבלה: גודל דף / גודל PTE = 4KB / 4 בתים = 1024 כניסות.\n    *   לכן, כל אינדקס בטבלת הדפים (לכל רמה) מקבל log2(1024) = 10 ביטים.\n\n3.  **גודל הכתובת הווירטואלית המקסימלי:**\n    *   גודל היסט הדף (Page Offset): log2(4KB) = 12 ביטים.\n    *   כתובת וירטואלית מורכבת מאינדקס רמה 1 + אינדקס רמה 2 + היסט.\n    *   סה\"כ ביטים לכתובת וירטואלית: 10 (רמה 1) + 10 (רמה 2) + 12 (היסט) = 32 ביטים.\n\n4.  **גודל הזיכרון הווירטואלי המקסימלי:**\n    *   מכיוון שגודל הכתובת הווירטואלית הוא 32 ביטים, הזיכרון הווירטואלי המקסימלי הוא 2^32 בתים = 4GB.\n\n5.  **זיכרון פיזי לטבלאות הדפים עבור תהליך המשתמש ב-100MB:**\n    *   התהליך משתמש ב-100MB זיכרון וירטואלי.\n    *   מספר הדפים שהתהליך משתמש בהם: 100MB / 4KB = (100 * 2^20) / 2^12 = 100 * 2^8 = 100 * 256 = 25,600 דפים.\n    *   **טבלאות דפים רמה 2:**\n        *   כל טבלת דפים ברמה 2 מכילה 1024 כניסות (PTEs), וממפה 1024 דפים וירטואליים.\n        *   מספר טבלאות רמה 2 הנדרשות: ceil(25,600 דפים / 1024 כניסות לדף טבלה) = ceil(25) = 25 טבלאות רמה 2.\n        *   כל טבלת רמה 2 תופסת דף פיזי אחד (4KB).\n        *   סה\"כ זיכרון לטבלאות רמה 2: 25 * 4KB = 100KB.\n    *   **טבלת דפים רמה 1:**\n        *   טבלת רמה 1 ממפה את טבלאות רמה 2. מכיוון שנדרשו 25 טבלאות רמה 2, טבלת רמה 1 צריכה לפחות 25 כניסות.\n        *   טבלת רמה 1 אחת (שגם היא תופסת דף פיזי אחד של 4KB) מספיקה, שכן היא יכולה להכיל 1024 כניסות.\n        *   סה\"כ זיכרון לטבלת רמה 1: 1 * 4KB = 4KB.\n    *   **סה\"כ זיכרון פיזי לטבלאות הדפים:** 100KB (לרמה 2) + 4KB (לרמה 1) = 104KB."
    },
    "difficulty_estimation": "Medium"
  }
}