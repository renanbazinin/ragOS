{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Memory Management",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-07 21:49:15",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 969,
      "output_tokens": 1067,
      "total_tokens": 5488
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "topic": [
      "Memory Management",
      "Virtual Memory",
      "Paging",
      "TLB"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה המשתמשת בזיכרון וירטואלי עם כתובות וירטואליות בגודל 48 ביטים. גודל דף הוא 4KB. טבלת הדפים בנויה ב-4 רמות (multi-level page table), כאשר כל רמת טבלה יכולה להכיל 512 כניסות. גודל כניסה בטבלת דפים (PTE) הוא 8 בתים. בנוסף, קיימת יחידת TLB (Translation Lookaside Buffer) עם שיעור פגיעה (hit rate) של 99%. כמה גישות זיכרון RAM בממוצע נדרשות עבור תרגום כתובת וירטואלית אחת וגישה לנתונים בכתובת זו?",
      "code_snippet": null,
      "options": [
        "א. 1.01",
        "ב. 1.04",
        "ג. 1.05",
        "ד. 1.08",
        "ה. 1.12"
      ]
    },
    "sub_questions": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ב",
      "explanation": "הסבר:\nכתובת וירטואלית בגודל 48 ביטים.\nגודל דף 4KB = 2^12 בתים. לכן, 12 ביטים מוקצים ל-offset בתוך הדף.\nמספר הביטים לכתובת דף וירטואלי (VPN) הוא 48 - 12 = 36 ביטים.\nטבלת הדפים בנויה ב-4 רמות, כאשר כל רמה מכילה 512 כניסות. מכיוון ש-512 = 2^9, כל אינדקס ברמת טבלה דורש 9 ביטים.\nבסך הכל, 4 רמות דורשות 4 * 9 = 36 ביטים, מה שמתאים בדיוק לגודל ה-VPN.\n\nחישוב גישות זיכרון:\n1.  **במקרה של פגיעה ב-TLB (TLB Hit Rate = 99%)**:\n    הכתובת הפיזית נמצאת ב-TLB. נדרשת גישת זיכרון אחת בלבד ל-RAM כדי לגשת לנתונים בכתובת הפיזית.\n    מספר גישות זיכרון = 1.\n\n2.  **במקרה של החטאה ב-TLB (TLB Miss Rate = 1 - 0.99 = 1%)**:\n    ה-TLB לא מכיל את הכתובת. יש לבצע מהלך טבלת דפים (page table walk) כדי למצוא את הכתובת הפיזית:\n    -   גישת זיכרון אחת לטבלת הדפים ברמה 1 (P1).\n    -   גישת זיכרון אחת לטבלת הדפים ברמה 2 (P2).\n    -   גישת זיכרון אחת לטבלת הדפים ברמה 3 (P3).\n    -   גישת זיכרון אחת לטבלת הדפים ברמה 4 (P4), אשר מכילה את מספר המסגרת הפיזית (PFN).\n    -   סה\"כ 4 גישות זיכרון עבור תרגום הכתובת.\n    -   לאחר מכן, יש גישת זיכרון אחת ל-RAM כדי לגשת לנתונים.\n    -   סה\"כ גישות זיכרון = 4 (לטבלאות דפים) + 1 (לנתונים) = 5 גישות זיכרון.\n\nחישוב ממוצע גישות זיכרון:\nממוצע גישות = (שיעור פגיעה * גישות בפגיעה) + (שיעור החטאה * גישות בהחטאה)\nממוצע גישות = (0.99 * 1) + (0.01 * 5)\nממוצע גישות = 0.99 + 0.05\nממוצע גישות = 1.04\n\nלכן, התשובה הנכונה היא ב'."
    },
    "difficulty_estimation": "Hard"
  }
}