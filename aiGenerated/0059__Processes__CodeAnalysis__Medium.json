{
  "metadata": {
    "source": "ai_generated",
    "topic_hint": "Processes",
    "requested_type": "CodeAnalysis",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 18:26:24",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2231,
      "output_tokens": 690,
      "total_tokens": 6916
    },
    "subject": "Virtualization"
  },
  "question": {
    "id": 7,
    "type": "CodeAnalysis",
    "topic": [
      "Processes",
      "System Calls",
      "Memory Management"
    ],
    "content": {
      "text": "נתונה התוכנית הבאה בשפת C. הניחו שכל קריאות המערכת מצליחות, שהתהליכים רצים לפי סדר הקריאה ל-wait, ושהפלט מודפס למסך ללא השהיה (buffering). מה יהיה הפלט של התוכנית?",
      "code_snippet": "#include <stdio.h>\n#include <unistd.h>\n#include <sys/wait.h>\n\nint x = 10;\n\nint main() {\n    for (int i = 0; i < 2; i++) {\n        if (fork() == 0) {\n            x += 5;\n            printf(\"%d \", x);\n            return 0;\n        } else {\n            wait(NULL);\n            x += 2;\n        }\n    }\n    printf(\"%d\", x);\n    return 0;\n}",
      "options": [
        "א. 15 15 10",
        "ב. 15 17 14",
        "ג. 15 22 24",
        "ד. 15 17 12",
        "ה. אף אחת מהתשובות אינה נכונה"
      ]
    },
    "sub_questions": null,
    "points": 5,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ב",
      "explanation": "באיטרציה הראשונה (i=0), האב יוצר בן. הבן מקבל עותק של x=10, מבצע x += 5 ומדפיס 15. האב ממתין לסיום הבן (wait) ואז מבצע x += 2, כך שערך x אצלו הופך ל-12. באיטרציה השנייה (i=1), האב יוצר בן נוסף. הבן השני יורש את ערך ה-x הנוכחי של האב (12), מבצע x += 5 ומדפיס 17. האב שוב ממתין ואז מבצע x += 2, כך שערך x אצלו הופך ל-14. בסיום הלולאה, האב מדפיס את ערך ה-x שלו (14). מכיוון שכל תהליך מקבל עותק נפרד של הזיכרון (Copy-on-Write), השינויים של הבנים לא משפיעים על האב ולהיפך, מלבד הירושה ברגע ה-fork. לכן הפלט הכולל הוא 15 17 14."
    },
    "difficulty_estimation": "Medium"
  }
}