{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Copy-on-Write",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-08 08:52:00",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1142,
      "output_tokens": 845,
      "total_tokens": 4121
    }
  },
  "question": {
    "id": 101,
    "type": "MultipleChoice",
    "topic": [
      "Copy-on-Write",
      "Virtual Memory",
      "Processes",
      "System Calls"
    ],
    "content": {
      "text": "נתון תהליך אב (parent) ותהליך בן (child) שנוצר באמצעות קריאת המערכת `fork()`. מערכת ההפעלה מטמיעה מנגנון Copy-on-Write (CoW) לניהול זיכרון. איזו טענה נכונה ביותר לגבי גישה לדף זיכרון ששותף במקור בין שני התהליכים לאחר ה-`fork()`?",
      "code_snippet": null,
      "options": [
        "א. פעולת קריאה (read) לדף זיכרון משותף תמיד תגרום ל-page fault ולשכפול הדף.",
        "ב. פעולת כתיבה (write) לדף זיכרון משותף תמיד תגרום לשכפול הדף, גם אם הדף כבר שוכפל בעבר על ידי אחד התהליכים.",
        "ג. כאשר תהליך הבן מנסה לכתוב לדף זיכרון ששותף במקור ומוגן לכתיבה (write-protected), תתרחש page fault, הדף ישוכפל, והכתיבה תתבצע על העותק החדש.",
        "ד. מנגנון CoW חל רק על אזור ה-data של התהליך ואינו חל על אזור ה-stack או ה-heap."
      ]
    },
    "sub_questions": null,
    "points": 5,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ג",
      "explanation": "הסבר: מנגנון Copy-on-Write (CoW) נועד לייעל את יצירת תהליכים חדשים (לרוב דרך `fork()`) על ידי דחיית שכפול דפי זיכרון עד לרגע שבו אחד התהליכים (האב או הבן) מנסה לכתוב לדף מסוים. לאחר קריאת `fork()`, דפי הזיכרון הניתנים לכתיבה של תהליך האב משותפים עם תהליך הבן, אך מסומנים כקריאה בלבד (write-protected). כאשר אחד התהליכים מנסה לכתוב לדף כזה, מתרחשת 'page fault'. מערכת ההפעלה מזהה שמדובר ב-CoW, משכפלת את הדף, מסירה את הגנת הכתיבה מהעותק החדש, ומאפשרת לתהליך לבצע את הכתיבה על העותק הפרטי שלו. רק אזור הזיכרון שבו התרחשה הכתיבה משוכפל, ולא כל הזיכרון.\n\nא. לא נכון. קריאה לדף זיכרון משותף אינה גורמת לשכפול. הדף משותף לקריאה ללא צורך בשכפול.\nב. לא נכון. שכפול הדף מתרחש רק בפעם הראשונה שאחד התהליכים מנסה לכתוב לדף משותף. לאחר מכן, הכתיבות הבאות לאותו דף (כעת פרטי) על ידי אותו תהליך אינן גורמות לשכפול נוסף.\nד. לא נכון. מנגנון CoW חל על כל אזורי הזיכרון הניתנים לכתיבה (writable segments) של התהליך, כולל ה-heap וה-stack, ולא רק על ה-data segment."
    },
    "difficulty_estimation": "Medium"
  }
}