{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Memory Management",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 21:54:21",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1964,
      "output_tokens": 1848,
      "total_tokens": 7223
    }
  },
  "question": {
    "id": 10,
    "type": "Open",
    "topic": [
      "Memory Management",
      "Virtual Memory",
      "Paging"
    ],
    "content": {
      "text": "נתונה מערכת עם זיכרון וירטואלי בגודל 2GB וזיכרון פיזי בגודל 256MB. גודל דף במערכת הוא 8KB. רשומת טבלת דפים (PTE) כוללת 3 ביטים של סטטוס (לדוגמה, Valid, Dirty, Accessed) בנוסף לביטי ה-PFN. יש לפרט ולנמק את כל החישובים.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": [
      {
        "id": "10.1",
        "text": "מהם הגדלים של ה-VPN (Virtual Page Number) וה-PFN (Physical Frame Number) בביטים?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.2",
        "text": "מה גודל רשומת טבלת דפים (PTE) בבתים, בהנחה שהיא מעוגלת לגודל מילה סטנדרטי (4 בתים)?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.3",
        "text": "מה גודל טבלת דפים לינארית (single-level) של תהליך, במידה והיא ממפה את כל הזיכרון הווירטואלי שלו?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.4",
        "text": "אם המערכת משתמשת בטבלת דפים היררכית בעלת שתי רמות, כמה ביטים משמשים לכל רמה של הכתובת הוירטואלית?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.5",
        "text": "כמה מסגרות פיזיות יתפסו על ידי טבלת הדפים (היררכית, שתי רמות) של תהליך המשתמש בכל הזיכרון הוירטואלי שהוקצה לו?",
        "code_snippet": null,
        "options": null
      }
    ],
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "1.  **חישוב גדלי VPN ו-PFN:**\n    *   גודל זיכרון וירטואלי = 2GB = 2^31 בתים. לכן, כתובת וירטואלית היא באורך 31 ביטים.\n    *   גודל זיכרון פיזי = 256MB = 2^28 בתים. לכן, כתובת פיזית היא באורך 28 ביטים.\n    *   גודל דף = 8KB = 2^13 בתים. לכן, ההיסט בתוך הדף (offset) הוא באורך 13 ביטים.\n    *   **VPN** (Virtual Page Number) = אורך כתובת וירטואלית - אורך היסט = 31 - 13 = **18 ביטים**.\n    *   **PFN** (Physical Frame Number) = אורך כתובת פיזית - אורך היסט = 28 - 13 = **15 ביטים**.\n\n2.  **גודל רשומת טבלת דפים (PTE):**\n    *   PTE מכילה PFN ועוד 3 ביטי סטטוס.\n    *   סה\"כ ביטים ל-PTE = 15 (PFN) + 3 (סטטוס) = 18 ביטים.\n    *   בהנחה שה-PTE מעוגלת לגודל מילה סטנדרטי של 4 בתים (32 ביטים) לצורך יישור ויעילות, למרות ש-18 ביטים טכנית יכולים להיכנס ב-3 בתים.\n    *   **גודל PTE = 4 בתים**.\n\n3.  **גודל טבלת דפים לינארית:**\n    *   מספר הדפים הוירטואליים הכולל שצריך למפות: 2GB / 8KB = 2^31 / 2^13 = 2^18 דפים.\n    *   גודל טבלת הדפים הלינארית = מספר דפים * גודל PTE = 2^18 * 4 בתים = 2^20 בתים = **1MB**.\n\n4.  **ביטים לכל רמה בטבלת דפים היררכית (שתי רמות):**\n    *   מספר ביטי ה-VPN הוא 18.\n    *   גודל דף הוא 8KB = 2^13 בתים.\n    *   בכל דף יכולות להיכנס: גודל דף / גודל PTE = 2^13 בתים / 4 בתים = 2^11 = 2048 רשומות.\n    *   לכן, כל רמה בטבלת הדפים יכולה למפות עד 2^11 דפים/טבלאות. כלומר, כל רמה משתמשת ב-11 ביטים לכל היותר.\n    *   מכיוון שיש לנו 18 ביטי VPN, נצטרך שתי רמות:\n        *   רמה עליונה (Page Directory): תשתמש ב-18 - 11 = **7 ביטים**.\n        *   רמה תחתונה (Page Table): תשתמש ב-**11 ביטים**.\n\n5.  **מספר מסגרות פיזיות לטבלת הדפים ההיררכית (שתי רמות):**\n    *   **רמת ה-Page Directory (PD):**\n        *   מכילה 2^7 = 128 רשומות (PTEs). \n        *   גודל ה-PD = 128 רשומות * 4 בתים/רשומה = 512 בתים.\n        *   ה-PD נכנס כולו למסגרת פיזית אחת (512 בתים < 8KB).\n        *   **1 מסגרת** עבור ה-PD.\n    *   **רמות ה-Page Tables (PTs):**\n        *   ישנם 2^7 = 128 מצביעים ב-PD. במקרה שהתהליך משתמש בכל הזיכרון הוירטואלי, כל המצביעים ב-PD תקפים, וכל אחד מצביע ל-PT נפרדת. לכן, יהיו 128 טבלאות PT.\n        *   כל PT מכילה 2^11 = 2048 רשומות.\n        *   גודל כל PT = 2048 רשומות * 4 בתים/רשומה = 8192 בתים = 8KB.\n        *   כל PT תופסת בדיוק מסגרת פיזית אחת.\n        *   סה\"כ מסגרות עבור ה-PTs = 128 PTs * 1 מסגרת/PT = **128 מסגרות**.\n    *   **סה\"כ מסגרות לטבלת הדפים = 1 (PD) + 128 (PTs) = 129 מסגרות**."
    },
    "difficulty_estimation": "Medium"
  }
}