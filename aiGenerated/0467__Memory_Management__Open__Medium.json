{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Memory Management",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 21:53:06",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1964,
      "output_tokens": 1469,
      "total_tokens": 9607
    }
  },
  "question": {
    "id": 10,
    "type": "Open",
    "topic": [
      "Memory Management",
      "Virtual Memory",
      "Paging"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה המשתמשת בזיכרון וירטואלי עם כתובות וירטואליות בגודל 2GB, וזיכרון פיזי בגודל 16GB. גודל דף הוא 8KB. טבלת הדפים היא דו-רמתית (Two-level page table), וגודל כל רשומת טבלת דפים (PTE) הוא 4 בתים. יש לפרט ולנמק את כל החישובים.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": [
      {
        "id": "10.1",
        "text": "כמה ביטים מוקצים לכל אחד מהשדות הבאים בכתובת הווירטואלית: VPN (Virtual Page Number) והיסט (Offset)? כמה ביטים מוקצים ל-PFN (Physical Frame Number) בכתובת הפיזית?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.2",
        "text": "כמה רשומות (PTEs) יכולות להיכנס לדף בודד של טבלת הדפים? בהתאם לכך, כמה ביטים משמשים לכל רמה בטבלת הדפים הדו-רמתית (VPN1 ו-VPN2)?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.3",
        "text": "תהליך חדש מבצע הקצאת זיכרון דינמית (malloc) של 10MB. כמה מסגרות פיזיות יתפסו על ידי הנתונים עצמם, וכמה מסגרות יתפסו על ידי טבלאות הדפים הנדרשות כדי למפות זיכרון זה, במקרה המקסימלי (כלומר, כל הדפים וטבלאות הדפים מוצבים בזיכרון פיזי)?",
        "code_snippet": null,
        "options": null
      }
    ],
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "1.  **חישוב ביטים:**\n    *   זיכרון וירטואלי: 2GB = 2^31 בתים, לכן כתובת וירטואלית היא 31 ביטים.\n    *   זיכרון פיזי: 16GB = 2^34 בתים, לכן כתובת פיזית היא 34 ביטים.\n    *   גודל דף: 8KB = 2^13 בתים, לכן ההיסט (Offset) הוא 13 ביטים.\n    *   **VPN**: 31 ביטים (VA) - 13 ביטים (Offset) = 18 ביטים.\n    *   **PFN**: 34 ביטים (PA) - 13 ביטים (Offset) = 21 ביטים.\n\n2.  **רשומות בדף ורמות בטבלה:**\n    *   גודל דף: 8KB = 8192 בתים.\n    *   גודל רשומת PTE: 4 בתים.\n    *   מספר רשומות בדף טבלה: 8192 / 4 = 2048 רשומות.\n    *   2048 = 2^11, לכן כל רמה בטבלת הדפים יכולה למפות 11 ביטים מכתובת ה-VPN.\n    *   יש לנו 18 ביטים ל-VPN וטבלה דו-רמתית:\n        *   רמה שנייה (VPN2 - offset בתוך טבלת דפים של רמה 1): 11 ביטים.\n        *   רמה ראשונה (VPN1 - אינדקס בטבלת הדפים הראשית): 18 - 11 = 7 ביטים.\n\n3.  **הקצאת 10MB זיכרון:**\n    *   **מספר דפים לנתונים:** 10MB = 10 * 1024 KB = 10240 KB.\n    *   גודל דף: 8KB.\n    *   מספר דפים נדרשים לנתונים: 10240KB / 8KB = 1280 דפים.\n    *   לכן, הנתונים עצמם יתפסו **1280 מסגרות פיזיות**.\n\n    *   **מספר דפים לטבלאות הדפים (במקרה המקסימלי):**\n        *   כל דף טבלת דפים ברמה 2 מכיל 2048 רשומות (PTEs).\n        *   כדי למפות 1280 דפים, במקרה המקסימלי, ההקצאה יכולה להתפרס על פני 2 דפי טבלאות ברמה 2 (לדוגמה, אם ההקצאה מתחילה ב-VPN שהינו הרשומה האחרונה בדף טבלה ברמה 2 מסוים, והשאר גולשים לדף הטבלה הבא ברמה 2).\n        *   לכן, נצטרך **2 מסגרות פיזיות** עבור טבלאות הדפים ברמה 2.\n        *   (בהתאם לדוגמאות, הרמה הראשונה של טבלת הדפים, ה-Page Directory, נחשבת כקיימת מראש ואינה נכללת בחישוב ההקצאה החדשה).\n\n    *   **סה\"כ מסגרות פיזיות:** 1280 (לנתונים) + 2 (לטבלאות דפים ברמה 2) = **1282 מסגרות פיזיות**."
    },
    "difficulty_estimation": "Medium"
  }
}