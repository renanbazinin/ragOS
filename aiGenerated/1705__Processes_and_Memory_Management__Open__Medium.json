{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Processes and Memory Management",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-08 20:09:42",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1726,
      "output_tokens": 1343,
      "total_tokens": 6439
    }
  },
  "question": {
    "id": 1,
    "type": "Open",
    "topic": [
      "Processes",
      "Memory Management",
      "Virtual Memory",
      "Paging",
      "Copy-On-Write"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה המשתמשת בזיכרון וירטואלי עם גודל דף של 4KB. כתובות וירטואליות הן באורך 32 ביטים, וכתובות פיזיות הן באורך 28 ביטים. המערכת מיישמת מנגנון Copy-On-Write (COW) עבור העתקת דפים בתהליך fork().\nתהליך P1 מתחיל ומקצה 8MB לטקסט, נתונים ומחסנית. נניח שכל הזיכרון הזה נטען לזיכרון פיזי עם תחילת התהליך.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": [
      {
        "id": "1.1",
        "text": "כמה דפים וירטואליים תופס תהליך P1 בתחילתו? כמה מסגרות פיזיות הוא תופס?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "1.2",
        "text": "תהליך P1 מבצע קריאת מערכת fork() ויוצר את תהליך P2. כמה מסגרות פיזיות *נוספות* מוקצות מיד עם סיום ה-fork()? הסבר מדוע.",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "1.3",
        "text": "מיד לאחר ה-fork(), תהליך P2 מבצע קריאת מערכת execve() וטוען תוכנית חדשה בגודל 12MB. כמה מסגרות פיזיות יתפסו על ידי תוכנית זו? האם יש דפים מתהליך P1 שעדיין נמצאים בשימוש על ידי P2 לאחר ה-execve()? נמק.",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "1.4",
        "text": "לאחר ה-execve() של P2, תהליך P1 ממשיך לרוץ ומשנה נתונים בשני דפים שונים שהיו חלק מה-8MB המקוריים שלו. כמה מסגרות פיזיות *נוספות* יוקצו כתוצאה מפעולה זו? הסבר.",
        "code_snippet": null,
        "options": null
      }
    ],
    "points": 20,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "נתוני המערכת:\nגודל דף: 4KB = 2^12 בתים.\nכתובת וירטואלית: 32 ביטים. חלק ה-VPN הוא 32-12 = 20 ביטים.\nכתובת פיזית: 28 ביטים. חלק ה-PFN הוא 28-12 = 16 ביטים.\n\n1. תהליך P1 מקצה 8MB.\nמספר הדפים הוירטואליים = 8MB / 4KB = (8 * 1024 KB) / 4KB = 2048 דפים.\nמכיוון שצוין שכל הזיכרון נטען לזיכרון פיזי, P1 תופס 2048 מסגרות פיזיות.\n\n2. כאשר P1 מבצע fork() ויוצר את P2, המערכת משתמשת ב-Copy-On-Write.\nלכן, מיד לאחר ה-fork(), לא מוקצות מסגרות פיזיות *נוספות*. שני התהליכים P1 ו-P2 חולקים את אותן מסגרות פיזיות (שסומנו כקריאה בלבד). הקצאת מסגרות חדשות תתרחש רק כאשר אחד התהליכים ינסה לכתוב לדף משותף.\n\n3. תהליך P2 מבצע execve() וטוען תוכנית חדשה בגודל 12MB.\nקריאת execve() מחליפה את כל מרחב הכתובות של P2 בתוכנית החדשה.\nמספר המסגרות הפיזיות שיתפסו על ידי התוכנית החדשה = 12MB / 4KB = (12 * 1024 KB) / 4KB = 3072 מסגרות פיזיות (בהנחה שכל התוכנית נטענת לזיכרון).\nלא, אין דפים מתהליך P1 שעדיין נמצאים בשימוש על ידי P2 לאחר ה-execve(). ה-execve() הורס את מרחב הכתובות הישן ויוצר מרחב חדש לחלוטין עבור התוכנית החדשה.\n\n4. תהליך P1 משנה נתונים בשני דפים שונים שהיו חלק מה-8MB המקוריים שלו.\nמכיוון שהדפים הללו היו משותפים עם P2 (בגלל COW), ניסיון כתיבה אליהם על ידי P1 יפעיל את מנגנון ה-COW.\nכתוצאה מכך, יוקצו 2 מסגרות פיזיות *נוספות* - אחת לכל דף ש-P1 שינה, כדי ש-P1 יקבל עותק פרטי של הדפים הללו."
    },
    "difficulty_estimation": "Medium"
  }
}