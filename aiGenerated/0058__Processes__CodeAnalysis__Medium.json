{
  "metadata": {
    "source": "ai_generated",
    "topic_hint": "Processes",
    "requested_type": "CodeAnalysis",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 18:25:58",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2231,
      "output_tokens": 760,
      "total_tokens": 5106
    },
    "subject": "Virtualization"
  },
  "question": {
    "id": 1,
    "type": "CodeAnalysis",
    "topic": [
      "Processes",
      "System Calls",
      "Address Space"
    ],
    "content": {
      "text": "נתונה התוכנית הבאה בשפת C. הניחו כי כל קריאות המערכת מצליחות, וכי הפונקציה wait(NULL) גורמת לתהליך האב להמתין עד לסיום ביצועו של תהליך בן אחד. מה יהיה הפלט המדויק של התוכנית?",
      "code_snippet": "#include <stdio.h>\n#include <unistd.h>\n#include <sys/wait.h>\n\nint counter = 0;\n\nint main() {\n    for (int i = 0; i < 2; i++) {\n        if (fork() == 0) {\n            counter++;\n            printf(\"%d\", counter);\n        } else {\n            wait(NULL);\n            counter--;\n            printf(\"%d\", counter);\n        }\n    }\n    return 0;\n}",
      "options": [
        "א. 120-10-2",
        "ב. 1100-1-2",
        "ג. 120-1-20",
        "ד. 1210-1-2",
        "ה. אף אחת מהתשובות אינה נכונה"
      ]
    },
    "sub_questions": null,
    "points": 10,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "א",
      "explanation": "נעקוב אחר ביצוע התהליכים: 1. תהליך האב המקורי (P1) עם counter=0 ו-i=0 מבצע fork. P1 נכנס ל-wait. 2. הבן (P2) עם i=0 מקדם את counter ל-1 ומדפיס '1'. 3. P2 ממשיך ל-i=1 ומבצע fork. P2 נכנס ל-wait. 4. הבן של P2 (נקרא לו P3) עם i=1 מקדם את ה-counter שלו (שהיה 1) ל-2 ומדפיס '2'. P3 מסיים. 5. P2 משתחרר מה-wait, מקטין את ה-counter שלו ל-0 ומדפיס '0'. P2 מסיים. 6. P1 משתחרר מה-wait (של P2), מקטין את ה-counter שלו ל-1- ומדפיס '1-'. 7. P1 ממשיך ל-i=1 ומבצע fork. P1 נכנס ל-wait. 8. הבן החדש (P4) עם i=1 מקדם את ה-counter שלו (שהיה 1-) ל-0 ומדפיס '0'. P4 מסיים. 9. P1 משתחרר מה-wait, מקטין את ה-counter ל-2- ומדפיס '2-'. סה\"כ הפלט: 120-10-2."
    },
    "difficulty_estimation": "Medium"
  }
}