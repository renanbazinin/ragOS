{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "CPU Scheduling",
    "requested_type": "Open",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-08 00:09:10",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2859,
      "output_tokens": 3297,
      "total_tokens": 15275
    }
  },
  "question": {
    "id": 101,
    "type": "Open",
    "topic": [
      "CPU Scheduling",
      "Priority Scheduling",
      "Round Robin",
      "Context Switching",
      "I/O"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה המשתמשת במתזמן CPU היברידי עם עדיפויות ו-Round Robin (PPRR). המתזמן פועל על פי הכללים הבאים:\n1.  **עדיפויות**: לכל תהליך יש עדיפות סטטית (מספר נמוך יותר מציין עדיפות גבוהה יותר). תהליכים בעלי עדיפות זהה יטופלו לפי סדר הגעה (FCFS) בתוך תור ה-Round Robin.\n2.  **קדימה (Preemption)**: תהליך בעל עדיפות גבוהה יותר שמגיע למערכת או הופך למוכן (לאחר סיום I/O) יקבל את המעבד מיד ויקדים תהליך בעל עדיפות נמוכה יותר שרץ כרגע.\n3.  **בתוך אותה עדיפות**: תהליכים בעלי אותה עדיפות יטופלו באמצעות אלגוריתם Round Robin עם קואנטום זמן קבוע.\n4.  **טיפול ב-I/O**: כאשר תהליך מתחיל פעולת I/O, הוא מפנה את המעבד. כאשר פעולת I/O מסתיימת, התהליך הופך למוכן וממוקם בתור ההרצה בהתאם לעדיפותו. אם עדיפותו גבוהה יותר מהתהליך הרץ, הוא מקדים אותו.\n5.  **זמן החלפת הקשר (Context Switch)**: לכל החלפת קשר נדרשת יחידת זמן אחת (1ms). זמן זה נחשב כזמן שהמעבד עסוק בפעולת מערכת ואינו נכלל בזמן הריצה של התהליכים, אך נכלל בזמן ההמתנה הכולל של התהליכים הממתינים ל-CPU.\n\nנתונים התהליכים הבאים:\n\n| תהליך | זמן הגעה | עדיפות | פרץ CPU ראשון | פרץ I/O | פרץ CPU שני |\n| :---- | :-------- | :----- | :------------ | :-------- | :------------ |\n| P1    | 0ms       | 2      | 5ms           | 10ms      | 3ms           |\n| P2    | 1ms       | 1      | 6ms           | (אין)    | (אין)        |\n| P3    | 2ms       | 2      | 4ms           | 8ms       | 2ms           |\n\nקואנטום הזמן (Quantum) עבור Round Robin הוא 2ms.\n\nחשבו את זמן ההמתנה הממוצע (Average Waiting Time) ואת זמן המחזור הממוצע (Average Turnaround Time) עבור כל התהליכים. הציגו את כל שלבי החישוב והסבירו את התפתחות התזמון לאורך ציר הזמן.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "נבצע סימולציה מפורטת של התזמון לאורך ציר הזמן:\n\n**נתונים:**\n*   קואנטום (Q) = 2ms\n*   זמן החלפת קשר (CS) = 1ms\n\n**תהליכים:**\n*   P1: הגעה=0, עדיפות=2, CPU1=5ms, I/O=10ms, CPU2=3ms (סה\"כ CPU=8ms)\n*   P2: הגעה=1, עדיפות=1, CPU1=6ms (סה\"כ CPU=6ms)\n*   P3: הגעה=2, עדיפות=2, CPU1=4ms, I/O=8ms, CPU2=2ms (סה\"כ CPU=6ms)\n\n**ציר זמן (Gantt Chart Simulation):**\n\n*   **זמן 0:**\n    *   P1 מגיע. תור מוכנים: [P1(2,5)].\n    *   P1 מתחיל לרוץ.\n    *   **0-1:** P1 רץ (נותר CPU=4ms).\n\n*   **זמן 1:**\n    *   P2 מגיע. עדיפות P2 (1) גבוהה יותר מ-P1 (2). P2 מקדים את P1.\n    *   **1-2:** החלפת קשר (CS) מ-P1 ל-P2. (P1 נכנס לתור המוכנים).\n\n*   **זמן 2:**\n    *   P3 מגיע. עדיפות P3 (2) נמוכה מ-P2 (1). P2 ממשיך לרוץ.\n    *   **2-4:** P2 רץ (Q=2ms). (נותר CPU=4ms). הקואנטום של P2 הסתיים, אך אין תהליכים בעדיפות גבוהה יותר והוא התהליך היחיד בעדיפות 1, לכן ממשיך לרוץ ללא החלפת קשר.\n    *   **4-6:** P2 רץ (Q=2ms). (נותר CPU=2ms).\n    *   **6-8:** P2 רץ (Q=2ms). (נותר CPU=0ms). P2 מסיים ריצת CPU.\n    *   **8-9:** החלפת קשר (CS) מ-P2 לתהליך הבא. תור מוכנים: [P1(2,4), P3(2,4)]. P1 ו-P3 בעלי אותה עדיפות, P1 הגיע ראשון לתור המוכנים (בזמן 1). P1 ירוץ.\n\n*   **זמן 9:**\n    *   P1 מתחיל לרוץ.\n    *   **9-11:** P1 רץ (Q=2ms). (נותר CPU=2ms). הקואנטום של P1 הסתיים.\n    *   **11-12:** החלפת קשר (CS) מ-P1 ל-P3. (P1 חוזר לסוף תור המוכנים של עדיפות 2).\n\n*   **זמן 12:**\n    *   P3 מתחיל לרוץ.\n    *   **12-14:** P3 רץ (Q=2ms). (נותר CPU=2ms). הקואנטום של P3 הסתיים.\n    *   **14-15:** החלפת קשר (CS) מ-P3 ל-P1. (P3 חוזר לסוף תור המוכנים של עדיפות 2).\n\n*   **זמן 15:**\n    *   P1 מתחיל לרוץ.\n    *   **15-17:** P1 רץ (Q=2ms). (נותר CPU=0ms לפרץ הראשון). P1 מסיים את פרץ ה-CPU הראשון ועובר ל-I/O.\n    *   P1 יסיים I/O בזמן 17 + 10 = 27.\n    *   **17-18:** החלפת קשר (CS) מ-P1 ל-P3. (P3 הוא התהליך היחיד בתור המוכנים כרגע).\n\n*   **זמן 18:**\n    *   P3 מתחיל לרוץ.\n    *   **18-20:** P3 רץ (Q=2ms). (נותר CPU=0ms לפרץ הראשון). P3 מסיים את פרץ ה-CPU הראשון ועובר ל-I/O.\n    *   P3 יסיים I/O בזמן 20 + 8 = 28.\n\n*   **זמן 20-27:**\n    *   CPU פנוי (Idle). אין תהליכים מוכנים.\n\n*   **זמן 27:**\n    *   P1 מסיים I/O והופך למוכן (נותר CPU=3ms).\n    *   **27-28:** החלפת קשר (CS) מ-Idle ל-P1.\n\n*   **זמן 28:**\n    *   P1 מתחיל לרוץ.\n    *   P3 מסיים I/O והופך למוכן (נותר CPU=2ms). עדיפות P3 (2) שווה לעדיפות P1 (2). P1 רץ, P3 נכנס לתור המוכנים אחרי P1.\n    *   **28-30:** P1 רץ (Q=2ms). (נותר CPU=1ms). הקואנטום של P1 הסתיים, אך הוא עדיין התהליך היחיד בעדיפות 2 שהגיע בזמן 27, לכן ממשיך לרוץ ללא החלפת קשר.\n    *   **30-31:** P1 רץ (נותר CPU=0ms). P1 מסיים את כל פרצי ה-CPU שלו. P1 מסתיים.\n    *   **31-32:** החלפת קשר (CS) מ-P1 ל-P3. (P3 הוא התהליך היחיד המוכן).\n\n*   **זמן 32:**\n    *   P3 מתחיל לרוץ.\n    *   **32-34:** P3 רץ (Q=2ms). (נותר CPU=0ms). P3 מסיים את כל פרצי ה-CPU שלו. P3 מסתיים.\n\n**סיכום זמנים:**\n\n| תהליך | זמן הגעה | זמן CPU כולל | זמן I/O כולל | זמן סיום | זמן מחזור (Turnaround Time) | זמן המתנה (Waiting Time) |\n| :---- | :-------- | :----------- | :----------- | :------- | :-------------------------- | :----------------------- |\n| P1    | 0         | 8            | 10           | 31       | 31 - 0 = 31                 | 31 - 8 - 10 = 13         |\n| P2    | 1         | 6            | 0            | 8        | 8 - 1 = 7                   | 7 - 6 = 1                |\n| P3    | 2         | 6            | 8            | 34       | 34 - 2 = 32                 | 32 - 6 - 8 = 18          |\n\n**חישוב זמני המתנה (אימות מפורט):**\n*   **P1:**\n    *   המתנה בזמן CS (P1->P2): 1ms (1-2)\n    *   המתנה בזמן ריצת P2: 6ms (2-8)\n    *   המתנה בזמן CS (P2->P1): 1ms (8-9)\n    *   המתנה בזמן CS (P1->P3): 1ms (11-12)\n    *   המתנה בזמן ריצת P3: 2ms (12-14)\n    *   המתנה בזמן CS (P3->P1): 1ms (14-15)\n    *   המתנה בזמן CS (Idle->P1): 1ms (27-28)\n    *   סה\"כ המתנה P1 = 1+6+1+1+2+1+1 = 13ms. (תואם לחישוב בטבלה)\n\n*   **P2:**\n    *   המתנה בזמן CS (P1->P2): 1ms (1-2)\n    *   סה\"כ המתנה P2 = 1ms. (תואם לחישוב בטבלה)\n\n*   **P3:**\n    *   המתנה בזמן ריצת P2: 6ms (2-8)\n    *   המתנה בזמן CS (P2->P1): 1ms (8-9)\n    *   המתנה בזמן ריצת P1: 2ms (9-11)\n    *   המתנה בזמן CS (P1->P3): 1ms (11-12)\n    *   המתנה בזמן CS (P3->P1): 1ms (14-15)\n    *   המתנה בזמן ריצת P1: 2ms (15-17)\n    *   המתנה בזמן CS (P1->P3): 1ms (17-18)\n    *   המתנה בזמן ריצת P1 (אחרי I/O): 3ms (28-31)\n    *   המתנה בזמן CS (P1->P3): 1ms (31-32)\n    *   סה\"כ המתנה P3 = 6+1+2+1+1+2+1+3+1 = 18ms. (תואם לחישוב בטבלה)\n\n**חישוב ממוצעים:**\n*   **זמן המתנה ממוצע (Average Waiting Time):**\n    *   (13 + 1 + 18) / 3 = 32 / 3 = 10.67ms\n\n*   **זמן מחזור ממוצע (Average Turnaround Time):**\n    *   (31 + 7 + 32) / 3 = 70 / 3 = 23.33ms",
      "difficulty_estimation": "Hard"
    }
  }
}