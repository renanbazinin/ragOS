{
  "metadata": {
    "source": "ai_generated",
    "subject": "Disks",
    "topic_hint": "I/O",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-08 09:34:54",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 970,
      "output_tokens": 1108,
      "total_tokens": 4575
    }
  },
  "question": {
    "id": 6,
    "type": "MultipleChoice",
    "topic": [
      "I/O",
      "DMA",
      "Kernel",
      "User Space",
      "System Calls",
      "Memory Management"
    ],
    "content": {
      "text": "תהליך משתמש (user process) מעוניין לקרוא כמות גדולה של נתונים (לדוגמה, מספר מגה-בייט) מהתקן בלוקים (כגון דיסק SSD) לתוך באפר במרחב המשתמש שלו. מערכת ההפעלה תומכת ב-DMA (Direct Memory Access) עבור העברות מההתקן. נניח שהתהליך מבצע קריאה סינכרונית (blocking `read` system call). איזו מהטענות הבאות מתארת בצורה הטובה ביותר את תהליך העברת הנתונים והשפעתה על ניצול המעבד (CPU utilization) ומספר העתקות הזיכרון (memory copies) הנדרשות עבור נתוני הקובץ הספציפיים שנקראים?",
      "code_snippet": null,
      "options": [
        "א. הנתונים מועתקים ישירות מההתקן לבאפר במרחב המשתמש באמצעות DMA, ללא כל מעורבות CPU בהעתקה וללא העתקות זיכרון נוספות.",
        "ב. הנתונים מועתקים מההתקן לבאפר במרחב הקרנל באמצעות DMA. לאחר מכן, ה-CPU מעתיק את הנתונים מבאפר הקרנל לבאפר במרחב המשתמש.",
        "ג. ה-CPU מעתיק את הנתונים מההתקן לבאפר במרחב הקרנל, ולאחר מכן ה-CPU מעתיק אותם מבאפר הקרנל לבאפר במרחב המשתמש.",
        "ד. הנתונים מועתקים מההתקן לבאפר במרחב הקרנל באמצעות DMA, ולאחר מכן מועתקים מבאפר הקרנל לבאפר במרחב המשתמש גם כן באמצעות DMA."
      ]
    },
    "sub_questions": null,
    "points": 5,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ב",
      "explanation": "תשובה ב' היא הנכונה. כאשר תהליך משתמש מבצע קריאת `read` סינכרונית מקובץ, הנתונים מועברים מהתקן הבלוקים לזיכרון הפיזי של המערכת. ברוב המערכות המודרניות התומכות ב-DMA, העברה זו מתבצעת באמצעות DMA ישירות לבאפרים במרחב הקרנל. ה-CPU אינו מעורב בהעתקה זו, מה שמפחית את ניצול המעבד.\nלאחר שהנתונים הגיעו לבאפרים של הקרנל, מערכת ההפעלה צריכה להעתיק אותם לבאפר שהוקצה במרחב המשתמש על ידי התהליך הקורא. העתקה זו מבאפר הקרנל לבאפר המשתמש מתבצעת בדרך כלל על ידי ה-CPU (באמצעות פקודות העתקת זיכרון רגילות), וזוהי אחת מ\"עלויות\" ה-I/O המכונה לעיתים \"double buffering\" או \"system call overhead\".\nלגבי האפשרויות האחרות:\nא. העברת DMA ישירה למרחב המשתמש (user-space) באופן כללי אינה בטוחה או פשוטה לביצוע עבור קריאת `read` רגילה, מכיוון שהקרנל צריך לנהל את הגישה לזיכרון, לבצע אימותים ולהתמודד עם זיכרון וירטואלי.\nג. אם המערכת תומכת ב-DMA, ה-CPU אינו מעתיק את הנתונים מההתקן לבאפר הקרנל. זו בדיוק מטרת ה-DMA – לשחרר את ה-CPU ממשימה זו.\nד. העברת DMA מבאפר הקרנל לבאפר המשתמש אינה הדרך הסטנדרטית עבור קריאת `read` רגילה. קיימות טכניקות \"zero-copy\" (כמו `sendfile`, `splice` ב-Linux) שיכולות לבצע העברות כאלה, אך הן דורשות שימוש בממשקי API ספציפיים ואינן חלק מפעולת `read` סינכרונית רגילה."
    },
    "difficulty_estimation": "Hard"
  }
}