{
  "metadata": {
    "source": "ai_generated",
    "topic_hint": "Deadlocks",
    "requested_type": "Open",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-07 21:20:26",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 3443,
      "output_tokens": 3072,
      "total_tokens": 12574
    },
    "subject": "Concurrency"
  },
  "question": {
    "id": 101,
    "type": "Open",
    "topic": [
      "Deadlocks",
      "Resource Management",
      "Banker's Algorithm"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה המנהלת שלושה סוגי משאבים: R1, R2, R3. מספר היחידות הכולל מכל סוג משאב הוא: R1=10, R2=5, R3=7.\nבמערכת פועלים ארבעה תהליכים: P0, P1, P2, P3.\nלהלן טבלת הקצאת המשאבים הנוכחית (Allocation) וטבלת הדרישה המקסימלית (Max) של כל תהליך:\n\n**Allocation:**\n| Process | R1 | R2 | R3 |\n|---------|----|----|----|\n| P0      | 0  | 1  | 0  |\n| P1      | 2  | 0  | 0  |\n| P2      | 3  | 0  | 2  |\n| P3      | 2  | 1  | 1  |\n\n**Max:**\n| Process | R1 | R2 | R3 |\n|---------|----|----|----|\n| P0      | 7  | 5  | 3  |\n| P1      | 3  | 2  | 2  |\n| P2      | 9  | 0  | 2  |\n| P3      | 2  | 2  | 2  |\n\nענו על השאלות הבאות בהתבסס על אלגוריתם הבנקאי:",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": [
      {
        "id": "a",
        "text": "מהו מצב המשאבים הזמינים כרגע (Available)? האם המצב הנוכחי בטוח? אם כן, הציגו רצף בטוח.",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "b",
        "text": "נניח שתהליך P1 מבקש משאבים נוספים: (R1=1, R2=0, R3=2). האם ניתן לאשר בקשה זו באופן מיידי? נמקו את תשובתכם.",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "c",
        "text": "דון במגבלות של אלגוריתם הבנקאי ביישום במערכת הפעלה אמיתית.",
        "code_snippet": null,
        "options": null
      }
    ],
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "חלק 1: בטיחות המצב ההתחלתי\n\nראשית, נחשב את וקטור המשאבים הזמינים (Available) ואת מטריצת הדרישה (Need).\nסה\"כ משאבים: R1=10, R2=5, R3=7.\nסה\"כ משאבים מוקצים (Allocation Sum):\nR1: 0+2+3+2 = 7\nR2: 1+0+0+1 = 2\nR3: 0+0+2+1 = 3\nוקטור המשאבים המוקצים = (7, 2, 3).\nוקטור המשאבים הזמינים (Available) = סה\"כ משאבים - וקטור המשאבים המוקצים = (10, 5, 7) - (7, 2, 3) = **(3, 3, 4)**.\n\nמטריצת הדרישה (Need = Max - Allocation):\nP0: (7, 5, 3) - (0, 1, 0) = (7, 4, 3)\nP1: (3, 2, 2) - (2, 0, 0) = (1, 2, 2)\nP2: (9, 0, 2) - (3, 0, 2) = (6, 0, 0)\nP3: (2, 2, 2) - (2, 1, 1) = (0, 1, 1)\n\nנפעיל את אלגוריתם הבנקאי לבדיקת בטיחות המצב:\nWork = (3, 3, 4), Finish = [False, False, False, False]\n\n1.  **תהליך P1**: Need(P1)=(1,2,2) <= Work(3,3,4). כן.\n    Work = Work + Allocation(P1) = (3,3,4) + (2,0,0) = (5,3,4)\n    Finish[1] = True\n    רצף בטוח עד כה: <P1>\n\n2.  **תהליך P3**: Need(P3)=(0,1,1) <= Work(5,3,4). כן.\n    Work = Work + Allocation(P3) = (5,3,4) + (2,1,1) = (7,4,5)\n    Finish[3] = True\n    רצף בטוח עד כה: <P1, P3>\n\n3.  **תהליך P0**: Need(P0)=(7,4,3) <= Work(7,4,5). כן.\n    Work = Work + Allocation(P0) = (7,4,5) + (0,1,0) = (7,5,5)\n    Finish[0] = True\n    רצף בטוח עד כה: <P1, P3, P0>\n\n4.  **תהליך P2**: Need(P2)=(6,0,0) <= Work(7,5,5). כן.\n    Work = Work + Allocation(P2) = (7,5,5) + (3,0,2) = (10,5,7)\n    Finish[2] = True\n    רצף בטוח סופי: <P1, P3, P0, P2>\n\nמכיוון שנמצא רצף בטוח שבו כל התהליכים יכולים להשלים את ביצועם, **המצב הנוכחי בטוח**.\n\nחלק 2: בקשת משאבים נוספים מ-P1\n\nתהליך P1 מבקש משאבים נוספים: Request(P1) = (1, 0, 2).\nמצב נוכחי: Available = (3, 3, 4), Allocation(P1) = (2, 0, 0), Need(P1) = (1, 2, 2).\n\nנבדוק את תנאי הבקשה:\n1.  האם Request(P1) <= Need(P1)? כלומר, (1,0,2) <= (1,2,2)? כן (1<=1, 0<=2, 2<=2). הבקשה אינה חורגת מהדרישה המקסימלית שהתהליך הצהיר עליה.\n2.  האם Request(P1) <= Available? כלומר, (1,0,2) <= (3,3,4)? כן (1<=3, 0<=3, 2<=4). יש מספיק משאבים זמינים כדי לספק את הבקשה.\n\nמכיוון ששני התנאים מתקיימים, נדמה הקצאה ונבדוק שוב את בטיחות המצב:\nAvailable' = Available - Request(P1) = (3,3,4) - (1,0,2) = (2,3,2)\nAllocation'(P1) = Allocation(P1) + Request(P1) = (2,0,0) + (1,0,2) = (3,0,2)\nNeed'(P1) = Need(P1) - Request(P1) = (1,2,2) - (1,0,2) = (0,2,0)\n\nמטריצת Need המעודכנת:\nP0: (7, 4, 3)\nP1: (0, 2, 0)\nP2: (6, 0, 0)\nP3: (0, 1, 1)\n\nנפעיל את אלגוריתם הבנקאי עם המצב החדש:\nWork = (2, 3, 2), Finish = [False, False, False, False]\n\n1.  **תהליך P1**: Need(P1)=(0,2,0) <= Work(2,3,2). כן.\n    Work = Work + Allocation'(P1) = (2,3,2) + (3,0,2) = (5,3,4)\n    Finish[1] = True\n    רצף בטוח עד כה: <P1>\n\n2.  **תהליך P3**: Need(P3)=(0,1,1) <= Work(5,3,4). כן.\n    Work = Work + Allocation(P3) = (5,3,4) + (2,1,1) = (7,4,5)\n    Finish[3] = True\n    רצף בטוח עד כה: <P1, P3>\n\n3.  **תהליך P0**: Need(P0)=(7,4,3) <= Work(7,4,5). כן.\n    Work = Work + Allocation(P0) = (7,4,5) + (0,1,0) = (7,5,5)\n    Finish[0] = True\n    רצף בטוח עד כה: <P1, P3, P0>\n\n4.  **תהליך P2**: Need(P2)=(6,0,0) <= Work(7,5,5). כן.\n    Work = Work + Allocation(P2) = (7,5,5) + (3,0,2) = (10,5,7)\n    Finish[2] = True\n    רצף בטוח סופי: <P1, P3, P0, P2>\n\nמכיוון שגם לאחר הקצאת המשאבים לבקשת P1 נמצא רצף בטוח, **ניתן לאשר את הבקשה באופן מיידי**.\n\nחלק 3: מגבלות אלגוריתם הבנקאי במערכת הפעלה אמיתית\n\nאלגוריתם הבנקאי הוא יעיל במניעת קיפאון (deadlock), אך יש לו מספר מגבלות המקשות על יישומו במערכות הפעלה אמיתיות:\n\n1.  **ידיעה מוקדמת של דרישות מקסימליות (Max Needs)**: כל תהליך חייב להצהיר מראש על הדרישה המקסימלית שלו לכל סוג משאב. במקרים רבים, תהליכים אינם יודעים מראש את כל דרישות המשאבים שלהם לאורך כל זמן הריצה.\n2.  **מספר קבוע של תהליכים ומשאבים**: האלגוריתם מניח מספר קבוע של תהליכים ומספר קבוע של יחידות מכל סוג משאב. במערכת הפעלה דינמית, תהליכים נוצרים ומסתיימים כל הזמן, וייתכן שגם משאבים מתווספים או מוסרים. שינויים אלו דורשים עדכון מתמיד של מצב המערכת, מה שמסבך את היישום.\n3.  **שחרור משאבים בסיום**: ההנחה היא שתהליך משחרר את כל המשאבים שהוקצו לו בסיום ביצועו. למרות שזה נכון בדרך כלל, ישנם תהליכים ארוכי טווח שעשויים להחזיק משאבים לזמן רב.\n4.  **תקורה חישובית גבוהה**: בדיקת הבטיחות (Safety Algorithm) צריכה להתבצע בכל פעם שתהליך מבקש משאבים. במערכות עם מספר רב של תהליכים וסוגי משאבים, הדבר עלול להוביל לתקורה חישובית משמעותית ולפגוע בביצועי המערכת.\n5.  **רעב (Starvation)**: למרות שהאלגוריתם מונע קיפאון, הוא אינו מונע בהכרח רעב. תהליך בעל דרישות משאבים גבוהות עלול להידחות שוב ושוב אם הקצאת המשאבים עבורו תוביל למצב לא בטוח, גם אם המשאבים זמינים באופן תיאורטי."
    },
    "difficulty_estimation": "Hard"
  }
}