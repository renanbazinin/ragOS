{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "TLB",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-08 08:08:03",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1140,
      "output_tokens": 805,
      "total_tokens": 4212
    }
  },
  "question": {
    "id": 101,
    "type": "MultipleChoice",
    "topic": [
      "TLB",
      "Memory Management",
      "Context Switching"
    ],
    "content": {
      "text": "מהי ההשפעה העיקרית של החלפת הקשר (Context Switch) בין תהליכים על ה-TLB?",
      "code_snippet": null,
      "options": [
        "א. ה-TLB מוכרח להיות מרוקן (flushed) לחלוטין, מה שמוביל בהכרח לירידה ב-hit ratio עבור התהליך החדש.",
        "ב. ה-TLB נשאר ללא שינוי, מכיוון שכל התהליכים משתמשים באותו מרחב כתובות וירטואלי.",
        "ג. רשומות TLB שששייכות לתהליך הקודם הופכות ללא תקפות (invalid), מה שעלול להוביל לעלייה במספר ה-TLB misses בתחילת ריצת התהליך החדש.",
        "ד. ה-TLB מתעדכן אוטומטית עם המיפויים של התהליך החדש על ידי חומרת ה-MMU.",
        "ה. כל התשובות האחרות אינן נכונות."
      ]
    },
    "sub_questions": null,
    "points": 5,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ג",
      "explanation": "כאשר מתרחשת החלפת הקשר בין תהליכים, מרחב הכתובות הווירטואלי משתנה. המשמעות היא שרשומות ה-TLB שהכילו מיפויים מהתהליך הקודם אינן רלוונטיות (או אף שגויות) עבור התהליך החדש. במערכות רבות, ה-TLB מרוקן לחלוטין (flushed) כדי למנוע שימוש במיפויים שגויים. במערכות אחרות, רשומות ה-TLB מתויגות עם מזהה מרחב כתובות (ASID - Address Space ID), מה שמאפשר לרשומות מתהליכים שונים לחיות ב-TLB בו זמנית, אך רק הרשומות התואמות ל-ASID של התהליך הנוכחי תקפות. בשני המקרים, התהליך החדש יתחיל עם 'TLB קר' (cold TLB), כלומר, יחווה יותר TLB misses בתחילת ריצתו עד שמיפויי הדפים הנחוצים לו ייטענו ל-TLB. לכן, רשומות קודמות הופכות ללא תקפות, מה שמוביל לעלייה ב-misses. תשובה א' חזקה מדי ('מוכרח להיות מרוקן לחלוטין'), שכן לא כל המערכות מנקות את כל ה-TLB. תשובה ב' אינה נכונה מכיוון שלכל תהליך יש מרחב כתובות וירטואלי משלו. תשובה ד' אינה נכונה מכיוון שה-MMU אינו מעדכן אוטומטית את כל המיפויים עבור התהליך החדש; הוא מאכלס את ה-TLB על פי דרישה (במקרה של TLB miss)."
    },
    "difficulty_estimation": "Medium"
  }
}