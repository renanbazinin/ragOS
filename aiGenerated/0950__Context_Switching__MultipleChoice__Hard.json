{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Context Switching",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-08 07:05:36",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 969,
      "output_tokens": 1109,
      "total_tokens": 4038
    }
  },
  "question": {
    "id": 10,
    "type": "MultipleChoice",
    "topic": [
      "Context Switching",
      "Performance",
      "Caches",
      "TLB"
    ],
    "content": {
      "text": "בהינתן מערכת מרובת ליבות (multi-core) עם TLB (Translation Lookaside Buffer) ורמות שונות של זיכרון מטמון (CPU caches L1, L2), נתח את ההשלכות של החלפת הקשר (context switch) בין שני *תהליכים* שונים לעומת החלפת הקשר בין שני *חוטים* השייכים לאותו *תהליך* יחיד, על ביצועי המערכת, במיוחד בהתייחס לניצול המטמון וה-TLB. איזו מהטענות הבאות מתארת נכונה את ההשפעה על הביצועים?",
      "code_snippet": null,
      "options": [
        "א. החלפת קשר בין תהליכים היא יקרה יותר באופן משמעותי מאחר והיא דורשת בדרך כלל ניקוי (flush) של ה-TLB וכן איפוס חלקים משמעותיים מזיכרון המטמון של המעבד (CPU cache), בעוד שבהחלפת קשר בין חוטים באותו תהליך פעולות אלו לרוב אינן הכרחיות.",
        "ב. החלפת קשר בין חוטים באותו תהליך יקרה יותר מאחר והיא דורשת שמירה וטעינה של יותר מצב ספציפי לחוט (thread-specific state) מאשר החלפת קשר בין תהליכים, אשר רק צריכה לשמור מצב מעבד כללי.",
        "ג. אין הבדל משמעותי בעלות הביצועים בין שני סוגי החלפות הקשר, שכן שניהם דורשים ניקוי מלא של ה-TLB וזיכרון המטמון כדי להבטיח נכונות.",
        "ד. החלפת קשר בין תהליכים זולה יותר מאחר והיא אינה צריכה לשמור מצב ספציפי לחוט, בניגוד להחלפת קשר בין חוטים באותו תהליך.",
        "ה. עלות החלפת הקשר תלויה לחלוטין באלגוריתם התזמון של מערכת ההפעלה ואינה מושפעת באופן מהותי מניהול המטמון או ה-TLB."
      ]
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "א. החלפת קשר בין תהליכים היא יקרה יותר באופן משמעותי מאחר והיא דורשת בדרך כלל ניקוי (flush) של ה-TLB וכן איפוס חלקים משמעותיים מזיכרון המטמון של המעבד (CPU cache), בעוד שבהחלפת קשר בין חוטים באותו תהליך פעולות אלו לרוב אינן הכרחיות.",
      "explanation": "החלפת קשר (context switch) בין תהליכים שונים כרוכה בשינוי מרחב הכתובות הוירטואלי כולו. כתוצאה מכך, ה-TLB (Translation Lookaside Buffer), המכיל מיפויים מכתובות וירטואליות לפיזיות, הופך ללא רלוונטי ויש לנקותו (flush) או לסמן את כל הכניסות בו כלא תקפות (אלא אם כן המערכת תומכת ב-ASID/PCID מתויגים באופן מלא ויעיל). בנוסף, זיכרון המטמון של המעבד (CPU caches L1, L2) עשוי להכיל נתונים שהשתייכו למרחב הכתובות הוירטואלי של התהליך הקודם, ולכן גם הוא עלול לאבד מיעילותו (cache invalidation/cold cache). פעולות אלו מוסיפות תקורה משמעותית. לעומת זאת, בהחלפת קשר בין חוטים (threads) השייכים לאותו תהליך, מרחב הכתובות הוירטואלי נשאר זהה. לכן, אין צורך לנקות את ה-TLB (או רק חלקים ממנו אם יש תמיכה ב-ASID/PCID), וסביר להניח שגם זיכרון המטמון יכיל נתונים רלוונטיים שיכולים לשמש את החוט החדש, מה שמפחית את עלות החלפת הקשר באופן ניכר."
    },
    "difficulty_estimation": "Hard"
  }
}