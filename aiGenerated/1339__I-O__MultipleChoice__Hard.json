{
  "metadata": {
    "source": "ai_generated",
    "subject": "Disks",
    "topic_hint": "I/O",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-09 20:38:18",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 970,
      "output_tokens": 1331,
      "total_tokens": 4962
    }
  },
  "question": {
    "id": 101,
    "type": "MultipleChoice",
    "topic": [
      "I/O",
      "DMA",
      "Cache Coherence",
      "Memory Management"
    ],
    "content": {
      "text": "במערכת הפעלה מודרנית, התקן I/O מהיר במיוחד (לדוגמה, כרטיס רשת 100Gbps) משתמש ב-DMA (Direct Memory Access) כדי להעביר נתונים ישירות לזיכרון הראשי וממנו, ללא מעורבות ישירה של ה-CPU עבור כל בייט. בהקשר זה, מהי הבעיה הפוטנציאלית המשמעותית ביותר שעלולה להתעורר כתוצאה משימוש ב-DMA, וכיצד היא מטופלת בדרך כלל?",
      "code_snippet": null,
      "options": [
        "א. DMA יכול לגרום לבעיות אבטחה חמורות בכך שהוא מאפשר להתקני I/O לגשת לכל אזור בזיכרון הראשי, כולל זיכרון ששייך לתהליכים אחרים או לקרנל, ללא בדיקת הרשאות.",
        "ב. ייתכן שנתונים שנכתבו לזיכרון על ידי ה-DMA לא יהיו גלויים באופן מיידי ל-CPU, או שנתונים שנכתבו לזיכרון על ידי ה-CPU לא יהיו מעודכנים בזיכרון המטמון של ה-CPU, עקב בעיות קוהרנטיות מטמון (Cache Coherence). הטיפול הנפוץ הוא ביצוע סנכרון מטמון (Cache Flush/Invalidate) ידני או חומרתי.",
        "ג. שימוש ב-DMA דורש מה-CPU להקצות משאבים רבים לניהול העברות הנתונים, מה שגורם לעלייה משמעותית בעומס על ה-CPU בהשוואה לשיטות I/O אחרות.",
        "ד. DMA מוגבל להעברת נתונים רק מבלוקי זיכרון פיזיים רציפים, מה שמקשה על שימוש בו במערכות המשתמשות בזיכרון וירטואלי מפורק לדפים (paging).",
        "ה. אף אחת מהטענות לעיל אינה נכונה או מתארת את הבעיה המרכזית."
      ]
    },
    "sub_questions": null,
    "points": 5,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ב",
      "explanation": "התשובה הנכונה היא ב'.\nDMA מאפשר להתקני I/O לכתוב ולקרוא ישירות מזיכרון המערכת (RAM) ללא מעורבות ישירה של ה-CPU בכל פעולה. בעוד שזה מפחית באופן דרמטי את עומס ה-CPU ומגביר את תפוקת ה-I/O, זה יוצר בעיה פוטנציאלית של קוהרנטיות מטמון (Cache Coherence).\nכאשר ה-DMA כותב נתונים לזיכרון, הנתונים הללו עשויים לעקוף את מטמון ה-CPU. אם ה-CPU מחזיק בגרסה מיושנת של אותם נתונים במטמון שלו (לדוגמה, כי קרא אותם קודם לכן), הוא ימשיך לעבוד עם הנתונים השגויים. באופן דומה, אם ה-CPU כתב נתונים למקטע זיכרון והם עדיין נמצאים רק במטמון ה-CPU (לא נכתבו חזרה לזיכרון הראשי), ה-DMA שיבוא לקרוא מאותו מקטע יקבל נתונים לא מעודכנים מהזיכרון הראשי.\nכדי לפתור בעיה זו, מערכת ההפעלה (או מנהל ההתקן) צריכה לבצע פעולות סנכרון מטמון. לדוגמה, לפני העברת נתונים מה-CPU להתקן באמצעות DMA, יש לוודא שהנתונים במטמון ה-CPU נכתבים בחזרה לזיכרון הראשי (Cache Flush). לאחר ש-DMA סיים לכתוב נתונים לזיכרון עבור ה-CPU, יש לבטל (Invalidate) את השורות הרלוונטיות במטמון ה-CPU, כדי שה-CPU יקרא את הנתונים המעודכנים ישירות מהזיכרון הראשי בפעם הבאה שיגש אליהם.\n\nאפשרויות אחרות:\nא. בעיות אבטחה ב-DMA מטופלות בדרך כלל על ידי יחידת IOMMU (I/O Memory Management Unit) שמספקת הגנת זיכרון ומיפוי כתובות עבור התקני I/O, בדומה ל-MMU עבור ה-CPU. לכן, זו אינה הבעיה המרכזית בהקשר של *פעולת ה-DMA עצמה* וכיצד היא משפיעה על אינטראקציה עם ה-CPU.\nג. DMA נועד דווקא להפחית את עומס ה-CPU על ידי ביצוע העברות נתונים ללא מעורבותו הישירה בכל בייט.\nד. בעוד שבעבר DMA עבד בצורה יעילה יותר עם זיכרון פיזי רציף, מערכות מודרניות עם IOMMU תומכות ב-DMA בזיכרון לא רציף (scatter/gather DMA), כך שזו אינה מגבלה מהותית."
    },
    "difficulty_estimation": "Hard"
  }
}