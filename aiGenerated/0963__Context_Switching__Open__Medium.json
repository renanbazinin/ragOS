{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Context Switching",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-08 07:08:50",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2388,
      "output_tokens": 1087,
      "total_tokens": 5635
    }
  },
  "question": {
    "id": 101,
    "type": "Open",
    "topic": [
      "Context Switching",
      "Threads",
      "Performance"
    ],
    "content": {
      "text": "תאר את תהליך החלפת ההקשר (Context Switching) בין שני תהליכונים (user-level threads) שרצים באותו תהליך. הסבר מהם המרכיבים העיקריים של ההקשר הנשמרים ומשוחזרים. דון בעלויות התקורה (overheads) הקשורות להחלפת הקשר וכיצד הן משפיעות על ביצועי המערכת.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "החלפת הקשר בין שני תהליכונים באותו תהליך מתרחשת כאשר מתזמן מערכת ההפעלה (או ספריית התהליכונים במקרה של תהליכוני משתמש בלבד) מחליט להפסיק את ריצתו של תהליכון אחד (T1) ולהתחיל או להמשיך את ריצתו של תהליכון אחר (T2).\n\n**המרכיבים העיקריים של ההקשר הנשמרים ומשוחזרים כוללים:**\n1.  **אוגרי המעבד (CPU Registers):** אלו כוללים את מונה התוכנית (Program Counter - PC), מצביע המחסנית (Stack Pointer - SP), אוגרים לשימוש כללי (General Purpose Registers) ואוגרי מצב (Status Registers). אוגרים אלו מכילים את כל המידע הדרוש לתהליכון כדי להמשיך את פעולתו בדיוק מהנקודה שבה הופסק. במקרה של תהליכוני משתמש באותו תהליך, הם חולקים את אותו מרחב כתובות, ולכן מידע הקשור לטבלאות דפים (page tables) או אוגרי MMU אינו נשמר/משוחזר, שכן הוא משותף.\n2.  **מחסנית התהליכון (Thread's Stack):** למרות שהמחסנית אינה חלק מ'אוגרי המעבד', היא חלק קריטי מהקשר התהליכון. מצביע המחסנית (SP) נשמר ומשוחזר, מה שמבטיח שכל המידע המקומי של הפונקציות שרצות על המחסנית של T1 יישאר שמור, וש-T2 ימשיך עם המחסנית שלו.\n\n**עלויות תקורה (Overheads) והשפעתן על ביצועי המערכת:**\nהחלפת הקשר כרוכה במספר עלויות תקורה המשפיעות על ביצועי המערכת:\n1.  **עלות ישירה (Direct Overhead):** זוהי העלות של ביצוע הפעולות עצמן של שמירה ושיחזור האוגרים, עדכון מבני נתונים פנימיים של מערכת ההפעלה (לדוגמה, העברת T1 מתור 'רץ' לתור 'מוכן') והרצת קוד המתזמן. זמן זה הוא זמן שאינו מוקדש לעבודת התהליכונים עצמם ולכן מהווה בזבוז משאבים.\n2.  **זיהום זיכרון מטמון (Cache/TLB Pollution):** זוהי עלות עקיפה אך משמעותית. כאשר תהליכון חדש (T2) מתחיל לרוץ, ייתכן שהנתונים וההוראות שלו אינם נמצאים בזיכרון המטמון (CPU Cache) או ב-TLB (Translation Lookaside Buffer - במקרה של תהליכים נפרדים, אך גם לתהליכונים באותו תהליך, דפוסי הגישה שלהם יכולים להיות שונים). כתוצאה מכך, המערכת תסבול מ'פספוסי מטמון' (cache misses) רבים יותר ו'פספוסי TLB' (TLB misses), מה שמוביל לגישות איטיות יותר לזיכרון הראשי. עד שהמטמון ו-TLB 'יתחממו' מחדש עם הנתונים של T2, הביצועים יהיו ירודים. תופעה זו יכולה להפחית משמעותית את התפוקה הכוללת של המערכת, במיוחד במערכות עם החלפות הקשר תכופות."
    },
    "difficulty_estimation": "Medium"
  }
}