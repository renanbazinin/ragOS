{
  "metadata": {
    "source": "ai_generated",
    "subject": "Concurrency",
    "topic_hint": "Condition Variables",
    "requested_type": "Open",
    "requested_difficulty": "Easy",
    "generated_at": "2026-02-08 07:32:03",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1573,
      "output_tokens": 857,
      "total_tokens": 3978
    }
  },
  "question": {
    "id": 1,
    "type": "Open",
    "topic": [
      "Condition Variables",
      "Synchronization"
    ],
    "content": {
      "text": "הסבירו מהו תפקידם של משתני תנאי (Condition Variables) במנגנוני סנכרון בין תהליכים/חוטים. כיצד הם עובדים בדרך כלל בשילוב עם מנעולים (mutexes) כדי לאפשר המתנה ואיתות יעילים?",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "משתני תנאי (Condition Variables) משמשים במנגנוני סנכרון כדי לאפשר לחוטים להמתין ביעילות עד שתנאי מסוים יתקיים, במקום לבצע המתנה פעילה (busy-waiting). הם תמיד עובדים בשילוב עם מנעולים (mutexes) המגינים על המצב המשותף.\n\nכאשר חוט מעוניין להמתין לתנאי:\n1.  הוא רוכש את המנעול (mutex) המגן על הנתונים המשותפים הקשורים לתנאי.\n2.  בודק את התנאי. אם התנאי אינו מתקיים (לדוגמה, חיץ ריק וחוט צרכן מנסה לצרוך).\n3.  הוא קורא לפונקציית `wait()` של משתנה התנאי. פונקציה זו משחררת אטומית את המנעול וחוסמת את החוט, ומכניסה אותו לרשימת ההמתנה של משתנה התנאי. השחרור האטומי של המנעול והחסימה מבטיח שלא ייווצר מצב מירוץ.\n4.  כאשר חוט אחר מאותת (signal) על משתנה התנאי כי התנאי השתנה, החוט הממתין מתעורר, רוכש מחדש את המנעול (mutex) וממשיך בבדיקת התנאי (חשוב לבדוק את התנאי שוב בלולאה, כדי לטפל ב-spurious wakeups).\n\nכאשר חוט משנה מצב שיכול להשפיע על תנאי שחוטים אחרים ממתינים לו:\n1.  הוא רוכש את המנעול (mutex) המגן על הנתונים המשותפים.\n2.  משנה את המצב כך שהתנאי עשוי כעת להתקיים (לדוגמה, חוט יצרן מוסיף פריט לחיץ).\n3.  קורא לפונקציית `signal()` (כדי להעיר חוט אחד הממתין) או `broadcast()` (כדי להעיר את כל החוטים הממתינים) על משתנה התנאי. פעולה זו מעירה חוטים שנחסמו על משתנה התנאי.\n4.  משחרר את המנעול (mutex).\n\nהשימוש במנעול יחד עם משתנה התנאי חיוני כדי להבטיח עקביות בבדיקה ובשינוי של התנאי, ולמנוע תנאי מירוץ (race conditions) בין החוטים הממתינים לחוטים המאותתים. המנעול מגן על הגישה למצב המשותף, ומשתנה התנאי מספק את מנגנון ההמתנה והאיתות."
    },
    "difficulty_estimation": "Easy"
  }
}