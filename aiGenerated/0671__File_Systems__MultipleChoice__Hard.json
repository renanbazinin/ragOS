{
  "metadata": {
    "source": "ai_generated",
    "subject": "File Systems",
    "topic_hint": "File Systems",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-07 23:30:00",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 969,
      "output_tokens": 813,
      "total_tokens": 3967
    }
  },
  "question": {
    "id": 6,
    "type": "MultipleChoice",
    "topic": [
      "File Systems",
      "Journaling",
      "Data Consistency",
      "fsync"
    ],
    "content": {
      "text": "בהינתן מערכת קבצים מתזמנת (Journaling File System) הפועלת במצב `data=ordered` (כמו ext4/ext3 כברירת מחדל), תהליך מבצע את הפעולות הבאות:\n1.  פותח קובץ חדש (`open`).\n2.  כותב 10KB של נתונים לקובץ (`write`).\n3.  מבצע סנכרון (`fsync`).\n4.  מיד לאחר מכן, המערכת קורסת באופן פתאומי.\n\nלאחר אתחול המערכת מחדש, מהו המצב המובטח של הקובץ והנתונים?",
      "code_snippet": null,
      "options": [
        "א. הנתונים (10KB) מובטחים להימצא בקובץ, וכן כל המטא-דאטה (גודל קובץ, זמן שינוי) תהיה מעודכנת.",
        "ב. הקובץ עצמו מובטח להימצא, וכן כל המטא-דאטה שלו תהיה מעודכנת, אך אין ערובה שהנתונים (10KB) נכתבו לדיסק.",
        "ג. הנתונים (10KB) מובטחים להימצא בקובץ, אך המטא-דאטה עשויה להיות לא מעודכנת (לדוגמה, גודל הקובץ עשוי להיות 0).",
        "ד. הקובץ עשוי לא להימצא כלל, אך אם יימצא, המטא-דאטה שלו תהיה מעודכנת. הנתונים (10KB) אינם מובטחים.",
        "ה. כל התשובות האחרות אינן נכונות."
      ]
    },
    "sub_questions": null,
    "points": 5,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "א",
      "explanation": "במערכת קבצים מתזמנת (Journaling File System) במצב `data=ordered`, הסדר שבו נכתבים נתונים ומטא-דאטה לדיסק הוא קריטי. במצב זה, נתוני הקובץ נכתבים לדיסק *לפני* שהמטא-דאטה המתאימה (לדוגמה, גודל הקובץ, מיקומי בלוקים) נרשמת ליומן ונכתבת לדיסק. הקריאה ל-`fsync()` מבטיחה שכל הנתונים והמטא-דאטה המשויכים לקובץ (כולל כל עדכוני היומן) נדחפו בהצלחה לזיכרון יציב (הדיסק) לפני שהפונקציה חוזרת. לכן, אם המערכת קורסת *לאחר* ש-`fsync()` הסתיימה בהצלחה, מובטח שגם 10KB הנתונים וגם כל המטא-דאטה הרלוונטית (גודל קובץ, זמני שינוי, וכו') נשמרו באופן עקבי על הדיסק ויהיו זמינים לאחר התאוששות."
    },
    "difficulty_estimation": "Hard"
  }
}