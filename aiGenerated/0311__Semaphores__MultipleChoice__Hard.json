{
  "metadata": {
    "source": "ai_generated",
    "topic_hint": "Semaphores",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-07 20:42:31",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 970,
      "output_tokens": 656,
      "total_tokens": 5998
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "topic": [
      "Semaphores",
      "Synchronization",
      "Concurrency"
    ],
    "content": {
      "text": "נתונים שני תהליכונים (threads) וסמפור בינארי S המאותחל ל-0.\nלהלן הקוד של כל תהליכון:\n\n```c\n// גלובלי\nSemaphore S = 0; // בינארי\n\n// קוד תהליכון 1 (T1)\nvoid *thread1_func(void *arg) {\n    wait(S);\n    printf(\"A\\n\");\n    return NULL;\n}\n\n// קוד תהליכון 2 (T2)\nvoid *thread2_func(void *arg) {\n    printf(\"B\\n\");\n    signal(S);\n    return NULL;\n}\n```\n\nאיזו מהטענות הבאות נכונה **תמיד** לגבי פלט התוכנית?",
      "code_snippet": null,
      "options": [
        "א. הפלט \"A\" יודפס תמיד לפני הפלט \"B\".",
        "ב. הפלט \"B\" יודפס תמיד לפני הפלט \"A\".",
        "ג. התוכנית עלולה להיכנס למצב קיפאון (deadlock).",
        "ד. ייתכן שהפלט \"A\" יודפס לפני הפלט \"B\".",
        "ה. גם ב' וגם ג' נכונות."
      ]
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ב",
      "explanation": "הסמפור S מאותחל ל-0. תהליכון T1 מבצע wait(S) ראשון. מכיוון ש-S הוא 0, T1 ייחסם וימתין. תהליכון T2 יבצע printf(\"B\\n\") ולאחר מכן signal(S). פעולת ה-signal(S) תגרום ל-S לעלות ל-1 (או תבטל חסימה של תהליכון שהיה חסום על S). רק לאחר ש-T2 ביצע signal(S), תהליכון T1 יוכל להמשיך את פעולתו, כלומר רק לאחר ש-T2 הדפיס 'B'. לכן, הפלט 'B' יודפס תמיד לפני הפלט 'A'. אין מצב קיפאון מכיוון ש-T2 תמיד יבצע signal(S) ויאפשר ל-T1 להמשיך, גם אם T1 נחסם קודם לכן."
    },
    "difficulty_estimation": "Hard"
  }
}