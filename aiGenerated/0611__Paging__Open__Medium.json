{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Paging",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 23:00:43",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2072,
      "output_tokens": 1569,
      "total_tokens": 8237
    }
  },
  "question": {
    "id": 10,
    "type": "Open",
    "topic": [
      "Memory Management",
      "Virtual Memory",
      "Paging",
      "Two-level Paging"
    ],
    "content": {
      "text": "נתונה מערכת המשתמשת בזיכרון וירטואלי בגודל 16MB ובזיכרון פיזי בגודל 4MB. גודל דף הוא 4KB. המערכת מיישמת מנגנון דפדוף דו-שכבתי (two-level paging), כאשר כל טבלת דפים (גם השכבה החיצונית וגם הפנימית) מאוחסנת במסגרת דף בודדת. כל כניסה בטבלת הדפים (PTE) מכילה מספר מסגרת פיזית (PFN) ושלושה ביטים לבקרה (Valid, Dirty, Accessed), ומעוגלת לגודל מינימלי בחזקת 2 עבור אחסון.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": [
      {
        "id": "10.1",
        "text": "א. מה גודל כתובת וירטואלית וכתובת פיזית בביטים? מהו גודל ה-Offset, ה-VPN וה-PFN בביטים?\nכתובת וירטואלית: ____ ביטים\nכתובת פיזית: ____ ביטים\nOffset: ____ ביטים\nVPN: ____ ביטים\nPFN: ____ ביטים",
        "code_snippet": null,
        "options": null,
        "solution": {
          "is_present_in_file": true,
          "correct_option": null,
          "explanation": "1. גודל זיכרון וירטואלי 16MB = 2^24 בתים, לכן כתובת וירטואלית היא 24 ביטים.\nגודל זיכרון פיזי 4MB = 2^22 בתים, לכן כתובת פיזית היא 22 ביטים.\nגודל דף 4KB = 2^12 בתים, לכן ה-Offset הוא 12 ביטים.\nVPN (Virtual Page Number) = כתובת וירטואלית - Offset = 24 - 12 = 12 ביטים.\nPFN (Physical Frame Number) = כתובת פיזית - Offset = 22 - 12 = 10 ביטים."
        }
      },
      {
        "id": "10.2",
        "text": "ב. כמה ביטים מוקצים לכל אינדקס בטבלת הדפים (עבור השכבה החיצונית והפנימית)?\nאינדקס טבלה חיצונית: ____ ביטים\nאינדקס טבלה פנימית: ____ ביטים",
        "code_snippet": null,
        "options": null,
        "solution": {
          "is_present_in_file": true,
          "correct_option": null,
          "explanation": "2. כל כניסה בטבלת הדפים (PTE) מכילה PFN (10 ביטים) ועוד 3 ביטים לבקרה (Valid, Dirty, Accessed), סה\"כ 13 ביטים. המינימום בחזקת 2 לאחסון הוא 16 ביטים, כלומר 2 בתים לכל PTE.\nגודל דף הוא 4KB = 4096 בתים. מכיוון שכל טבלת דפים מאוחסנת במסגרת דף בודדת, טבלת דפים יכולה להכיל לכל היותר 4096 בתים / 2 בתים/כניסה = 2048 כניסות.\nלכן, כל אינדקס בטבלת הדפים (PT1 ו-PT2) יכול להיות בגודל log2(2048) = 11 ביטים.\nמכיוון שה-VPN הוא 12 ביטים, נחלק אותו ל-PT1 ו-PT2. כדי לנצל את גודל הדף ביעילות עבור טבלאות הדפים הפנימיות (שממפות את הדפים הפיזיים בפועל), נבחר ש-PT2 יהיה 11 ביטים. ואז PT1 יהיה 12 - 11 = 1 ביט.\nלכן, אינדקס טבלה חיצונית (PT1) הוא 1 ביט, ואינדקס טבלה פנימית (PT2) הוא 11 ביטים."
        }
      },
      {
        "id": "10.3",
        "text": "ג. כמה זיכרון פיזי תתפוסנה טבלאות הדפים עבור תהליך הממפה את כל המרחב הווירטואלי שלו?\nזיכרון כולל לטבלאות דפים: ____ KB",
        "code_snippet": null,
        "options": null,
        "solution": {
          "is_present_in_file": true,
          "correct_option": null,
          "explanation": "3. טבלת הדפים החיצונית (PT1) דורשת מסגרת דף אחת. היא מכילה 2^1 = 2 כניסות. גודלה בפועל הוא 2 כניסות * 2 בתים/כניסה = 4 בתים, אך היא תופסת מסגרת דף שלמה בזיכרון הפיזי (4KB).\nמכיוון שהתהליך ממפה את כל המרחב הווירטואלי, כל הכניסות ב-PT1 יהיו תקפות (valid) ויצביעו על טבלאות דפים פנימיות.\nכל אחת מ-2 הכניסות ב-PT1 מצביעה על טבלת דפים פנימית (PT2) נפרדת. כל טבלת PT2 תופסת מסגרת דף אחת בזיכרון הפיזי (4KB).\nלכן, סך הזיכרון הפיזי הנדרש עבור טבלאות הדפים הוא: 1 מסגרת דף עבור PT1 + 2 מסגרות דף עבור PT2 (אחת לכל כניסה תקפה ב-PT1) = 4KB + (2 * 4KB) = 4KB + 8KB = 12KB."
        }
      }
    ],
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": null
    },
    "difficulty_estimation": "Medium"
  }
}