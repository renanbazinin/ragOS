{
  "metadata": {
    "source": "ai_generated",
    "subject": "File Systems",
    "topic_hint": "File Systems and RAID",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-08 21:04:52",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1973,
      "output_tokens": 1742,
      "total_tokens": 6446
    }
  },
  "question": {
    "id": 1,
    "type": "Open",
    "topic": [
      "File Systems",
      "RAID"
    ],
    "content": {
      "text": "מנהל מערכת נדרש לבחור תצורת RAID עבור שרת חדש שיארח מסד נתונים קריטי. לרשותו עומדים 6 דיסקים קשיחים זהים לחלוטין. מנהל המערכת שוקל בין RAID 5 לבין RAID 10.\n\n1. תארו את ניצולת הדיסקים (disk utilization) ויכולת עמידות בפני תקלות (fault tolerance) עבור כל אחת מהתצורות (RAID 5 ו-RAID 10) בהינתן 6 דיסקים.\n2. השוו את מאפייני הביצועים הצפויים עבור פעולות קריאה וכתיבה בשתי התצורות. התייחסו במיוחד להבדלים בביצועים עבור כתיבות אקראיות קטנות (typical for databases) וקריאות סדרתיות גדולות.\n3. בהנחה שמערכת הקבצים שתשמש את השרת היא מערכת קבצים עם יומן (journaling file system, לדוגמה ext4), כיצד מנגנון הרישום ליומן (write-ahead logging) עשוי להשפיע על ביצועי הכתיבה של RAID 5 לעומת RAID 10?",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "**1. ניצולת דיסקים ועמידות בפני תקלות:**\n*   **RAID 5 (עם 6 דיסקים):** דיסק אחד מוקדש ל-parity. לכן, ניצולת הדיסקים היא `(N-1)/N = (6-1)/6 = 5/6` מהקיבולת הכוללת. כלומר, 5 דיסקים עבור נתונים, דיסק אחד עבור parity. יכול לעמוד בכשל של דיסק בודד אחד בלבד. אם דיסק שני כושל לפני שהדיסק הראשון שוקם, הנתונים יאבדו.\n*   **RAID 10 (עם 6 דיסקים):** דורש מספר זוגי של דיסקים. בתצורה זו, יוצרים 3 זוגות של דיסקי mirror (RAID 1), ואז מפזרים את הנתונים (striping) על פני שלושת ה-mirrors (RAID 0). כלומר, 3 דיסקים מוקדשים לנתונים ו-3 דיסקים ל-mirroring. ניצולת הדיסקים היא `N/2 = 6/2 = 3/6 = 1/2` מהקיבולת הכוללת. יכולת עמידות בפני תקלות טובה יותר: יכול לעמוד בכשל של עד 3 דיסקים, כל עוד הם אינם הדיסק וה-mirror שלו באותו זוג. לדוגמה, אם דיסק 1 נכשל, ודיסק 3 נכשל, ודיסק 5 נכשל (כל אחד מזוג אחר), המערכת תמשיך לתפקד. אם דיסק 1 ודיסק 2 (ה-mirror שלו) נכשלים, הנתונים באותו זוג יאבדו.\n\n**2. השוואת ביצועים (קריאה וכתיבה):**\n*   **RAID 5:**\n    *   **קריאה:** ביצועים טובים עבור קריאות סדרתיות וגם אקראיות, מכיוון שניתן לקרוא נתונים מכל N-1 דיסקים במקביל.\n    *   **כתיבה:** ביצועים נמוכים יותר עבור כתיבות קטנות ואקראיות (במיוחד) בגלל \"בעיית הכתיבה הקטנה\" (small write penalty). כל כתיבה דורשת 4 פעולות I/O: קריאת הנתונים הישנים, קריאת ה-parity הישן, כתיבת הנתונים החדשים, כתיבת ה-parity החדש (read-modify-write). זה עלול להוביל לצוואר בקבוק, במיוחד במסדי נתונים עם הרבה כתיבות אקראיות קטנות.\n*   **RAID 10:**\n    *   **קריאה:** ביצועים מצוינים עבור קריאות סדרתיות ואקראיות, מכיוון שניתן לקרוא מכל אחד מהדיסקים המכילים נתונים (3 דיסקים) או אפילו מכמה דיסקים במקביל בתוך ה-stripes.\n    *   **כתיבה:** ביצועים מצוינים עבור כתיבות, מכיוון שכל כתיבה דורשת רק שתי פעולות I/O: כתיבת הנתונים לדיסק אחד וכתיבת העותק לדיסק ה-mirror שלו. אין צורך לחשב parity או לקרוא נתונים ישנים. זה הופך אותו למתאים מאוד לסביבות עם עומס כתיבה גבוה כמו מסדי נתונים.\n\n**3. השפעת מערכת קבצים עם יומן (Journaling File System):**\nמערכות קבצים עם יומן מבצעות \"write-ahead logging\" – כל שינוי במטא-דאטה נרשם תחילה ליומן לפני שהוא נכתב למיקומו הסופי על הדיסק. רישום זה עצמו הוא פעולת כתיבה.\n*   **RAID 5:** מנגנון ה-read-modify-write של RAID 5 יבוא לידי ביטוי גם בכתיבות ליומן. כל כתיבה ליומן תהיה כפופה ל\"בעיית הכתיבה הקטנה\" של RAID 5, מה שיפגע בביצועי הכתיבה הכוללים של המערכת, במיוחד עבור מטא-דאטה. זה עלול להאט את כל פעולות ה-I/O המכילות שינויי מטא-דאטה.\n*   **RAID 10:** מכיוון ש-RAID 10 אינו סובל מ\"בעיית הכתיבה הקטנה\" וביצועי הכתיבה שלו מצוינים, הוא יתמודד טוב יותר עם עומס הכתיבה הנוסף שיוצר היומן. כתיבות ליומן יהיו מהירות יותר, מה שיאפשר למערכת הקבצים לתפקד ביעילות גבוהה יותר מבחינת ביצועי כתיבה כוללים, ויתרום לביצועים טובים יותר של מסד הנתונים.\n\nלסיכום, עבור שרת מסד נתונים קריטי עם 6 דיסקים, RAID 10 יספק ביצועי כתיבה (במיוחד אקראיות קטנות) ועמידות בפני תקלות טובים יותר, על חשבון ניצולת דיסקים נמוכה יותר בהשוואה ל-RAID 5. השילוב עם מערכת קבצים מיומנת רק מדגיש את היתרון של RAID 10 בביצועי כתיבה."
    },
    "difficulty_estimation": "Medium"
  }
}