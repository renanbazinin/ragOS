{
  "metadata": {
    "source": "ai_generated",
    "subject": "File Systems",
    "topic_hint": "File Systems and I/O",
    "requested_type": "Open",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-08 11:09:37",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 4088,
      "output_tokens": 2627,
      "total_tokens": 14666
    }
  },
  "question": {
    "id": 1,
    "type": "Open",
    "topic": [
      "File Systems",
      "I/O"
    ],
    "content": {
      "text": "נתונה מערכת קבצים חדשה בשם ExtentFS. מערכת קבצים זו משתמשת במבנה inode בדומה למערכות קבצים מסורתיות, אך לניהול בלוקי הנתונים (DATA blocks) היא משתמשת בגישת אקסטנטים (Extents).\nכל אקסטנט מוגדר על ידי מספר בלוק התחלה ואורך (מספר הבלוקים הרצופים באקסטנט).\nמבנה ה-inode של קובץ כולל:\n*   4 מתארי אקסטנטים ישירים (Direct Extent Descriptors).\n*   מצביע אחד (4 בתים) לבלוק אקסטנטים עקיף (Indirect Extent Block). בלוק זה מכיל רשימה של מתארי אקסטנטים.\nנתונים נוספים:\n*   גודל בלוק: 4KB.\n*   גודל מתאר אקסטנט: 6 בתים (4 בתים למספר בלוק התחלה, 2 בתים לאורך האקסטנט).\n*   גודל מבנה ה-inode (כולל מתארי האקסטנטים) הוא 256 בתים (נאגר בבלוק inode).\n*   מהירות סיבוב הדיסק: 7200 RPM.\n*   זמן Seek ממוצע: 10ms.\n*   קצב העברה מקסימלי: 20 MB/s.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": [
      {
        "id": "1.1",
        "text": "מהו הגודל המקסימלי של קובץ (בבתים) הנתמך על ידי מערכת קבצים זו? פרטו את החישובים.",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "1.2",
        "text": "משתמש ביצע פעולת קריאה של 2MB מתוך קובץ גדול במערכת ExtentFS. הקובץ בגודל 100MB ומתחיל בבלוק DATA מספר 1000. ידוע שהקובץ מורכב מאקסטנטים בגודל מקסימלי (כלומר כל אקסטנט הוא באורך 65535 בלוקים), למעט האקסטנט האחרון. פעולת הקריאה היא מתחילת הקובץ. נתון שאף cache אינו מכיל מידע רלוונטי לביצוע הפעולה.\nמה הזמן המינימלי שתיקח פעולה זו? יש לפרט את כל הבלוקים שנדרש לקרוא ולנמק כל גישה. ניתן להניח כל תרחיש שיוביל לזמן המינימלי.",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "1.3",
        "text": "הסבירו בקצרה שני יתרונות ושני חסרונות של גישת Extent-based allocation (כפי שתוארה לעיל) בהשוואה לגישת block-by-block allocation מסורתית (כמו ב-ext2/3/4) בהקשר של ביצועי I/O וניהול מקום, עבור קבצים גדולים וקטנים כאחד.",
        "code_snippet": null,
        "options": null
      }
    ],
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "פתרון לשאלה:\n\n**סעיף 1.1: גודל קובץ מקסימלי**\n*   גודל בלוק: 4KB = 4096 בתים.\n*   גודל מתאר אקסטנט: 6 בתים (4 בתים לבלוק התחלה, 2 בתים לאורך).\n*   מספר מתארי אקסטנטים בבלוק עקיף: בלוק בגודל 4KB יכול להכיל 4096 בתים / 6 בתים למתאר = 682 מתארים (עיגול למטה).\n*   אורך אקסטנט מקסימלי: 2^16 - 1 = 65535 בלוקים.\n\nה-inode מכיל 4 מתארי אקסטנטים ישירים ומצביע אחד לבלוק אקסטנטים עקיף.\n*   מספר בלוקים ממתארים ישירים: 4 אקסטנטים * 65535 בלוקים לאקסטנט = 262,140 בלוקים.\n*   מספר בלוקים ממתארים עקיפים: 682 מתארים בבלוק העקיף * 65535 בלוקים לאקסטנט = 44,700,070 בלוקים.\n\nסה\"כ בלוקים בקובץ = 262,140 + 44,700,070 = 44,962,210 בלוקים.\nגודל קובץ מקסימלי בבתים = 44,962,210 בלוקים * 4096 בתים/בלוק = 184,164,808,960 בתים.\n\n**סעיף 1.2: זמן קריאה מינימלי עבור 2MB**\nפעולת קריאה של 2MB מקובץ בגודל 100MB, מתחילת הקובץ. 2MB = 512 בלוקים (2MB / 4KB/בלוק).\nהקובץ מורכב מאקסטנטים בגודל מקסימלי (65535 בלוקים).\nהאקסטנט הישיר הראשון מכסה 65535 בלוקים * 4KB/בלוק = 262,140KB = 256MB. מכאן שכל 2MB הנדרשים לקריאה נמצאים בתוך האקסטנט הישיר הראשון.\n\nבלוקים הנדרשים לקריאה:\n1.  **בלוק ה-inode של הקובץ**: נדרש לקרוא את בלוק ה-inode (המכיל את ה-inode של הקובץ) כדי למצוא את מתאר האקסטנט הראשון. זהו בלוק מטא-דאטה.\n2.  **בלוקי הנתונים (DATA)**: 512 בלוקים של נתונים, החל מבלוק 1000, כפי שמצוין במתאר האקסטנט הראשון. מכיוון שמדובר באקסטנט, בלוקים אלו רצופים פיזית על הדיסק.\n\nסה\"כ בלוקים לקריאה: 1 (בלוק inode) + 512 (בלוקי נתונים) = 513 בלוקים.\nסה\"כ נתונים לקריאה: 4KB (בלוק inode) + 2MB (נתונים) = 2052KB.\n\nלחישוב הזמן המינימלי, נניח שהבלוקים הנדרשים (בלוק ה-inode ו-512 בלוקי הנתונים) ממוקמים ברצף פיזי על הדיסק באופן אופטימלי, כך שנדרש רק Seek אחד ו-Rotational Latency אחד עבור כלל הפעולה, ולאחר מכן העברה רציפה של כל הנתונים.\n\n*   זמן Seek ממוצע: 10ms.\n*   זמן Rotational Latency ממוצע: (1 / 7200 RPM) * 0.5 (חצי סיבוב בממוצע) = (1/120 סיבובים/שנייה) * 0.5 ≈ 4.167ms.\n*   זמן העברת נתונים (2052KB): (2052KB / 20MB/s) = (2052 * 1024 בתים) / (20 * 1024 * 1024 בתים/שנייה) = 2052 / (20 * 1024) שניות ≈ 0.100195 שניות ≈ 100.195ms.\n\nסה\"כ זמן מינימלי = זמן Seek + זמן Rotational Latency + זמן העברה = 10ms + 4.167ms + 100.195ms = **114.362ms**.\n\n**סעיף 1.3: יתרונות וחסרונות של Extent-based allocation**\n\n**יתרונות:**\n1.  **שיפור בביצועי I/O רציפים**: כאשר קובץ מאוחסן באקסטנטים, הבלוקים שלו רצופים פיזית על הדיסק. זה מפחית באופן דרמטי את הצורך ב-seek וב-rotational latency בין בלוקים בעת קריאה או כתיבה רציפה, מה שמוביל לשיפור משמעותי בקצב העברת הנתונים עבור קבצים גדולים.\n2.  **הפחתת תקורה (overhead) של מטא-דאטה**: במקום לשמור מצביע לכל בלוק נתונים בנפרד (כמו בגישת block-by-block), מתאר אקסטנט אחד יכול לייצג אלפי בלוקים רצופים. זה חוסך מקום ב-inode ובבלוקי המצביעים, במיוחד עבור קבצים גדולים מאוד, ומפשט את מבנה ה-inode.\n\n**חסרונות:**\n1.  **מורכבות בהקצאת מקום**: מציאת בלוקים רצופים גדולים מספיק (אקסטנטים) לרוב מורכבת ויקרה יותר מאשר מציאת בלוק פנוי יחיד. זה יכול להוביל לביצועים פחות טובים בפעולות יצירה והרחבת קבצים, במיוחד במערכות עמוסות עם פרגמנטציה רבה של המקום הפנוי.\n2.  **פרגמנטציה פנימית פוטנציאלית**: אם מערכת הקבצים מקצה אקסטנט בגודל מסוים, אך הקובץ אינו ממלא את כל האקסטנט (לדוגמה, קובץ קטן או קובץ שגדל בהדרגה), השטח הנותר באקסטנט מבוזבז (פרגמנטציה פנימית). זה בולט במיוחד אם האקסטנטים מוקצים בגדלים קבועים וגדולים."
    },
    "difficulty_estimation": "Hard"
  }
}