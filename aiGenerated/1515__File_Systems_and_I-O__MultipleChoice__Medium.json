{
  "metadata": {
    "source": "ai_generated",
    "subject": "File Systems",
    "topic_hint": "File Systems and I/O",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-08 11:00:13",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1233,
      "output_tokens": 706,
      "total_tokens": 3729
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "topic": [
      "File Systems",
      "I/O",
      "System Calls",
      "Caching"
    ],
    "content": {
      "text": "נתונה תוכנית המבצעת כתיבה לקובץ באמצעות קריאת המערכת `write()`. איזו מהטענות הבאות נכונה לגבי עמידות הנתונים (data persistence) והביצועים?",
      "code_snippet": null,
      "options": [
        "א. קריאת המערכת `write()` מבטיחה שהנתונים נכתבו לדיסק באופן מיידי.",
        "ב. נתונים שנכתבו באמצעות `write()` אך טרם סונכרנו עם הדיסק באמצעות `fsync()` עלולים לאבד במקרה של קריסת מערכת ההפעלה.",
        "ג. קריאת המערכת `fsync()` מבטיחה רק שהנתונים נמצאים בזיכרון ה-cache של בקר הדיסק, ולא בהכרח על פלטות הדיסק הפיזיות.",
        "ד. שימוש בדגל `O_SYNC` בעת פתיחת הקובץ יגרום לביצועים מהירים יותר של `write()` מכיוון שהוא מונע גישה מיותרת לדיסק.",
        "ה. אף אחת מהתשובות האחרות אינה נכונה."
      ]
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ב",
      "explanation": "הסבר: קריאת המערכת `write()` כותבת את הנתונים לרוב ל-page cache בזיכרון הראשי של מערכת ההפעלה. נתונים אלו אינם מובטחים להיכתב לדיסק באופן מיידי. רק קריאה מוצלחת ל-`fsync()` (או סגירת הקובץ, במקרים מסוימים, או כתיבה מסונכרנת עם `O_SYNC`) מבטיחה שהנתונים נדחפו מה-page cache אל הדיסק הפיזי (או לפחות אל אחסון יציב כלשהו). לכן, אם המערכת קורסת לפני ש-`fsync()` נקרא, הנתונים עלולים לאבד. אפשרות א' שגויה מכיוון ש-`write()` אינה מבטיחה כתיבה מיידית לדיסק. אפשרות ג' שגויה מכיוון ש-`fsync()` מיועד להבטיח כתיבה לאחסון יציב, מעבר ל-cache של בקר הדיסק (לפחות ברוב המקרים ובכוונת המפתחים). אפשרות ד' שגויה מכיוון ש-`O_SYNC` מאלץ כתיבה מסונכרנת לדיסק, מה שגורם לביצועים איטיים יותר ולא מהירים יותר."
    },
    "difficulty_estimation": "Medium"
  }
}