{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Virtual Memory",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 22:32:49",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1964,
      "output_tokens": 1860,
      "total_tokens": 8766
    }
  },
  "question": {
    "id": 10,
    "type": "Open",
    "topic": [
      "Virtual Memory",
      "Paging",
      "Memory Management",
      "TLB"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה עם זיכרון וירטואלי בגודל 2GB, זיכרון פיזי בגודל 256MB, וגודל דף של 8KB. טבלת הדפים ממומשת באופן היררכי, כאשר כל דף של טבלת הדפים יכול להכיל 1024 רשומות (PTEs). גודל כל רשומת PTE הוא 8 בתים.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": [
      {
        "id": "10.1",
        "text": "מהם הגדלים של ה-VPN וה-PFN (בביטים)?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.2",
        "text": "כמה רמות של טבלת דפים נדרשות במערכת זו? כמה ביטים בכתובת הווירטואלית משמשים לאינדקס בכל רמה?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.3",
        "text": "תהליך מסוים משתמש ב-100MB של זיכרון וירטואלי (מפוזר באופן אקראי). כמה דפים של טבלת דפים (כולל כל הרמות) יוקצו עבור מיפוי זיכרון זה, במקרה המקסימלי? (הנח שדף טבלת הדפים ברמה העליונה כבר קיים).",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.4",
        "text": "תיאור מצב: המעבד מנסה לגשת לכתובת וירטואלית מסוימת. מתרחש TLB miss, ולאחר מכן מתרחש page fault עבור הדף המבוקש (הדף לא נמצא בזיכרון הפיזי וצריך להיטען מהדיסק). לאחר שהדף נטען, הגישה לנתונים מתבצעת בהצלחה. כמה גישות זיכרון (ל-RAM) בוצעו בסך הכל בתרחיש זה, עד לגישה לנתונים? פרט כל גישה.",
        "code_snippet": null,
        "options": null
      }
    ],
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "פתרון:\n\n**סעיף א':**\n*   **זיכרון וירטואלי (VA)**: 2GB = 2^31 בתים, לכן כתובת וירטואלית היא באורך 31 ביטים.\n*   **גודל דף**: 8KB = 2^13 בתים, לכן היסט (Offset) הוא באורך 13 ביטים.\n*   **VPN**: אורך VA - אורך Offset = 31 - 13 = 18 ביטים.\n*   **זיכרון פיזי (PA)**: 256MB = 2^28 בתים, לכן כתובת פיזית היא באורך 28 ביטים.\n*   **PFN**: אורך PA - אורך Offset = 28 - 13 = 15 ביטים.\n\n**סעיף ב':**\n*   **מספר ביטים לאינדקס בכל רמה**: כל דף טבלה יכול להכיל 1024 רשומות. 1024 = 2^10, לכן כל אינדקס ברמה הוא באורך 10 ביטים.\n*   **מספר רמות**: ה-VPN הוא באורך 18 ביטים. מכיוון שכל רמה משתמשת ב-10 ביטים, נדרשות 2 רמות:\n    *   רמה 1 תשתמש ב-10 ביטים (מתוך ה-18 של ה-VPN).\n    *   רמה 2 תשתמש ב-8 הביטים הנותרים (18 - 10 = 8).\n*   לכן, נדרשות 2 רמות. רמה ראשונה משתמשת ב-10 ביטים, רמה שנייה משתמשת ב-8 ביטים.\n\n**סעיף ג':**\n*   **מספר דפים וירטואליים המשמשים על ידי התהליך**: 100MB / 8KB = (100 * 1024 KB) / 8 KB = 12,800 דפים.\n*   **מספר דפי טבלה ברמה 2**: כל דף טבלה ברמה 2 יכול למפות 1024 דפים וירטואליים (בהתבסס על הנתון שכל דף טבלה מכיל 1024 רשומות). לכן, נצטרך ceil(12,800 / 1024) = ceil(12.5) = 13 דפי טבלה ברמה 2.\n*   **מספר דפי טבלה ברמה 1**: מכיוון שדף טבלת הדפים ברמה העליונה (רמה 1) כבר קיים (לפי ההנחה), וכל דף כזה יכול להכיל 1024 רשומות, 13 דפי הטבלה ברמה 2 יצביעו מתוך דף טבלה אחד בלבד ברמה 1. לכן, לא יוקצו דפי טבלה נוספים ברמה 1.\n*   **סה\"כ דפים של טבלת דפים שיוקצו**: 13 דפים (עבור רמה 2).\n\n**סעיף ד':**\nבתרחיש זה יבוצעו 4 גישות זיכרון (ל-RAM) בסך הכל:\n1.  **קריאת PTE מרמה 1 בטבלת הדפים**: בעקבות TLB Miss, ה-MMU מתחיל בחיפוש טבלת הדפים. הגישה הראשונה היא לדף טבלת הדפים ברמה 1 כדי לקרוא את ה-PTE המתאים (1 גישת RAM).\n2.  **קריאת PTE מרמה 2 בטבלת הדפים**: ה-PTE מרמה 1 מכיל כתובת לדף טבלת דפים ברמה 2. ה-MMU ניגש לדף זה כדי לקרוא את ה-PTE הסופי (1 גישת RAM).\n    *   בשלב זה מתגלה Page Fault (ה-PTE מרמה 2 מסומן כלא תקין/לא נמצא בזיכרון הפיזי).\n3.  **כתיבת PTE מעודכן לרמה 2 בטבלת הדפים**: מערכת ההפעלה מטפלת ב-Page Fault: טוענת את הדף הנדרש מהדיסק לזיכרון הפיזי, ואז מעדכנת את ה-PTE המתאים ברמה 2 (מגדירה אותו כתקף ומכניסה את ה-PFN החדש). עדכון זה הוא כתיבה ל-RAM (1 גישת RAM).\n4.  **גישה לנתונים עצמם בזיכרון הפיזי**: לאחר שה-PTE עודכן והדף נטען, ה-MMU מבצע שוב את התרגום וניגש לכתובת הפיזית שהתקבלה כדי לגשת לנתונים המבוקשים (1 גישת RAM)."
    },
    "difficulty_estimation": "Medium"
  }
}