{
  "metadata": {
    "source": "ai_generated",
    "topic_hint": "Semaphores",
    "requested_type": "Open",
    "requested_difficulty": "Easy",
    "generated_at": "2026-02-07 20:43:52",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2862,
      "output_tokens": 1021,
      "total_tokens": 5147
    },
    "subject": "Concurrency"
  },
  "question": {
    "id": 1,
    "type": "Open",
    "topic": [
      "Semaphores",
      "Concurrency",
      "Mutual Exclusion"
    ],
    "content": {
      "text": "הסבירו כיצד ניתן להשתמש בסמפור בינארי (binary semaphore) כדי להבטיח מניעה הדדית (mutual exclusion) עבור קטע קריטי (critical section) בין מספר תהליכונים (threads) המנסים לגשת אליו. תארו את הפעולות הנדרשות ואת הערך ההתחלתי של הסמפור.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "סמפור בינארי הוא סמפור שיכול לקבל רק את הערכים 0 או 1. הוא משמש בדרך כלל למניעה הדדית (mutual exclusion), כלומר להבטיח שרק תהליכון אחד (או תהליך) יוכל לגשת למשאב משותף או להיכנס לקטע קריטי בנקודת זמן נתונה.\n\nכדי להבטיח מניעה הדדית לקטע קריטי באמצעות סמפור בינארי, נבצע את השלבים הבאים:\n1.  **אתחול הסמפור**: ניצור סמפור בינארי אחד ונאתחל אותו לערך 1. ערך זה מציין שהקטע הקריטי פנוי וזמין לכניסה.\n2.  **כניסה לקטע הקריטי**: לפני הכניסה לקטע הקריטי, כל תהליכון המעוניין לגשת אליו יבצע את פעולת ה-`wait()` (או `P()`) על הסמפור. פעולה זו בודקת את ערך הסמפור:\n    *   אם ערך הסמפור הוא 1, הוא מוקטן ל-0, והתהליכון רשאי להיכנס לקטע הקריטי.\n    *   אם ערך הסמפור הוא 0, זה אומר שהקטע הקריטי תפוס על ידי תהליכון אחר. במקרה זה, התהליכון המנסה להיכנס נחסם (מוכנס לתור המתנה) עד שערך הסמפור יחזור ל-1.\n3.  **יציאה מהקטע הקריטי**: לאחר שהתהליכון סיים את עבודתו בתוך הקטע הקריטי, הוא יבצע את פעולת ה-`signal()` (או `V()`) על הסמפור. פעולה זו מגדילה את ערך הסמפור ב-1 (מחזירה אותו ל-1). אם היו תהליכונים חסומים הממתינים על הסמפור, אחד מהם ישוחרר (יועבר למצב 'מוכן') ויוכל לנסות להיכנס לקטע הקריטי.\n\n**דוגמה קוד (C/C++):**\n```c\nsemaphore mutex = 1; // אתחול הסמפור הבינארי ל-1\n\nvoid worker_thread() {\n    // ... עבודה אחרת שהתהליכון מבצע ...\n\n    wait(mutex); // נסה להיכנס לקטע הקריטי (P(mutex))\n\n    // ===================================\n    // קטע קריטי: גישה למשאב משותף\n    // רק תהליכון אחד יכול להיות כאן בו-זמנית\n    // ===================================\n\n    signal(mutex); // צא מהקטע הקריטי (V(mutex))\n\n    // ... עבודה אחרת שהתהליכון מבצע ...\n}\n```\nבצורה זו, הסמפור `mutex` משמש כמנעול. כאשר ערכו 1, המנעול פתוח. כאשר תהליכון נכנס, הוא 'נועל' את המנעול (מציב את הערך 0). תהליכונים אחרים שמגיעים למנעול 'נעול' נחסמים. כאשר התהליכון היוצא 'פותח' את המנעול (מציב את הערך 1), תהליכון חסום אחד יכול להיכנס."
    },
    "difficulty_estimation": "Easy"
  }
}