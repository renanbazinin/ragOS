{
  "metadata": {
    "source": "ai_generated",
    "topic_hint": "Deadlocks",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 21:16:14",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 3559,
      "output_tokens": 1562,
      "total_tokens": 7471
    },
    "subject": "Concurrency"
  },
  "question": {
    "id": 8,
    "type": "Open",
    "topic": [
      "Deadlocks",
      "Resource Management",
      "Concurrency"
    ],
    "content": {
      "text": "נניח שיש לנו מערכת עם שני סוגי משאבים: משאב A ומשאב B. במערכת קיימים סך הכל N יחידות ממשאב A ו-M יחידות ממשאב B.\nישנם K תהליכים (P1, P2, ..., PK) המתחרים על המשאבים. כל תהליך Pi דורש a_i יחידות ממשאב A ו-b_i יחידות ממשאב B כדי להשלים את ריצתו. תהליכים מבקשים יחידה אחת של משאב בכל פעם.\n\n1. תארו תרחיש ספציפי (עם דוגמה מספרית קטנה, למשל N=3, M=3, K=2) שבו עלול להתרחש קיפאון (deadlock) במערכת זו. הסבירו מדוע זהו קיפאון תוך התייחסות לארבעת התנאים ההכרחיים לקיפאון.\n2. הציעו אסטרטגיה פשוטה למניעת קיפאון במערכת זו. הסבירו איזו מבין ארבעת התנאים ההכרחיים לקיפאון האסטרטגיה שלכם מונעת, וכיצד היא עושה זאת.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "חלק 1: תרחיש קיפאון\nנניח N=3 יחידות של A, M=3 יחידות של B, ושני תהליכים P1 ו-P2.\nP1 דורש 2 יחידות A ו-2 יחידות B.\nP2 דורש 2 יחידות A ו-2 יחידות B.\n\nתרחיש קיפאון אפשרי:\n1.  P1 מבקש ומקבל יחידה אחת של A. (A_available=2, B_available=3)\n2.  P2 מבקש ומקבל יחידה אחת של B. (A_available=2, B_available=2)\n3.  P1 מבקש ומקבל יחידה אחת של B. (A_available=2, B_available=1)\n4.  P2 מבקש ומקבל יחידה אחת של A. (A_available=1, B_available=1)\n\nבשלב זה:\n*   P1 מחזיק ב-1 יחידת A ו-1 יחידת B. הוא זקוק לעוד 1 יחידת A ועוד 1 יחידת B.\n*   P2 מחזיק ב-1 יחידת A ו-1 יחידת B. הוא זקוק לעוד 1 יחידת A ועוד 1 יחידת B.\n\nהמשאבים הזמינים: 1 יחידת A, 1 יחידת B.\nאף תהליך לא יכול להמשיך:\n*   P1 לא יכול לקבל עוד A (זמין 1, P1 צריך 1) ולא יכול לקבל עוד B (זמין 1, P1 צריך 1).\n*   P2 לא יכול לקבל עוד A (זמין 1, P2 צריך 1) ולא יכול לקבל עוד B (זמין 1, P2 צריך 1).\n\nהתייחסות לארבעת התנאים ההכרחיים לקיפאון:\n1.  מניעה הדדית (Mutual Exclusion): מתקיים. יחידות המשאבים אינן ניתנות לחלוקה (non-shareable) – יחידת A או B יכולה להיות מוחזקת על ידי תהליך אחד בלבד בכל רגע נתון.\n2.  החזקה והמתנה (Hold and Wait): מתקיים. P1 מחזיק יחידת A ויחידת B וממתין ליחידות נוספות. P2 מחזיק יחידת A ויחידת B וממתין ליחידות נוספות.\n3.  אי-דריסה (No Preemption): מתקיים. המשאבים שהוקצו לתהליך אינם נלקחים ממנו בכוח; הם משוחררים רק מרצון על ידי התהליך המחזיק בהם.\n4.  המתנה מעגלית (Circular Wait): מתקיים. P1 ממתין למשאבים ש-P2 מחזיק, ו-P2 ממתין למשאבים ש-P1 מחזיק, ויוצר מעגל המתנה.\n\nחלק 2: אסטרטגיה למניעת קיפאון\nאסטרטגיה פשוטה למניעת קיפאון היא למנוע את תנאי ה\"החזקה והמתנה\" (Hold and Wait).\n\nכיצד?\nנחייב כל תהליך לבקש את כל המשאבים הנדרשים לו (a_i יחידות A ו-b_i יחידות B) בבת אחת בתחילת ריצתו. אם המערכת לא יכולה להקצות את כל המשאבים הנדרשים לתהליך באותו רגע, התהליך לא יקבל אף משאב וימתין (ללא החזקת משאבים) עד שכל המשאבים יהיו זמינים.\n\nהסבר:\nבגישה זו, תהליך לעולם לא יחזיק במשאבים כלשהם ובו זמנית ימתין למשאבים נוספים. הוא יקבל את כל משאביו מראש, או שימתין ללא החזקת משאבים. בכך, אנו מונעים את התנאי \"החזקה והמתנה\", ולכן מונעים קיפאון.\nלדוגמה, בתרחיש הקודם: P1 יבקש 2A ו-2B. אם זמינים, יקבל וירוץ. אם P1 קיבל, אז נותרו 1A ו-1B. P2 יבקש 2A ו-2B, אך לא יוכל לקבל אותם (כי אין מספיק). P2 ימתין עד ש-P1 יסיים וישחרר את משאביו, ורק אז P2 יוכל לקבל את משאביו ולרוץ. בדרך זו, אין קיפאון."
    },
    "difficulty_estimation": "Medium"
  }
}