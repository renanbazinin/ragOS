{
  "metadata": {
    "source": "ai_generated",
    "topic_hint": "Processes",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 18:17:00",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 3602,
      "output_tokens": 1035,
      "total_tokens": 7264
    }
  },
  "question": {
    "id": 1,
    "type": "Open",
    "topic": [
      "Processes",
      "fork",
      "Memory Isolation"
    ],
    "content": {
      "text": "לפניכם קטע קוד בשפת C המשתמש בקריאה למערכת fork. הניחו שכל הקריאות למערכת מצליחות ושאין תהליכי זומבי הממתינים במערכת.",
      "code_snippet": "#include <stdio.h>\n#include <unistd.h>\n#include <sys/types.h>\n\nint main() {\n    int x = 5;\n    if (fork() == 0) {\n        x += 10;\n        if (fork() == 0) {\n            x += 10;\n        }\n    } else {\n        x -= 5;\n        fork();\n    }\n    printf(\"%d\\n\", x);\n    return 0;\n}",
      "options": null
    },
    "sub_questions": [
      {
        "id": "1.1",
        "text": "כמה תהליכים נוצרו סך הכל במהלך ריצת התוכנית (כולל התהליך הראשי)? הציגו את עץ התהליכים שנוצר.",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "1.2",
        "text": "מהם הערכים השונים שיודפסו למסך? הסבירו עבור כל ערך איזה תהליך מדפיס אותו וכיצד הגיע לערך זה.",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "1.3",
        "text": "האם שינוי הערך של x בתהליך אחד משפיע על הערך של x בתהליך אחר? הסבירו מדוע, תוך התייחסות למנגנון ניהול הזיכרון של תהליכים במערכת ההפעלה.",
        "code_snippet": null,
        "options": null
      }
    ],
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "1.1: סך הכל נוצרו 4 תהליכים. התהליך הראשי (P0) יוצר תהליך בן (P1). P1 יוצר תהליך נכד (P2). לאחר מכן, התהליך הראשי (P0) יוצר תהליך בן נוסף (P3). עץ התהליכים: P0 הוא השורש, בניו הם P1 ו-P3, ו-P2 הוא הבן של P1.\n\n1.2: הערכים שיודפסו הם 25, 15, 0, 0 (הסדר עשוי להשתנות בהתאם לתזמון):\n- תהליך P2 (הנכד): נכנס לבלוק ה-if הראשון של אביו (x=15) ולבלוק ה-if השני שלו עצמו (x=25) ומדפיס 25.\n- תהליך P1 (הבן הראשון): נכנס לבלוק ה-if הראשון (x=15), מסיים את ה-if הפנימי ומדפיס 15.\n- תהליך P0 (האב): נכנס לבלוק ה-else, מעדכן ל-x=0, מבצע fork ומדפיס 0.\n- תהליך P3 (הבן השני): נוצר בתוך ה-else של P0, יורש את הערך x=0 ומדפיס 0.\n\n1.3: לא, שינוי הערך אינו משפיע. לכל תהליך יש מרחב כתובות וירטואלי נפרד (Address Space). בעת ביצוע fork, מערכת ההפעלה יוצרת העתק של מרחב הכתובות עבור הבן. למרות שהתהליכים משתמשים באותה כתובת וירטואלית עבור x, הן ממופות למסגרות שונות בזיכרון הפיזי (או משוכפלות בעת כתיבה במנגנון Copy-on-Write), ולכן השינויים מבודדים."
    },
    "difficulty_estimation": "Medium"
  }
}