{
  "metadata": {
    "source": "ai_generated",
    "topic_hint": "Threads",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-07 18:36:13",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 968,
      "output_tokens": 736,
      "total_tokens": 3104
    }
  },
  "question": {
    "id": 10,
    "type": "MultipleChoice",
    "topic": [
      "Threads",
      "Processes",
      "fork",
      "Synchronization"
    ],
    "content": {
      "text": "נתון תהליך המכיל שלושה חוטים (threads) הפועלים במקביל במרחב המשתמש (POSIX threads). חוט א' נועל Mutex גלובלי ומתחיל בביצוע חישוב ארוך. לפני שחוט א' מספיק לשחרר את הנעילה, חוט ב' מבצע קריאה למערכת מסוג fork(). איזה מההיגדים הבאים מתאר בצורה המדויקת ביותר את מצב התהליך הבן (Child Process) שנוצר מיד לאחר הקריאה?",
      "code_snippet": null,
      "options": [
        "א. בתהליך הבן ייווצרו שלושה חוטים המקבילים לאלו שבמקור, וחוט א' בבן ימשיך להחזיק ב-Mutex.",
        "ב. בתהליך הבן ייווצר רק חוט אחד (העתק של חוט ב'), וה-Mutex יהיה במצב נעול (locked) מבלי שיהיה חוט קיים שיוכל לשחררו.",
        "ג. בתהליך הבן ייווצר רק חוט אחד (העתק של חוט ב'), ומערכת ההפעלה תזהה שהחוט שנעל את ה-Mutex אינו קיים ותשחרר את הנעילה אוטומטית.",
        "ד. הקריאה ל-fork() תיחסם על ידי מערכת ההפעלה עד שכל ה-Mutexes במרחב הכתובות ישוחררו על ידי החוטים המחזיקים בהם.",
        "ה. בתהליך הבן ייווצר רק חוט אחד (העתק של חוט ב'), וכל ה-Mutexes בזיכרון של הבן יאותחלו למצב פתוח (unlocked) כברירת מחדל."
      ]
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ב",
      "explanation": "לפי תקן POSIX, כאשר תהליך מרובה חוטים קורא ל-fork(), רק החוט שביצע את הקריאה מועתק לתהליך הבן. שאר החוטים אינם קיימים בבן. עם זאת, מרחב הכתובות מועתק במלואו, כולל המצב של משתנים גלובליים ואובייקטי סנכרון (כמו Mutexes). מכיוון שה-Mutex הועתק כשהוא במצב 'נעול' והחוט שאמור לשחרר אותו (חוט א') לא הועתק לבן, ה-Mutex יישאר נעול לצמיתות בתוך התהליך הבן. מצב זה נחשב למסוכן ועלול להוביל ל-Deadlock בתהליך הבן."
    },
    "difficulty_estimation": "Hard"
  }
}