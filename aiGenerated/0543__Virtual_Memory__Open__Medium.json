{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Virtual Memory",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 22:33:14",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1964,
      "output_tokens": 1451,
      "total_tokens": 7897
    }
  },
  "question": {
    "id": 10,
    "type": "Open",
    "topic": [
      "Virtual Memory",
      "Paging",
      "Memory Management",
      "TLB"
    ],
    "content": {
      "text": "נתונה מערכת עם זיכרון וירטואלי בגודל 4GB, זיכרון פיזי בגודל 1GB, וגודל דף של 4KB. רשומת טבלת דפים (PTE) היא בגודל 4 בתים. במערכת קיימת יחידת TLB עם 128 רשומות והיא 4-way set associative.\n\nתהליך מבצע גישה סדרתית לכל הבתים במערך בגודל 1MB, החל מתחילת המערך. נניח שהמערך אינו טעון בזיכרון הפיזי ואינו נמצא ב-TLB בתחילת הגישה.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": [
      {
        "id": "10.1",
        "text": "מהם הגדלים של ה-VPN וה-PFN?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.2",
        "text": "כמה רמות דרושות לטבלת הדפים במערכת זו? נמק.",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.3",
        "text": "כמה Page Faults יתרחשו במהלך גישה זו למערך? נמק.",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.4",
        "text": "כמה TLB Misses יתרחשו במהלך גישה זו למערך? נמק.",
        "code_snippet": null,
        "options": null
      }
    ],
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "1.  **חישוב VPN ו-PFN:**\n    *   גודל זיכרון וירטואלי: 4GB = 2^32 בתים. לכן, כתובת וירטואלית היא 32 ביטים.\n    *   גודל דף: 4KB = 2^12 בתים. לכן, ההיסט (Offset) הוא 12 ביטים.\n    *   גודל VPN = כתובת וירטואלית - היסט = 32 - 12 = 20 ביטים.\n    *   גודל זיכרון פיזי: 1GB = 2^30 בתים. לכן, כתובת פיזית היא 30 ביטים.\n    *   גודל PFN = כתובת פיזית - היסט = 30 - 12 = 18 ביטים.\n\n2.  **מספר רמות לטבלת הדפים:**\n    *   ישנם 2^20 דפים וירטואליים (מכיוון ש-VPN הוא 20 ביטים).\n    *   גודל רשומת טבלת דפים (PTE) הוא 4 בתים.\n    *   בכל דף טבלת דפים (שהוא בגודל 4KB) יכולות להיכנס 4KB / 4 בתים/רשומה = 1024 רשומות (2^10 רשומות).\n    *   לכן, כל רמה בטבלת הדפים יכולה למפות 10 ביטים מה-VPN.\n    *   מכיוון שגודל ה-VPN הוא 20 ביטים, נידרש ל-20 / 10 = 2 רמות לטבלת הדפים.\n\n3.  **מספר Page Faults:**\n    *   גודל המערך הוא 1MB = 2^20 בתים.\n    *   גודל דף הוא 4KB = 2^12 בתים.\n    *   מספר הדפים שהמערך תופס = 1MB / 4KB = 2^20 / 2^12 = 2^8 = 256 דפים.\n    *   מכיוון שהגישה היא סדרתית, וכל המערך אינו טעון בזיכרון הפיזי בתחילה, כל גישה לדף חדש במערך תגרום ל-Page Fault. מכיוון שיש 256 דפים שונים במערך, יתרחשו 256 Page Faults.\n\n4.  **מספר TLB Misses:**\n    *   מספר הדפים הייחודיים שאליהם ניגשים הוא 256.\n    *   גודל ה-TLB הוא 128 רשומות.\n    *   מכיוון שנגישים ל-256 דפים ייחודיים בסדר עוקב, וגודל ה-TLB קטן ממספר הדפים הייחודיים, כל גישה ראשונית לדף חדש תגרום ל-TLB Miss. לאחר שה-TLB מתמלא, גישה לדף חדש תגרום ל-TLB Miss ולפליטת רשומה קיימת (לפי מדיניות ההחלפה, למשל LRU). היות ולא חוזרים לאף דף שכבר נגשו אליו (כי הגישה היא סדרתית וחד-פעמית לכל בית במערך), כל אחד מ-256 הדפים יגרום ל-TLB Miss לפחות פעם אחת. מכיוון שאין גישות חוזרות לדפים שכבר נגשו אליהם, לא יתרחשו TLB Hits לאחר גישה ראשונית לדף. לכן, מספר ה-TLB Misses יהיה שווה למספר הדפים הייחודיים, כלומר 256 TLB Misses."
    },
    "difficulty_estimation": "Medium"
  }
}