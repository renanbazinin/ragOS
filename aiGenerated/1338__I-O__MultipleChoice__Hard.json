{
  "metadata": {
    "source": "ai_generated",
    "subject": "Disks",
    "topic_hint": "I/O",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-08 09:35:06",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 970,
      "output_tokens": 649,
      "total_tokens": 3347
    }
  },
  "question": {
    "id": 6,
    "type": "MultipleChoice",
    "topic": [
      "I/O",
      "DMA",
      "Cache Coherency"
    ],
    "content": {
      "text": "במערכת הפעלה מודרנית, בקר DMA מעביר נתונים מהתקן I/O לחוצץ בזיכרון הראשי. מיד לאחר השלמת העברה זו, המעבד מנסה לקרוא את הנתונים מאותו החוצץ. איזו בעיה קריטית עלולה להתעורר, ומהו המנגנון הטיפוסי למנוע קריאת נתונים שגויים על ידי המעבד?",
      "code_snippet": null,
      "options": [
        "א. פסיקת I/O לא תטופל בזמן, מה שיגרום לאובדן נתונים.",
        "ב. המעבד עלול לקרוא נתונים מיושנים (stale data) מהמטמון שלו במקום את הנתונים החדשים שהועברו על ידי ה-DMA.",
        "ג. ה-DMA עלול לכתוב לכתובת זיכרון שגויה עקב בעיית הרשאות.",
        "ד. תחרות (race condition) בין ה-DMA למעבד על גישה לאפיק הזיכרון, שתגרום להאטת המערכת אך לא לנתונים שגויים.",
        "ה. אף אחת מהתשובות האחרות אינן נכונות."
      ]
    },
    "sub_questions": null,
    "points": 5,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ב",
      "explanation": "הבעיה הקריטית היא חוסר עקביות במטמון (cache coherency). כאשר בקר DMA כותב ישירות לזיכרון הראשי, המעבד עשוי להחזיק עותק מיושן (stale copy) של הנתונים במטמון שלו. אם המעבד יקרא את הנתונים מהמטמון במקום מהזיכרון הראשי, הוא יקבל מידע שגוי. כדי למנוע זאת, מערכות הפעלה בדרך כלל מבצעות 'ניקוי' (flush) או 'פסילה' (invalidate) של שורות המטמון הרלוונטיות לפני שהמעבד ניגש לנתונים, או משתמשות בארכיטקטורות תומכות קוהרנטיות מטמון (cache-coherent DMA) שבהן ה-DMA והמעבד משתפים פרוטוקול לשמירה על עקביות."
    },
    "difficulty_estimation": "Hard"
  }
}