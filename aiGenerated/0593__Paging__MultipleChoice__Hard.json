{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Paging",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-07 22:54:18",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 969,
      "output_tokens": 841,
      "total_tokens": 6119
    }
  },
  "question": {
    "id": 6,
    "type": "MultipleChoice",
    "topic": [
      "Paging",
      "Virtual Memory",
      "Address Translation",
      "Multi-level Paging"
    ],
    "content": {
      "text": "במערכת הפעלה המשתמשת בזיכרון וירטואלי, כתובות וירטואליות הן בגודל 64 ביטים. גודל דף הוא 4KB, וכל רשומת טבלת דפים (PTE) היא בגודל 8 בתים. טבלאות הדפים ממומשות כטבלאות דפים היררכיות בעלות ארבע רמות (4-level page table). כמה ביטים מוקצים לכל אינדקס בטבלת הדפים ברמה העליונה ביותר (level 1)?",
      "code_snippet": null,
      "options": [
        "א. 8 ביטים",
        "ב. 9 ביטים",
        "ג. 12 ביטים",
        "ד. 13 ביטים",
        "ה. 16 ביטים"
      ]
    },
    "sub_questions": null,
    "points": 5,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ב",
      "explanation": "התשובה הנכונה היא ב'.\n1.  **חישוב גודל ההיסט (Offset):** גודל הדף הוא 4KB (קילו-בייט), כלומר 2^12 בתים. לכן, 12 ביטים מוקצים להיסט בתוך הדף.\n2.  **חישוב מספר הביטים לכתובת דף וירטואלי (VPN):** הכתובת הוירטואלית כולה היא 64 ביטים. לאחר הפחתת ביטי ההיסט, נשארים 64 - 12 = 52 ביטים עבור ה-Virtual Page Number (VPN).\n3.  **חישוב מספר הרשומות המקסימלי לטבלת דפים:** כל טבלת דפים חייבת להיכנס לדף אחד. גודל דף הוא 4KB, וגודל רשומת טבלת דפים (PTE) הוא 8 בתים. לכן, מספר הרשומות המקסימלי בטבלת דפים אחת הוא: 4096 בתים / 8 בתים/רשומה = 512 רשומות.\n4.  **חישוב מספר הביטים לאינדקס בטבלת דפים:** כדי לאנדקס 512 רשומות, נדרשים log2(512) = 9 ביטים.\nמכיוון שטבלאות הדפים הן היררכיות בעלות 4 רמות, וכל טבלת דפים (בכל רמה) חייבת להיכנס לדף אחד (כלומר, להכיל לכל היותר 512 רשומות), כל אינדקס בכל רמה (כולל הרמה העליונה ביותר) מוקצה לו 9 ביטים. סך הכל, 4 רמות * 9 ביטים/רמה = 36 ביטים מוקצים לאינדקסים בטבלאות הדפים. שאר ה-VPN (52-36=16 ביטים) אינם משמשים לאינדוקס טבלאות דפים, בדומה למנגנון כתובות קנוניות ב-x86-64."
    },
    "difficulty_estimation": "Hard"
  }
}