{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Virtual Memory",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 22:31:31",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1964,
      "output_tokens": 1539,
      "total_tokens": 6045
    }
  },
  "question": {
    "id": 10,
    "type": "Open",
    "topic": [
      "Virtual Memory",
      "Paging",
      "Memory Management"
    ],
    "content": {
      "text": "נתונה מערכת עם זיכרון וירטואלי של 2GB, גודל דף של 8KB, וזיכרון פיזי של 16GB. נתון שגודל רשומת טבלת דפים (PTE) הוא 4 בתים. המערכת משתמשת בטבלת דפים היררכית. יש לפרט ולנמק את כל החישובים.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": [
      {
        "id": "10.1",
        "text": "מהם הגדלים של ה-VPN וה-PFN?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.2",
        "text": "כמה רמות דרושות לטבלת הדפים במערכת זו? פרט כמה ביטים משמשים לכל רמה.",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.3",
        "text": "כמה זיכרון פיזי תתפוס טבלת הדפים של תהליך שמשתמש בכל הזיכרון הוירטואלי שלו?",
        "code_snippet": null,
        "options": null
      }
    ],
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "1. **חישוב VPN ו-PFN**:\n   *   זיכרון וירטואלי: 2GB = 2^31 בתים. לכן, הכתובת הוירטואלית היא באורך 31 ביטים.\n   *   גודל דף: 8KB = 2^13 בתים. לכן, ההיסט (offset) בתוך הדף הוא באורך 13 ביטים.\n   *   VPN (Virtual Page Number) = אורך כתובת וירטואלית - אורך היסט = 31 - 13 = 18 ביטים.\n   *   זיכרון פיזי: 16GB = 2^34 בתים. לכן, הכתובת הפיזית היא באורך 34 ביטים.\n   *   PFN (Physical Frame Number) = אורך כתובת פיזית - אורך היסט = 34 - 13 = 21 ביטים.\n\n2. **מספר רמות לטבלת הדפים וחלוקת ביטים**:\n   *   גודל רשומת טבלת דפים (PTE) הוא 4 בתים.\n   *   גודל דף הוא 8KB (8192 בתים).\n   *   מספר רשומות PTE שיכולות להיכנס לדף פיזי אחד: 8192 בתים / 4 בתים/רשומה = 2048 רשומות.\n   *   לכן, כל רמה בטבלת הדפים יכולה למפות 2048 ערכים, מה שדורש log2(2048) = 11 ביטים עבור אינדקס הרמה.\n   *   סה\"כ ביטים עבור ה-VPN הם 18 ביטים.\n   *   מספר הרמות הנדרש: 18 ביטים / 11 ביטים לרמה = 1.63. לכן, דרושות 2 רמות לטבלת הדפים ההיררכית.\n   *   חלוקת הביטים בכתובת הוירטואלית:\n       *   רמה 1 (העליונה): תשתמש ב-11 ביטים (מתוך 18 ביטים של ה-VPN).\n       *   רמה 2 (התחתונה): תשתמש ב-18 - 11 = 7 ביטים (הנותרים מה-VPN).\n\n3. **זיכרון פיזי שתתפוס טבלת הדפים של תהליך שמשתמש בכל הזיכרון הוירטואלי**:\n   *   תהליך שמשתמש בכל הזיכרון הוירטואלי שלו (2GB) צריך למעשה 2^18 דפים וירטואליים.\n   *   **טבלת דפים רמה 1 (Page Directory)**:\n       *   טבלת הרמה העליונה צריכה להכיל מצביעים לכל טבלאות רמה 2. מכיוון שרמה 2 משתמשת ב-7 ביטים, יהיו 2^7 = 128 טבלאות רמה 2 פוטנציאליות.\n       *   לכן, טבלת רמה 1 תכיל 128 רשומות. כל רשומה היא בגודל 4 בתים, לכן סה\"כ 128 * 4 = 512 בתים.\n       *   512 בתים אלו נכנסים לדף פיזי אחד (8KB). לכן, טבלת הדפים העליונה תופסת דף אחד (8KB) בזיכרון הפיזי.\n   *   **טבלאות דפים רמה 2**:\n       *   כדי למפות את כל הזיכרון הוירטואלי, כל אחת מ-128 הרשומות בטבלת רמה 1 תצביע לטבלת דפים של רמה 2. כלומר, יהיו 128 טבלאות דפים של רמה 2.\n       *   כל טבלת דפים רמה 2 תופסת דף פיזי אחד (8KB) מכיוון שהיא מכילה 2048 רשומות (2048 * 4 בתים = 8192 בתים).\n       *   סה\"כ זיכרון עבור טבלאות רמה 2: 128 טבלאות * 8KB/טבלה = 1024KB = 1MB.\n   *   **סה\"כ זיכרון פיזי לטבלת הדפים**: 8KB (עבור רמה 1) + 1MB (עבור רמה 2) = 1MB + 8KB."
    },
    "difficulty_estimation": "Medium"
  }
}