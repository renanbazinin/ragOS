{
  "metadata": {
    "source": "ai_generated",
    "topic_hint": "Memory Management",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-07 21:36:24",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 969,
      "output_tokens": 1043,
      "total_tokens": 6894
    },
    "subject": "Virtualization"
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "topic": [
      "Memory Management",
      "Paging",
      "Virtual Memory",
      "TLB"
    ],
    "content": {
      "text": "מערכת הפעלה משתמשת בכתובות וירטואליות בגודל 48 ביטים ובכתובות פיזיות בגודל 40 ביטים. גודל דף הוא 4KB. טבלת הדפים היא בעלת 4 רמות, כאשר כל ערך בטבלת דפים (PTE) הוא בגודל 8 בתים. ה-TLB מלא ומכיל 128 רשומות.\nתהליך מנסה לגשת לראשונה לכתובת וירטואלית מסוימת. ידוע כי הרשומה המתאימה אינה נמצאת ב-TLB (TLB Miss), וגם הדף הפיזי המתאים אינו נמצא בזיכרון הראשי (Page Fault).\nבהנחה שכל דפי טבלת הדפים נמצאים בזיכרון הראשי, וכי לאחר טעינת הדף מהדיסק, מערכת ההפעלה מעדכנת את טבלת הדפים ואת ה-TLB לפני הפעלת הפקודה מחדש.\nכמה גישות לזיכרון הראשי (RAM) נדרשות לכל היותר כדי להשלים בהצלחה פעולת קריאה יחידה לכתובת זו?",
      "code_snippet": null,
      "options": [
        "א. 5",
        "ב. 6",
        "ג. 7",
        "ד. 8",
        "ה. 9"
      ]
    },
    "sub_questions": null,
    "points": 5,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ב",
      "explanation": "הסבר:\n1.  **TLB Miss**: כאשר ה-MMU מנסה לתרגם את הכתובת הוירטואלית, הוא מגלה שהרשומה אינה ב-TLB. אין גישת זיכרון ל-RAM בשלב זה.\n2.  **Page Table Walk**: ה-MMU (או מערכת ההפעלה) מתחילה לחפש את ה-PTE המתאים בטבלת הדפים. מכיוון שיש 4 רמות, נדרשות 4 גישות לזיכרון הראשי (קריאה של PTE מכל רמה) כדי להגיע ל-PTE הסופי. (4 גישות RAM)\n3.  **Page Fault**: ה-PTE הסופי מצביע על כך שהדף אינו נמצא בזיכרון הפיזי (valid bit = 0).\n4.  **טיפול ב-Page Fault (Page Fault Handler)**:\n    *   מערכת ההפעלה מוצאת מסגרת פיזית פנויה.\n    *   מערכת ההפעלה טוענת את הדף מהדיסק למסגרת הפיזית. פעולה זו אינה נחשבת כגישת RAM (היא גישת דיסק).\n    *   לאחר טעינת הדף, מערכת ההפעלה מעדכנת את ה-PTE הסופי בטבלת הדפים (כתיבה של ה-PTE החדש ל-RAM). (1 גישת RAM)\n    *   מערכת ההפעלה מעדכנת את ה-TLB עם המיפוי החדש. פעולה זו נחשבת פנימית למעבד/MMU ואינה גישת RAM.\n5.  **הפעלה מחדש של הפקודה**: הפקודה המקורית שגרמה ל-Page Fault מופעלת מחדש.\n    *   כעת, ה-TLB מכיל את הרשומה המתאימה (TLB Hit).\n    *   ה-MMU מתרגם את הכתובת באמצעות ה-TLB.\n    *   מתבצעת גישת הקריאה בפועל לנתונים בזיכרון הראשי. (1 גישת RAM)\n\nסה\"כ גישות לזיכרון הראשי: 4 (עבור ה-Page Table Walk) + 1 (עדכון ה-PTE לאחר טעינת הדף) + 1 (גישת הנתונים בפועל) = 6 גישות RAM."
    },
    "difficulty_estimation": "Hard"
  }
}