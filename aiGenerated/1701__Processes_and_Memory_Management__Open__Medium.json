{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Processes and Memory Management",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-08 20:07:46",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1726,
      "output_tokens": 1183,
      "total_tokens": 5445
    }
  },
  "question": {
    "id": 10,
    "type": "Open",
    "topic": [
      "Processes",
      "Memory Management",
      "Virtual Memory",
      "Copy-on-Write"
    ],
    "content": {
      "text": "תהליך P יוצר תהליך בן C באמצעות קריאת המערכת `fork()`. לפני הקריאה ל-`fork()`, תהליך P הקצה מערך של 100 דפים בגודל 4KB כל אחד, ומילא אותם בנתונים. המערכת משתמשת במנגנון Copy-on-Write (COW) עבור העתקת דפי זיכרון ב-`fork()`.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": [
      {
        "id": "10.1",
        "text": "כמה דפים פיזיים יוקצו בסך הכל עבור המערך מיד לאחר קריאת `fork()` (לפני שבוצעו פעולות כתיבה כלשהן על ידי P או C)? נמקו.",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.2",
        "text": "תהליך P כותב ל-20 דפים ייחודיים במערך, ותהליך C כותב ל-30 דפים ייחודיים אחרים במערך (שאינם חופפים לדפים ש-P כתב אליהם). כמה Page Faults נוספים יתרחשו בסך הכל כתוצאה מפעולות כתיבה אלו? כמה דפים פיזיים ייחודיים ישמשו כעת עבור המערך בשני התהליכים יחד?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.3",
        "text": "לאחר פעולות הכתיבה המתוארות בסעיף (2), תהליך P מנסה לקרוא מאחד הדפים שתהליך C שינה. האם פעולה זו תגרום ל-Page Fault? הסבירו מדוע.",
        "code_snippet": null,
        "options": null
      }
    ],
    "points": 20,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "10.1. מיד לאחר קריאת `fork()`, שני התהליכים (P ו-C) חולקים את אותם 100 דפים פיזיים. מנגנון ה-COW גורם לכך שרק טבלאות הדפים של התהליכים משוכפלות, אך רשומות הדפים בהן מצביעות על אותן מסגרות פיזיות. הדפים מסומנים כקריאה בלבד (read-only). לכן, יוקצו 100 דפים פיזיים בלבד.\n\n10.2. כאשר תהליך P כותב לאחד מ-20 הדפים הייחודיים שלו, מתרחש Page Fault מכיוון שהדף מסומן כ-read-only. מערכת ההפעלה מבצעת העתקה של הדף, מקצה לו מסגרת פיזית חדשה, ומעדכנת את טבלת הדפים של P כך שתצביע על הדף החדש (ומסמנת אותו כ-writable). תהליך זה מתרחש 20 פעמים, ולכן נגרמים 20 Page Faults ונוספים 20 דפים פיזיים ייחודיים. באופן דומה, כאשר תהליך C כותב ל-30 הדפים הייחודיים שלו, נגרמים 30 Page Faults ונוספים 30 דפים פיזיים ייחודיים. בסך הכל יתרחשו 20 + 30 = 50 Page Faults נוספים.\nמספר הדפים הפיזיים הייחודיים הכולל יהיה: 100 (דפים מקוריים) + 20 (עותקים חדשים עבור P) + 30 (עותקים חדשים עבור C) = 150 דפים פיזיים.\n\n10.3. לא, פעולת קריאה זו לא תגרום ל-Page Fault. כאשר תהליך C שינה דף, נוצר עותק חדש של הדף עבור C, וטבלת הדפים של C עודכנה להצביע על העותק החדש. טבלת הדפים של P עדיין מצביעה על הדף הפיזי המקורי (שהוא הגרסה שלפני השינוי של C). כאשר P קורא מהדף ש-C שינה, הוא למעשה קורא מהגרסה המקורית של אותו דף (שלא שונתה על ידי P), והדף הזה כבר נמצא בזיכרון הפיזי וזמין לקריאה עבור P. אין צורך לבצע העתקה או טעינה חדשה של דף."
    },
    "difficulty_estimation": "Medium"
  }
}