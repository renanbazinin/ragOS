{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Memory Management",
    "requested_type": "CodeAnalysis",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-07 22:13:16",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2789,
      "output_tokens": 2320,
      "total_tokens": 10495
    }
  },
  "question": {
    "id": 101,
    "type": "CodeAnalysis",
    "topic": [
      "Memory Management",
      "Virtual Memory",
      "Paging",
      "TLB",
      "Page Faults"
    ],
    "content": {
      "text": "נתונה מערכת זיכרון וירטואלי בעלת המאפיינים הבאים:\n*   כתובות וירטואליות בגודל 32 סיביות.\n*   גודל דף: 4 קילובייט (KB).\n*   טבלת דפים דו-שכבתית (Two-level Page Table).\n    *   אינדקס לטבלת דפי ספריות (Page Directory Index - PDI) בגודל 10 סיביות.\n    *   אינדקס לטבלת דפים (Page Table Index - PTI) בגודל 10 סיביות.\n    *   קיזוז (Offset) בגודל 12 סיביות.\n*   TLB (Translation Lookaside Buffer) בגודל 4 כניסות, אסוציאטיבי מלא (Fully Associative), עם מדיניות החלפה LRU (Least Recently Used). ה-TLB ריק בתחילת הריצה.\n*   כל טבלאות הדפים (Page Directory ו-Page Tables) נמצאות בזיכרון הפיזי ונגישות מיד (כלומר, אין Page Faults בגין גישה לטבלאות דפים).\n*   כל דפי הנתונים (Data Pages) אינם נמצאים בזיכרון הפיזי בתחילת הריצה. גישה ראשונה לדף נתונים כלשהו תגרום ל-Page Fault, ולאחר מכן הדף יטען לזיכרון הפיזי. מסגרות דפים פיזיות (PPNs) מוקצות באופן סדרתי החל מ-PPN 100.\n\nנתונה רשימת הגישות לכתובות וירטואליות הבאות:\n\nעקבו אחר רצף הגישות לזיכרון הווירטואלי הנתון. עבור כל גישה, ציינו האם היא גורמת ל-TLB Hit או TLB Miss, והאם היא גורמת ל-Page Fault.\nבסיום, סכמו את המספר הכולל של TLB Misses ואת המספר הכולל של Page Faults.\nיש לפרט את מצב ה-TLB (אילו כניסות קיימות ובאיזה סדר LRU) בכל שלב.",
      "code_snippet": "unsigned int addresses[] = {\n    0x00001000,\n    0x00002000,\n    0x00001004,\n    0x00003000,\n    0x00004000,\n    0x00001008,\n    0x00005000,\n    0x0000200C,\n    0x00006000,\n    0x00003010\n};",
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "ניתוח הגישות לזיכרון:\n\nנתונים:\n*   גודל VA: 32 ביט.\n*   גודל דף: 4KB = 2^12 בתים.\n*   Offset: 12 ביט.\n*   VPN (Virtual Page Number) = VA >> 12.\n*   TLB בגודל 4 כניסות, LRU.\n*   בתחילה, TLB ריק.\n*   בתחילה, אף דף נתונים אינו בזיכרון פיזי. PPNs מתחילים מ-100.\n\n| גישה | כתובת וירטואלית | VPN | מצב TLB (VPN:PPN, מהפחות-עדכני ליותר-עדכני) | TLB Hit/Miss | Page Fault? | PPN שהוקצה | הערות                                                                                                    |\n| :--- | :-------------- | :-- | :----------------------------------------- | :----------- | :---------- | :-------- | :------------------------------------------------------------------------------------------------------- |\n| 1    | `0x00001000`    | 1   | `[]`                                       | Miss         | כן          | 100       | דף 1 אינו ב-TLB, אינו בזיכרון. טוענים ל-PPN 100. TLB: `[1:100]`                                          |\n| 2    | `0x00002000`    | 2   | `[1:100]`                                  | Miss         | כן          | 101       | דף 2 אינו ב-TLB, אינו בזיכרון. טוענים ל-PPN 101. TLB: `[1:100, 2:101]`                                   |\n| 3    | `0x00001004`    | 1   | `[2:101, 1:100]`                           | Hit          | לא          |           | דף 1 נמצא ב-TLB. מעדכנים LRU. TLB: `[2:101, 1:100]`                                                      |\n| 4    | `0x00003000`    | 3   | `[2:101, 1:100]`                           | Miss         | כן          | 102       | דף 3 אינו ב-TLB, אינו בזיכרון. טוענים ל-PPN 102. TLB: `[2:101, 1:100, 3:102]`                             |\n| 5    | `0x00004000`    | 4   | `[2:101, 1:100, 3:102]`                    | Miss         | כן          | 103       | דף 4 אינו ב-TLB, אינו בזיכרון. טוענים ל-PPN 103. TLB: `[2:101, 1:100, 3:102, 4:103]`                      |\n| 6    | `0x00001008`    | 1   | `[2:101, 3:102, 4:103, 1:100]`             | Hit          | לא          |           | דף 1 נמצא ב-TLB. מעדכנים LRU. TLB: `[2:101, 3:102, 4:103, 1:100]`                                        |\n| 7    | `0x00005000`    | 5   | `[2:101, 3:102, 4:103, 1:100]`             | Miss         | כן          | 104       | דף 5 אינו ב-TLB, אינו בזיכרון. ה-TLB מלא, מוציאים את 2 (LRU). טוענים ל-PPN 104. TLB: `[3:102, 4:103, 1:100, 5:104]` |\n| 8    | `0x0000200C`    | 2   | `[3:102, 4:103, 1:100, 5:104]`             | Miss         | לא          |           | דף 2 אינו ב-TLB, אך הוא בזיכרון (PPN 101). ה-TLB מלא, מוציאים את 3 (LRU). TLB: `[4:103, 1:100, 5:104, 2:101]` |\n| 9    | `0x00006000`    | 6   | `[4:103, 1:100, 5:104, 2:101]`             | Miss         | כן          | 105       | דף 6 אינו ב-TLB, אינו בזיכרון. ה-TLB מלא, מוציאים את 4 (LRU). טוענים ל-PPN 105. TLB: `[1:100, 5:104, 2:101, 6:105]` |\n| 10   | `0x00003010`    | 3   | `[1:100, 5:104, 2:101, 6:105]`             | Miss         | לא          |           | דף 3 אינו ב-TLB, אך הוא בזיכרון (PPN 102). ה-TLB מלא, מוציאים את 1 (LRU). TLB: `[5:104, 2:101, 6:105, 3:102]` |\n\nסיכום:\n*   סה\"כ גישות: 10\n*   סה\"כ TLB Misses: 8\n*   סה\"כ Page Faults: 7 (עבור VPNs 1, 2, 3, 4, 5, 6)"
    },
    "difficulty_estimation": "Hard"
  }
}