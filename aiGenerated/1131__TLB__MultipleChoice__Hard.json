{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "TLB",
    "requested_type": "MultipleChoice",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-08 08:09:23",
    "examples_used": 2,
    "token_usage": {
      "prompt_tokens": 969,
      "output_tokens": 1145,
      "total_tokens": 5027
    }
  },
  "question": {
    "id": 1,
    "type": "MultipleChoice",
    "topic": [
      "TLB",
      "Virtual Memory",
      "Paging",
      "Performance",
      "Context Switching",
      "ASID"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה המשתמשת בזיכרון וירטואלי עם דפדוף (paging) וב-TLB. ה-TLB מכיל 128 כניסות. המערכת תומכת ב-ASIDs (Address Space Identifiers) ב-TLB. גודל דף הוא 4KB. במערכת רצות שתי תוכניות: P1 ו-P2. P1 מבצעת גישה סדרתית למערך בגודל 1MB. P2 מבצעת גישות חוזרות ונשנות למבנה נתונים קטן בגודל 16KB. מתבצעים מיתוגי הקשר (context switches) תכופים בין P1 ל-P2. איזה מהבאים יתאר בצורה הטובה ביותר את התנהגות ה-TLB והשפעתה על הביצועים?",
      "code_snippet": null,
      "options": [
        "א. עקב מיתוגי ההקשר התכופים, ה-TLB יתרוקן (flush) בכל מעבר בין P1 ל-P2, מה שיוביל לביצועים ירודים עבור שני התהליכים.",
        "ב. P2 תמיד תהנה משיעור פגיעות גבוה ב-TLB, אך P1 תסבול משיעור פגיעות נמוך ב-TLB עקב גודל המערך שלה, ללא קשר ל-ASIDs.",
        "ג. בזכות ה-ASIDs, כניסות של P2 יישארו ב-TLB גם כש-P1 רץ, וכניסות של P1 יישארו ב-TLB גם כש-P2 רץ. P2 תיהנה משיעור פגיעות גבוה מאוד, בעוד ש-P1 תסבול משיעור פגיעות בינוני-גבוה עקב גודל המערך שלה (256 דפים לעומת 128 כניסות TLB), אך לא תסבול מריקון TLB מיותר במיתוגי הקשר.",
        "ד. ה-TLB יתרוקן רק לעיתים רחוקות, כאשר נגמרים ה-ASIDs הזמינים. שני התהליכים ייהנו משיעור פגיעות גבוה ב-TLB.",
        "ה. כל התשובות האחרות אינן נכונות."
      ]
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": "ג",
      "explanation": "התשובה הנכונה היא ג'. ה-TLB מכיל 128 כניסות. P1 ניגש למערך בגודל 1MB, המורכב מ-1MB / 4KB = 256 דפים. מכיוון שמספר הדפים גדול ממספר הכניסות ב-TLB, P1 יסבול משיעור פגיעות (misses) ב-TLB גם בגישה סדרתית, כיוון שחלק מהדפים יועפו מה-TLB לפני שיגיע תורם להיכנס שוב. P2 ניגש למבנה נתונים בגודל 16KB, המורכב מ-16KB / 4KB = 4 דפים. גודל זה קטן בהרבה ממספר הכניסות ב-TLB, ולכן P2 ייהנה משיעור פגיעות גבוה מאוד ב-TLB לאחר הטעינה הראשונית של הדפים שלו. השימוש ב-ASIDs (Address Space Identifiers) הוא קריטי. ASIDs מאפשרים ל-TLB לשמור כניסות ששייכות לתהליכים שונים במקביל, מבלי לבצע ריקון (flush) של ה-TLB במיתוגי הקשר. לכן, כאשר מתבצע מיתוג מ-P1 ל-P2, הכניסות של P1 נשארות ב-TLB (מסומנות עם ה-ASID של P1) ולא מפריעות לכניסות של P2, ולהיפך. זה מונע ביצועי TLB ירודים הנגרמים מריקון מיותר במיתוגי הקשר. לכן P2 תמיד תיהנה משיעור פגיעות גבוה, ו-P1 תסבול משיעור פגיעות בינוני-גבוה רק בגלל שגודל ה-working set שלה גדול מה-TLB, ולא בגלל מיתוגי הקשר."
    },
    "difficulty_estimation": "Hard"
  }
}