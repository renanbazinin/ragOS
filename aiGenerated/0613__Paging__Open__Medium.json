{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Paging",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 23:01:17",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2072,
      "output_tokens": 1310,
      "total_tokens": 5772
    }
  },
  "question": {
    "id": 10,
    "type": "Open",
    "topic": [
      "Memory Management",
      "Virtual Memory",
      "Paging",
      "Multi-level Paging"
    ],
    "content": {
      "text": "נתונה מערכת עם זיכרון וירטואלי של 4GB, גודל דף של 4KB, וזיכרון פיזי של 1GB.\nמנגנון ניהול הזיכרון הוא Paging דו-שכבתי (Two-level Paging).\nגודל כל רשומה בטבלת הדפים (PTE) ובספריית הדפים (PDE) הוא 4 בתים.\n\nמהם הגדלים של ה-VPN, ה-PFN, כמה ביטים מוקצים לאינדקס הרמה הראשונה (Page Directory Index), וכמה ביטים לאינדקס הרמה השנייה (Page Table Index)? כמה זיכרון פיזי תתפוס לכל היותר טבלת הדפים (כולל ספריית הדפים) של תהליך יחיד, אם הוא ממפה את כל מרחב הכתובות הוירטואלי שלו?\n\nגודל VPN: ____\nגודל PFN: ____\nביטים לאינדקס רמה 1 (PDI): ____\nביטים לאינדקס רמה 2 (PTI): ____\nגודל טבלה מקסימלי: ____",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "1.  **חישוב גודל כתובות וירטואליות ופיזיות, והיסט דף:**\n    *   זיכרון וירטואלי 4GB = 2^32 בתים, לכן כתובת וירטואלית היא 32 ביטים.\n    *   זיכרון פיזי 1GB = 2^30 בתים, לכן כתובת פיזית היא 30 ביטים.\n    *   גודל דף 4KB = 2^12 בתים, לכן ההיסט (offset) בתוך הדף הוא 12 ביטים.\n\n2.  **חישוב VPN ו-PFN:**\n    *   **VPN (Virtual Page Number):** מספר ביטים לכתובת וירטואלית - מספר ביטים להיסט = 32 - 12 = **20 ביטים**.\n    *   **PFN (Physical Frame Number):** מספר ביטים לכתובת פיזית - מספר ביטים להיסט = 30 - 12 = **18 ביטים**.\n\n3.  **חישוב ביטים לאינדקסים במנגנון דו-שכבתי:**\n    *   כל דף (או טבלת דפים/ספריית דפים) הוא בגודל 4KB. גודל כל רשומה (PTE או PDE) הוא 4 בתים.\n    *   מספר הרשומות שניתן לאחסן בדף יחיד = גודל דף / גודל רשומה = 4KB / 4B = 1024 רשומות.\n    *   כדי לייצג 1024 רשומות, נדרשים log2(1024) = 10 ביטים.\n    *   במנגנון Paging דו-שכבתי, ה-VPN מתחלק לשני אינדקסים: אינדקס לספריית הדפים (PDI) ואינדקס לטבלת הדפים (PTI). סכום הביטים של שני האינדקסים צריך להיות שווה ל-VPN.\n    *   לכן, **אינדקס רמה 1 (PDI): 10 ביטים**.\n    *   **אינדקס רמה 2 (PTI): 10 ביטים**.\n    *   (10 + 10 = 20 ביטים, שזה אכן גודל ה-VPN).\n\n4.  **חישוב גודל טבלת דפים מקסימלי:**\n    *   תהליך הממפה את כל מרחב הכתובות הוירטואלי שלו דורש: ספריית דפים אחת (Page Directory) וטבלאות דפים (Page Tables) עבור כל הכניסות בספריית הדפים.\n    *   ספריית הדפים תופסת דף אחד: 4KB.\n    *   ספריית הדפים מכילה 1024 כניסות (PDI של 10 ביטים). אם כל הכניסות תקפות, כל אחת מהן מצביעה לטבלת דפים אחרת.\n    *   לכן, נצטרך 1024 טבלאות דפים.\n    *   כל טבלת דפים תופסת דף אחד: 4KB.\n    *   הזיכרון הפיזי הכולל שיתפוס מבנה טבלת הדפים הוא: (1 * גודל דף עבור ספריית הדפים) + (1024 * גודל דף עבור טבלאות הדפים).\n    *   = 1 * 4KB + 1024 * 4KB\n    *   = 4KB + 4096KB\n    *   = 4KB + 4MB = **4,198,400 בתים**."
    },
    "difficulty_estimation": "Medium"
  }
}