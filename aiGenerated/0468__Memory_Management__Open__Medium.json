{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Memory Management",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-07 21:53:31",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 1964,
      "output_tokens": 1701,
      "total_tokens": 8120
    }
  },
  "question": {
    "id": 10,
    "type": "Open",
    "topic": [
      "Memory Management",
      "Virtual Memory",
      "Paging",
      "Page Table"
    ],
    "content": {
      "text": "נתונה מערכת עם זיכרון וירטואלי של 2GB וזיכרון פיזי של 128GB. גודל דף הוא 8KB.\nבכל רשומת טבלת דפים (PTE) נשמרים 3 ביטים של סטטוס בנוסף למספר מסגרת פיזית (PFN).\nיש לפרט ולנמק את כל החישובים.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": [
      {
        "id": "10.1",
        "text": "מהם הגדלים של ה-VPN וה-PFN (בביטים)?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.2",
        "text": "מהו גודל רשומת טבלת דפים (PTE) בבתים?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.3",
        "text": "בהנחה שמערכת ההפעלה משתמשת בטבלת דפים היררכית, וכאשר כל חלק בטבלת הדפים תופס דף אחד בזיכרון הפיזי, כמה רמות דרושות לטבלת הדפים של תהליך, וכמה ביטים בכתובת הווירטואלית מוקצים לכל רמה?",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "10.4",
        "text": "כמה זיכרון פיזי (בבתים) תתפוס טבלת דפים היררכית של תהליך, במקרה הגרוע ביותר (worst case), אם כל הזיכרון הוירטואלי שלו ממופה?",
        "code_snippet": null,
        "options": null
      }
    ],
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "1. **גודל VPN ו-PFN (בביטים):**\n   *   גודל זיכרון וירטואלי: 2GB = 2^31 בתים. לכן, כתובת וירטואלית היא באורך 31 ביטים.\n   *   גודל זיכרון פיזי: 128GB = 2^37 בתים. לכן, כתובת פיזית היא באורך 37 ביטים.\n   *   גודל דף: 8KB = 2^13 בתים. לכן, ההיסט (Offset) בכתובת הוא באורך 13 ביטים.\n   *   VPN (Virtual Page Number) = אורך כתובת וירטואלית - אורך היסט = 31 - 13 = 18 ביטים.\n   *   PFN (Physical Frame Number) = אורך כתובת פיזית - אורך היסט = 37 - 13 = 24 ביטים.\n\n2. **גודל רשומת טבלת דפים (PTE) בבתים:**\n   *   רשומת PTE מכילה PFN (24 ביטים) ו-3 ביטים של סטטוס.\n   *   סה\"כ ביטים ב-PTE = 24 + 3 = 27 ביטים.\n   *   בדרך כלל, רשומות PTE מעוגלות לגודל של מילה (לרוב 4 בתים = 32 ביטים) לצורך יישור וגישה יעילה.\n   *   לכן, גודל רשומת PTE הוא 4 בתים.\n\n3. **מספר רמות וחלוקת ביטים לטבלת דפים היררכית:**\n   *   גודל דף: 8KB. גודל PTE: 4 בתים.\n   *   מספר רשומות שיכולות להיכנס לדף אחד של טבלת דפים = גודל דף / גודל PTE = 8KB / 4 בתים = 8192 / 4 = 2048 רשומות.\n   *   מספר ביטים לכל אינדקס ברמת טבלת דפים = log2(2048) = 11 ביטים.\n   *   סה\"כ ביטי VPN = 18 ביטים.\n   *   מספר רמות דרושות = ceil(VPN ביטים / ביטים לרמה) = ceil(18 / 11) = 2 רמות.\n   *   חלוקת הביטים (מהרמה העליונה ביותר): \n        *   רמה 1 (מדריך דפים - Page Directory Index): 11 ביטים.\n        *   רמה 2 (טבלת דפים - Page Table Index): 18 - 11 = 7 ביטים.\n        *   (Offset): 13 ביטים.\n        *   סה\"כ ביטי כתובת וירטואלית = 11 (P1) + 7 (P2) + 13 (Offset) = 31 ביטים.\n\n4. **זיכרון פיזי שתתפוס טבלת דפים היררכית (במקרה הגרוע ביותר):**\n   *   במקרה הגרוע ביותר, כל הזיכרון הוירטואלי של התהליך ממופה, כלומר כל 2^18 הדפים הוירטואליים נמצאים בשימוש.\n   *   רמת ה-P1 (מדריך הדפים הראשי) תתפוס דף אחד בזיכרון הפיזי (8KB).\n   *   רמת ה-P1 מכילה 2^11 רשומות (מכיוון שהאינדקס לרמה זו הוא 11 ביטים). במקרה הגרוע, כל הרשומות הללו מצביעות על טבלאות דפים ברמה P2.\n   *   לכן, יהיו 2^11 טבלאות דפים ברמה P2.\n   *   כל טבלת דפים ברמה P2 תופסת דף אחד (8KB) בזיכרון הפיזי.\n   *   סה\"כ זיכרון פיזי עבור טבלאות הדפים:\n        *   1 דף (עבור מדריך P1) + 2^11 דפים (עבור טבלאות P2) \n        *   = 1 + 2048 = 2049 דפים.\n        *   סה\"כ זיכרון פיזי = 2049 דפים * 8KB לדף = 16392KB.\n        *   בבתים: 16392 * 1024 = 16,785,408 בתים."
    },
    "difficulty_estimation": "Medium"
  }
}