{
  "metadata": {
    "source": "ai_generated",
    "topic_hint": "Processes",
    "requested_type": "CodeAnalysis",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-07 18:28:46",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 3664,
      "output_tokens": 1240,
      "total_tokens": 8071
    },
    "subject": "Virtualization"
  },
  "question": {
    "id": 1,
    "type": "CodeAnalysis",
    "topic": [
      "Processes",
      "Fork",
      "System Calls",
      "Concurrency"
    ],
    "content": {
      "text": "נתונה התוכנית הבאה בשפת C. הריצו את התוכנית, והתהליך שנוצר קיבל את מזהה התהליך (PID) שמספרו 100. \nיש להניח שכל קריאות המערכת שיכולות להצליח הצליחו, לא נוצרים תהליכים בקטעי קוד אחרים במערכת, וכל תהליך חדש מקבל מזהה הגדול ב-1 מהתהליך שנוצר לפניו.\nתזכורת: כל הדפסה לפלט הסטנדרטי מתבצעת מיד (ללא buffer).",
      "code_snippet": "#include <stdio.h>\n#include <unistd.h>\n#include <sys/wait.h>\n#include <stdlib.h>\n\nint main() {\n    pid_t root = getpid(); \n    if (fork() || fork()) {\n        if (!fork()) {\n            printf(\"A %d %d\\n\", getpid(), getppid());\n            exit(0);\n        }\n    } else {\n        if (fork() && fork()) {\n            printf(\"B %d %d\\n\", getpid(), getppid());\n        }\n    }\n\n    while(wait(NULL) > 0);\n\n    if (getpid() == root) {\n        printf(\"Root Done: %d\\n\", getpid());\n    }\n\n    return 0;\n}",
      "options": null
    },
    "sub_questions": [
      {
        "id": "1.1",
        "text": "כמה תהליכים נוצרו בתוכנית בסך הכל (כולל התהליך הראשי)? הציגו את עץ התהליכים שנוצר.",
        "code_snippet": null,
        "options": null
      },
      {
        "id": "1.2",
        "text": "כתבו את כל שורות הפלט האפשריות של התוכנית (סדר השורות עשוי להשתנות, אך יש לציין את תוכן השורות במדויק).",
        "code_snippet": null,
        "options": null
      }
    ],
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "1. ניתוח יצירת התהליכים:\n- תהליך 100 מבצע fork() ראשון (שורה 8). נוצר תהליך 101. עבור 100 הביטוי fork() הוא אמת (101), לכן בגלל אופרטור ה-|| הוא מדלג על ה-fork השני ונכנס לבלוק ה-if.\n- תהליך 101 קיבל 0 מה-fork הראשון, לכן הוא מבצע את ה-fork() השני בביטוי ה-||. נוצר תהליך 102. עבור 101 הביטוי השני הוא אמת (102), לכן הוא נכנס לבלוק ה-if. תהליך 102 קיבל 0 ב-fork השני, לכן הביטוי (0 || 0) הוא שקר והוא נכנס לבלוק ה-else.\n- בתוך ה-if (תהליכים 100 ו-101): שניהם מבצעים if(!fork()). תהליך 100 יוצר את 103. תהליך 103 מדפיס 'A 103 100' ויוצא. תהליך 101 יוצר את 104. תהליך 104 מדפיס 'A 104 101' ויוצא.\n- בתוך ה-else (תהליך 102): מבצע fork() && fork(). תהליך 102 יוצר את 105. תהליך 105 מקבל 0 ומפסיק את ה-AND. תהליך 102 מקבל 105 וממשיך ל-fork() השני, בו הוא יוצר את 106. תהליך 102 מקבל 106 (אמת) ומדפיס 'B 102 101'. תהליך 106 מקבל 0 ולא מדפיס.\n- סה\"כ נוצרו 7 תהליכים (100, 101, 102, 103, 104, 105, 106).\n\n2. פלט התוכנית:\nהשורות הבאות יודפסו (הסדר בין השלוש הראשונות עשוי להשתנות, האחרונה תמיד בסוף):\nA 103 100\nA 104 101\nB 102 101\nRoot Done: 100"
    },
    "difficulty_estimation": "Hard"
  }
}