{
  "metadata": {
    "source": "ai_generated",
    "subject": "File Systems",
    "topic_hint": "File Systems",
    "requested_type": "CodeAnalysis",
    "requested_difficulty": "Easy",
    "generated_at": "2026-02-07 23:44:22",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2852,
      "output_tokens": 1093,
      "total_tokens": 6083
    }
  },
  "question": {
    "id": 10,
    "type": "CodeAnalysis",
    "topic": [
      "File Systems",
      "System Calls",
      "I/O",
      "lseek"
    ],
    "content": {
      "text": "נתונה תוכנית C הבאה שיוצרת קובץ וכותבת אליו. מה יהיה הפלט הסופי של התוכנית לפלט הסטנדרטי? יש להניח שכל קריאות המערכת מצליחות.",
      "code_snippet": "#include <stdio.h>\n#include <stdlib.h>\n#include <fcntl.h> // For open\n#include <unistd.h> // For write, read, close, lseek\n\nint main() {\n    int fd;\n    char buffer[20];\n    char write_data1[] = \"Hello World\"; \n    char write_data2[] = \"OS\";          \n\n    // 1. Open a file named \"test_file.txt\". Create if not exists, truncate if exists, read/write permissions.\n    fd = open(\"test_file.txt\", O_CREAT | O_RDWR | O_TRUNC, 0644);\n    if (fd == -1) {\n        perror(\"open\");\n        return 1;\n    }\n\n    // 2. Write \"Hello World\" to the file.\n    write(fd, write_data1, sizeof(write_data1) - 1); \n\n    // 3. Move the file pointer to position 6 from the beginning.\n    lseek(fd, 6, SEEK_SET);\n\n    // 4. Write \"OS\" to the file starting from the current file pointer position.\n    write(fd, write_data2, sizeof(write_data2) - 1); \n\n    // 5. Move the file pointer back to the beginning of the file.\n    lseek(fd, 0, SEEK_SET);\n\n    // 6. Read up to 20 bytes from the file into the buffer.\n    read(fd, buffer, 20);\n\n    // 7. Print the content of the buffer (up to 20 characters).\n    printf(\"File content after operations: %.*s\\n\", 20, buffer); \n\n    // 8. Close the file.\n    close(fd);\n\n    return 0;\n}"
    },
    "sub_questions": null,
    "points": 10,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "התוכנית פותחת את הקובץ 'test_file.txt' במצב כתיבה וקריאה, ומוחקת את תוכנו אם קיים (O_TRUNC).\n1. בתחילה נכתבת המחרוזת \"Hello World\" (11 תווים) לקובץ. מצביע הקובץ נמצא כעת במיקום 11. תוכן הקובץ: \"Hello World\".\n2. לאחר מכן, קריאת `lseek(fd, 6, SEEK_SET)` מזיזה את מצביע הקובץ למיקום 6 (התו השביעי).\n3. הקריאה `write(fd, \"OS\", 2)` כותבת את המחרוזת \"OS\" (2 תווים) החל ממיקום 6. זה גורם לדריסה של התווים 'W' ו-'o' מהמחרוזת המקורית \"World\". התוכן הופך ל: \"Hello OSrld\". מצביע הקובץ נמצא כעת במיקום `6 + 2 = 8`.\n4. קריאת `lseek(fd, 0, SEEK_SET)` מזיזה את מצביע הקובץ חזרה למיקום 0 (תחילת הקובץ).\n5. קריאת `read(fd, buffer, 20)` קוראת את 11 התווים מהקובץ (שהם \"Hello OSrld\") לתוך המערך `buffer`. שאר המערך `buffer` יישאר ללא שינוי (או יכיל ערכים אקראיים אם לא אותחל).\n6. לבסוף, `printf` מדפיס את התוכן של `buffer` עד 20 תווים. מכיוון שנקראו 11 תווים שהם \"Hello OSrld\", זה מה שיודפס.\nלכן, הפלט הסופי יהיה: Hello OSrld"
    },
    "difficulty_estimation": "Easy"
  }
}