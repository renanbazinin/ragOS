{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "IPC and Processes",
    "requested_type": "Open",
    "requested_difficulty": "Medium",
    "generated_at": "2026-02-08 19:40:32",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 2411,
      "output_tokens": 1077,
      "total_tokens": 5329
    }
  },
  "question": {
    "id": 1,
    "type": "Open",
    "topic": [
      "IPC",
      "Processes",
      "Pipes",
      "fork"
    ],
    "content": {
      "text": "כתבו תוכנית בשפת C שבה תהליך אב יוצר תהליך בן באמצעות `fork()`. תהליך האב ישלח סדרת מספרים שלמים (לדוגמה, מ-1 עד 10) לתהליך הבן דרך צינור (pipe). תהליך הבן יקבל את המספרים, יחשב את הריבוע של כל מספר, וישלח את התוצאה המרובעת בחזרה לתהליך האב דרך צינור נוסף. תהליך האב ידפיס לבסוף את המספר המקורי ואת ריבועו.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "הפתרון כולל יצירת שני צינורות (pipes) לתקשורת דו-כיוונית בין האב לבן. הצינור הראשון (p2c_pipe) משמש לשליחת נתונים מהאב לבן, והצינור השני (c2p_pipe) משמש לשליחת נתונים מהבן לאב.\n\n**תהליך האב:**\n1.  יוצר את שני הצינורות באמצעות `pipe()`.\n2.  מבצע `fork()` ליצירת תהליך הבן.\n3.  סוגר את קצוות הצינורות שאינם בשימוש עבורו (קצה הקריאה של הצינור מהאב לבן, וקצה הכתיבה של הצינור מהבן לאב). קצוות אלו נשמרים פתוחים בתהליך הבן.\n4.  בלולאה, שולח מספרים מ-1 עד 10 לתהליך הבן דרך קצה הכתיבה של `p2c_pipe` (`p2c_pipe[1]`).\n5.  מיד לאחר שליחת כל מספר, הוא ממתין לקבל את התוצאה המרובעת מתהליך הבן דרך קצה הקריאה של `c2p_pipe` (`c2p_pipe[0]`).\n6.  מדפיס את המספר המקורי ואת ריבועו.\n7.  לאחר סיום הלולאה, סוגר את קצוות הצינורות הפתוחים שלו כדי לאותת לילד שאין עוד נתונים (EOF).\n8.  ממתין לתהליך הבן שיסיים באמצעות `wait()`.\n\n**תהליך הבן:**\n1.  סוגר את קצוות הצינורות שאינם בשימוש עבורו (קצה הכתיבה של הצינור מהאב לבן, וקצה הקריאה של הצינור מהבן לאב). קצוות אלו נשמרים פתוחים בתהליך האב.\n2.  בלולאה, קורא מספרים מתהליך האב דרך קצה הקריאה של `p2c_pipe` (`p2c_pipe[0]`).\n3.  כאשר `read()` מחזיר 0, זה מציין שתהליך האב סגר את קצה הכתיבה של הצינור, ואין עוד נתונים לקרוא. הבן יכול לסיים את הלולאה.\n4.  עבור כל מספר שנקרא בהצלחה, מחשב את ריבועו.\n5.  שולח את התוצאה המרובעת בחזרה לתהליך האב דרך קצה הכתיבה של `c2p_pipe` (`c2p_pipe[1]`).\n6.  לאחר סיום הלולאה, סוגר את קצוות הצינורות הפתוחים שלו.\n7.  מסיים את פעולתו באמצעות `exit(0)`.\n\nהשימוש בשני צינורות נפרדים מאפשר תקשורת דו-כיוונית יעילה בין האב לבן. סגירת הקצוות הלא נחוצים בכל תהליך היא קריטית למניעת קיפאון (deadlock) ולסימון סוף קובץ (EOF) לתהליך הקורא, מה שמאפשר לו לדעת מתי לסיים לקרוא נתונים."
    },
    "difficulty_estimation": "Medium"
  }
}