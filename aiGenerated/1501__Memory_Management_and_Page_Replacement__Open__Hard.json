{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Memory Management and Page Replacement",
    "requested_type": "Open",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-08 10:50:33",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 3221,
      "output_tokens": 4254,
      "total_tokens": 17432
    }
  },
  "question": {
    "id": 1,
    "type": "Open",
    "topic": [
      "Memory Management",
      "Page Replacement",
      "Virtual Memory",
      "TLB",
      "Paging",
      "LRU"
    ],
    "content": {
      "text": "נתונה מערכת זיכרון וירטואלי עם המאפיינים הבאים:\n*   מרחב כתובות וירטואלי בגודל 32 ביטים.\n*   גודל דף: 4KB.\n*   טבלת דפים דו-רמתית (Two-level page table).\n    *   10 ביטים עבור אינדקס טבלת הדפים ברמה הראשונה (Page Directory Index - PDI).\n    *   10 ביטים עבור אינדקס טבלת הדפים ברמה השנייה (Page Table Index - PTI).\n    *   היתר עבור היסט בתוך הדף.\n*   גודל כניסה בטבלת דפים (PTE): 4 בתים.\n*   זיכרון פיזי: 4 מסגרות (frames) בלבד.\n*   TLB: 2 כניסות, אסוציאטיבי מלא (fully associative), משתמש באלגוריתם LRU להחלפת כניסות TLB.\n*   אלגוריתם החלפת דפים בזיכרון הפיזי: LRU.\n*   מצב התחלתי: כל המסגרות הפיזיות ריקות, ה-TLB ריק, וכל טבלאות הדפים (ברמה 1 ו-2) ריקות (כלומר, כל כניסה מסומנת כלא-חוקית/לא-נוכחת).\n\nנתונה סדרת הגישות הבאה לכתובות וירטואליות (בבסיס 16):\n0x00000100, 0x00001200, 0x00100300, 0x00000400, 0x00101500, 0x00002600, 0x00001700, 0x00100800, 0x00101900, 0x00000A00\n\nעקבו אחר סדרת הגישות וחשבו את הדברים הבאים. פרטו את כל החישובים והנימוקים שלכם.\n\n1.  כמה TLB hits וכמה TLB misses התרחשו?\n2.  כמה page faults התרחשו?\n3.  מהו המצב הסופי של המסגרות הפיזיות (איזה דף וירטואלי נמצא בכל מסגרת פיזית)?\n4.  מהו התוכן הסופי של ה-TLB? (ציינו את מספר הדף הוירטואלי ומספר המסגרת הפיזית לכל כניסה).",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "הסבר מפורט לפתרון:\n\n**פירוק כתובת וירטואלית:**\n*   גודל דף: 4KB = 2^12 בתים. לכן, ההיסט בתוך הדף הוא 12 ביטים.\n*   מספר דף וירטואלי (VPN): 32 - 12 = 20 ביטים.\n*   טבלת דפים דו-רמתית: PDI (רמה 1) = 10 ביטים, PTI (רמה 2) = 10 ביטים. סך הכל 20 ביטים ל-VPN.\n\n**מעקב אחר הגישות:**\n\n**מצב התחלתי:**\n*   מסגרות פיזיות (4): [ריק, ריק, ריק, ריק]\n*   TLB (2 כניסות): [ריק, ריק]\n*   LRU TLB: אין\n*   LRU זיכרון: אין\n*   TLB Hits: 0, TLB Misses: 0\n*   Page Faults: 0\n\n1.  **גישה ל-0x00000100 (דף VP(0,0)):**\n    *   TLB Miss (ריק). TLB Misses: 1.\n    *   Page Fault (דף לא קיים בזיכרון). Page Faults: 1.\n    *   טוענים VP(0,0) למסגרת F0.\n    *   מעדכנים PTE עבור VP(0,0) ל-F0.\n    *   מעדכנים TLB: [(VP(0,0), F0), ריק]. LRU TLB: VP(0,0) אחרון.\n    *   LRU זיכרון: VP(0,0) אחרון.\n    *   מצב זיכרון: [VP(0,0), ריק, ריק, ריק]\n\n2.  **גישה ל-0x00001200 (דף VP(0,1)):**\n    *   TLB Miss. TLB Misses: 2.\n    *   Page Fault. Page Faults: 2.\n    *   טוענים VP(0,1) למסגרת F1.\n    *   מעדכנים PTE עבור VP(0,1) ל-F1.\n    *   מעדכנים TLB: [(VP(0,0), F0), (VP(0,1), F1)]. LRU TLB: VP(0,1) אחרון, VP(0,0) לפני אחרון.\n    *   LRU זיכרון: VP(0,1) אחרון, VP(0,0) לפני אחרון.\n    *   מצב זיכרון: [VP(0,0), VP(0,1), ריק, ריק]\n\n3.  **גישה ל-0x00100300 (דף VP(1,0)):**\n    *   TLB Miss. TLB Misses: 3.\n    *   Page Fault. Page Faults: 3.\n    *   טוענים VP(1,0) למסגרת F2.\n    *   מעדכנים PTE עבור VP(1,0) ל-F2.\n    *   TLB מלא. LRU TLB הוא VP(0,0). מוציאים אותו. מוסיפים (VP(1,0), F2).\n    *   TLB: [(VP(0,1), F1), (VP(1,0), F2)]. LRU TLB: VP(1,0) אחרון, VP(0,1) לפני אחרון.\n    *   LRU זיכרון: VP(1,0) אחרון, VP(0,1) לפני אחרון, VP(0,0) שלישי.\n    *   מצב זיכרון: [VP(0,0), VP(0,1), VP(1,0), ריק]\n\n4.  **גישה ל-0x00000400 (דף VP(0,0)):**\n    *   TLB Miss (VP(0,0) הוצא מה-TLB). TLB Misses: 4.\n    *   Page Hit (VP(0,0) נמצא ב-F0). אין Page Fault.\n    *   TLB מלא. LRU TLB הוא VP(0,1). מוציאים אותו. מוסיפים (VP(0,0), F0).\n    *   TLB: [(VP(1,0), F2), (VP(0,0), F0)]. LRU TLB: VP(0,0) אחרון, VP(1,0) לפני אחרון.\n    *   LRU זיכרון: VP(0,0) אחרון, VP(1,0) לפני אחרון, VP(0,1) שלישי.\n    *   מצב זיכרון: [VP(0,0), VP(0,1), VP(1,0), ריק]\n\n5.  **גישה ל-0x00101500 (דף VP(1,1)):**\n    *   TLB Miss. TLB Misses: 5.\n    *   Page Fault. Page Faults: 4.\n    *   טוענים VP(1,1) למסגרת F3.\n    *   מעדכנים PTE עבור VP(1,1) ל-F3.\n    *   TLB מלא. LRU TLB הוא VP(1,0). מוציאים אותו. מוסיפים (VP(1,1), F3).\n    *   TLB: [(VP(0,0), F0), (VP(1,1), F3)]. LRU TLB: VP(1,1) אחרון, VP(0,0) לפני אחרון.\n    *   LRU זיכרון: VP(1,1) אחרון, VP(0,0) לפני אחרון, VP(1,0) שלישי, VP(0,1) רביעי.\n    *   מצב זיכרון: [VP(0,0), VP(0,1), VP(1,0), VP(1,1)] (כל המסגרות מלאות).\n\n6.  **גישה ל-0x00002600 (דף VP(0,2)):**\n    *   TLB Miss. TLB Misses: 6.\n    *   Page Fault. Page Faults: 5.\n    *   זיכרון מלא. LRU בזיכרון הוא VP(0,1) (ב-F1). מוציאים אותו. טוענים VP(0,2) ל-F1.\n    *   מעדכנים PTE: VP(0,1) מסומן כלא-חוקי. VP(0,2) מצביע ל-F1.\n    *   TLB מלא. LRU TLB הוא VP(0,0). מוציאים אותו. מוסיפים (VP(0,2), F1).\n    *   TLB: [(VP(1,1), F3), (VP(0,2), F1)]. LRU TLB: VP(0,2) אחרון, VP(1,1) לפני אחרון.\n    *   LRU זיכרון: VP(0,2) אחרון, VP(1,1) לפני אחרון, VP(0,0) שלישי, VP(1,0) רביעי.\n    *   מצב זיכרון: [VP(0,0), VP(0,2), VP(1,0), VP(1,1)] (VP(0,1) הוחלף ע\"י VP(0,2) ב-F1).\n\n7.  **גישה ל-0x00001700 (דף VP(0,1)):**\n    *   TLB Miss. TLB Misses: 7.\n    *   Page Fault. Page Faults: 6.\n    *   זיכרון מלא. LRU בזיכרון הוא VP(1,0) (ב-F2). מוציאים אותו. טוענים VP(0,1) ל-F2.\n    *   מעדכנים PTE: VP(1,0) מסומן כלא-חוקי. VP(0,1) מצביע ל-F2.\n    *   TLB מלא. LRU TLB הוא VP(1,1). מוציאים אותו. מוסיפים (VP(0,1), F2).\n    *   TLB: [(VP(0,2), F1), (VP(0,1), F2)]. LRU TLB: VP(0,1) אחרון, VP(0,2) לפני אחרון.\n    *   LRU זיכרון: VP(0,1) אחרון, VP(0,2) לפני אחרון, VP(1,1) שלישי, VP(0,0) רביעי.\n    *   מצב זיכרון: [VP(0,0), VP(0,2), VP(0,1), VP(1,1)] (VP(1,0) הוחלף ע\"י VP(0,1) ב-F2).\n\n8.  **גישה ל-0x00100800 (דף VP(1,0)):**\n    *   TLB Miss. TLB Misses: 8.\n    *   Page Fault. Page Faults: 7.\n    *   זיכרון מלא. LRU בזיכרון הוא VP(0,0) (ב-F0). מוציאים אותו. טוענים VP(1,0) ל-F0.\n    *   מעדכנים PTE: VP(0,0) מסומן כלא-חוקי. VP(1,0) מצביע ל-F0.\n    *   TLB מלא. LRU TLB הוא VP(0,2). מוציאים אותו. מוסיפים (VP(1,0), F0).\n    *   TLB: [(VP(0,1), F2), (VP(1,0), F0)]. LRU TLB: VP(1,0) אחרון, VP(0,1) לפני אחרון.\n    *   LRU זיכרון: VP(1,0) אחרון, VP(0,1) לפני אחרון, VP(0,2) שלישי, VP(1,1) רביעי.\n    *   מצב זיכרון: [VP(1,0), VP(0,2), VP(0,1), VP(1,1)] (VP(0,0) הוחלף ע\"י VP(1,0) ב-F0).\n\n9.  **גישה ל-0x00101900 (דף VP(1,1)):**\n    *   TLB Miss (VP(1,1) הוצא מה-TLB מוקדם יותר). TLB Misses: 9.\n    *   Page Hit (VP(1,1) נמצא ב-F3). אין Page Fault.\n    *   TLB מלא. LRU TLB הוא VP(0,1). מוציאים אותו. מוסיפים (VP(1,1), F3).\n    *   TLB: [(VP(1,0), F0), (VP(1,1), F3)]. LRU TLB: VP(1,1) אחרון, VP(1,0) לפני אחרון.\n    *   LRU זיכרון: VP(1,1) אחרון, VP(1,0) לפני אחרון, VP(0,1) שלישי, VP(0,2) רביעי.\n    *   מצב זיכרון: [VP(1,0), VP(0,2), VP(0,1), VP(1,1)]\n\n10. **גישה ל-0x00000A00 (דף VP(0,0)):**\n    *   TLB Miss (VP(0,0) הוצא מה-TLB ומהזיכרון). TLB Misses: 10.\n    *   Page Fault. Page Faults: 8.\n    *   זיכרון מלא. LRU בזיכרון הוא VP(0,2) (ב-F1). מוציאים אותו. טוענים VP(0,0) ל-F1.\n    *   מעדכנים PTE: VP(0,2) מסומן כלא-חוקי. VP(0,0) מצביע ל-F1.\n    *   TLB מלא. LRU TLB הוא VP(1,0). מוציאים אותו. מוסיפים (VP(0,0), F1).\n    *   TLB: [(VP(1,1), F3), (VP(0,0), F1)]. LRU TLB: VP(0,0) אחרון, VP(1,1) לפני אחרון.\n    *   LRU זיכרון: VP(0,0) אחרון, VP(1,1) לפני אחרון, VP(1,0) שלישי, VP(0,1) רביעי.\n    *   מצב זיכרון: [VP(1,0), VP(0,0), VP(0,1), VP(1,1)] (VP(0,2) הוחלף ע\"י VP(0,0) ב-F1).\n\n**סיכום תוצאות:**\n\n1.  **TLB hits וכמה TLB misses:**\n    *   TLB Hits: 0\n    *   TLB Misses: 10\n    (בגלל גודל ה-TLB הקטן ודפוס הגישה, כל גישה גרמה ל-TLB miss).\n\n2.  **Page Faults:**\n    *   סה\"כ Page Faults: 8\n\n3.  **מצב סופי של המסגרות הפיזיות:**\n    *   F0: VP(1,0) (דף וירטואלי 0x00100)\n    *   F1: VP(0,0) (דף וירטואלי 0x00000)\n    *   F2: VP(0,1) (דף וירטואלי 0x00001)\n    *   F3: VP(1,1) (דף וירטואלי 0x00101)\n\n4.  **תוכן סופי של ה-TLB:**\n    *   כניסה 1: (VP(1,1), F3)\n    *   כניסה 2: (VP(0,0), F1)\n    (כאשר VP(0,0) הוא ה-LRU האחרון, ו-VP(1,1) הוא השני אחרון)."
    },
    "difficulty_estimation": "Hard"
  }
}