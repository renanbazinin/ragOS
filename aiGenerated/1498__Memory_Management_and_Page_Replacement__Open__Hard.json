{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Memory Management and Page Replacement",
    "requested_type": "Open",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-08 10:47:49",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 3221,
      "output_tokens": 3728,
      "total_tokens": 12157
    }
  },
  "question": {
    "id": 101,
    "type": "Open",
    "topic": [
      "Memory Management",
      "Paging",
      "Page Replacement",
      "Multi-level Page Tables",
      "Enhanced Second Chance"
    ],
    "content": {
      "text": "נתונה מערכת הפעלה המשתמשת בזיכרון וירטואלי עם המאפיינים הבאים:\n*   מרחב כתובות וירטואלי: 2^32 בתים.\n*   גודל דף: 4KB.\n*   זיכרון פיזי: 4 מסגרות (frames) זמינות לתהליך.\n*   טבלת דפים: דו-רמתית (two-level page table).\n*   אלגוריתם החלפת דפים: Enhanced Second Chance (Clock Algorithm) המשתמש בביטים Reference (R) ו-Dirty (D).\n    *   כאשר נדרשת החלפה, האלגוריתם סורק את המסגרות החל ממיקום ה\"מחוג\" הנוכחי.\n    *   עבור כל מסגרת, הוא בודק את זוג הביטים (R, D) שלה:\n        1.  אם (R=0, D=0): הדף מוחלף מיד.\n        2.  אם (R=0, D=1): הדף נכתב לדיסק (פעולת I/O), ואז מוחלף. (מונה ככתיבת דיסק).\n        3.  אם (R=1, D=0) או (R=1, D=1): ביט R מאופס (R=0), והאלגוריתם ממשיך למסגרת הבאה.\n    *   המחוג מתקדם למסגרת הבאה לאחר כל בדיקה.\n    *   אם לא נמצא דף להחלפה בסריקה אחת, האלגוריתם ממשיך לסרוק מהנקודה אליה הגיע, עד למציאת דף (R=0, D=0) או (R=0, D=1).\n    *   ביט R של דף נקבע ל-1 בכל גישה (קריאה או כתיבה) לדף.\n    *   ביט D של דף נקבע ל-1 בכל גישת כתיבה לדף.\n\nנתונה סדרת גישות לזיכרון וירטואלי (מספר הדף וסוג הגישה - קריאה/כתיבה):\nP0 (read), P1 (write), P2 (read), P3 (write), P0 (read), P4 (write), P1 (read), P5 (read), P3 (write), P4 (read), P2 (write)\n\nיש לעקוב אחר ביצועי המערכת עבור סדרת גישות זו. עבור כל גישה:\n1.  ציין אם התרחש Page Fault.\n2.  אם התרחש Page Fault, ציין איזה דף הוחלף (אם בכלל) ומה היו ערכי ה-R וה-D שלו לפני ההחלפה.\n3.  ציין את מספר הכתיבות לדיסק שהתרחשו עקב החלפת דף בגישה זו (אם בכלל).\n4.  לאחר סיום כל הגישות, הצג את המצב הסופי של המסגרות בזיכרון הפיזי (איזה דף בכל מסגרת) ואת ערכי ה-R וה-D עבור כל דף.\n5.  כמו כן, ציין את סך כל ה-Page Faults ואת סך כל הכתיבות לדיסק.",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "פתרון:\n\n**מצב התחלתי:**\n*   מסגרות: [ ], [ ], [ ], [ ] (כולן ריקות)\n*   מחוג ה-Clock: מצביע על מסגרת 0\n*   סה\"כ Page Faults: 0\n*   סה\"כ כתיבות לדיסק: 0\n\n**מעקב אחר הגישות:**\n\n1.  **P0 (read)**\n    *   **Page Fault?** כן. מסגרת 0 ריקה.\n    *   **פעולה:** טוען את P0 למסגרת 0. מצב P0: R=1, D=0.\n    *   **מצב מסגרות:** [P0,1,0], [ ], [ ], [ ]\n    *   **דף הוחלף/R/D:** אין.\n    *   **כתיבות לדיסק בגישה זו:** 0.\n    *   **מחוג:** 0.\n    *   **סה\"כ PF:** 1, **סה\"כ כתיבות:** 0.\n\n2.  **P1 (write)**\n    *   **Page Fault?** כן. מסגרת 1 ריקה.\n    *   **פעולה:** טוען את P1 למסגרת 1. מצב P1: R=1, D=1.\n    *   **מצב מסגרות:** [P0,1,0], [P1,1,1], [ ], [ ]\n    *   **דף הוחלף/R/D:** אין.\n    *   **כתיבות לדיסק בגישה זו:** 0.\n    *   **מחוג:** 0.\n    *   **סה\"כ PF:** 2, **סה\"כ כתיבות:** 0.\n\n3.  **P2 (read)**\n    *   **Page Fault?** כן. מסגרת 2 ריקה.\n    *   **פעולה:** טוען את P2 למסגרת 2. מצב P2: R=1, D=0.\n    *   **מצב מסגרות:** [P0,1,0], [P1,1,1], [P2,1,0], [ ]\n    *   **דף הוחלף/R/D:** אין.\n    *   **כתיבות לדיסק בגישה זו:** 0.\n    *   **מחוג:** 0.\n    *   **סה\"כ PF:** 3, **סה\"כ כתיבות:** 0.\n\n4.  **P3 (write)**\n    *   **Page Fault?** כן. מסגרת 3 ריקה.\n    *   **פעולה:** טוען את P3 למסגרת 3. מצב P3: R=1, D=1.\n    *   **מצב מסגרות:** [P0,1,0], [P1,1,1], [P2,1,0], [P3,1,1]\n    *   **דף הוחלף/R/D:** אין.\n    *   **כתיבות לדיסק בגישה זו:** 0.\n    *   **מחוג:** 0.\n    *   **סה\"כ PF:** 4, **סה\"כ כתיבות:** 0.\n\n5.  **P0 (read)**\n    *   **Page Fault?** לא. P0 נמצא במסגרת 0.\n    *   **פעולה:** מעדכן את P0: R=1 (D נשאר 0).\n    *   **מצב מסגרות:** [P0,1,0], [P1,1,1], [P2,1,0], [P3,1,1]\n    *   **דף הוחלף/R/D:** אין.\n    *   **כתיבות לדיסק בגישה זו:** 0.\n    *   **מחוג:** 0.\n    *   **סה\"כ PF:** 4, **סה\"כ כתיבות:** 0.\n\n6.  **P4 (write)**\n    *   **Page Fault?** כן. כל המסגרות מלאות, נדרשת החלפה.\n    *   **חיפוש להחלפה (מחוג מתחיל מ-0):**\n        *   מסגרת 0 (P0): (R=1, D=0) -> מאפס R. P0 הופך ל-(0,0). מחוג ל-1.\n        *   מסגרת 1 (P1): (R=1, D=1) -> מאפס R. P1 הופך ל-(0,1). מחוג ל-2.\n        *   מסגרת 2 (P2): (R=1, D=0) -> מאפס R. P2 הופך ל-(0,0). מחוג ל-3.\n        *   מסגרת 3 (P3): (R=1, D=1) -> מאפס R. P3 הופך ל-(0,1). מחוג ל-0.\n        *   (סריקה ראשונה הסתיימה, כל ה-R'ים אופסו, לא נמצא דף להחלפה).\n        *   מסגרת 0 (P0): (R=0, D=0) -> **מחליף את P0.**\n    *   **פעולה:** טוען את P4 למסגרת 0. מצב P4: R=1, D=1.\n    *   **מצב מסגרות:** [P4,1,1], [P1,0,1], [P2,0,0], [P3,0,1]\n    *   **דף הוחלף/R/D:** P0 (היה 0,0 לפני ההחלפה, לאחר האיפוסים).\n    *   **כתיבות לדיסק בגישה זו:** 0 (P0 לא היה D=1).\n    *   **מחוג:** 1 (המחוג התקדם ל-0, נבחר 0, אז הבא יהיה 1).\n    *   **סה\"כ PF:** 5, **סה\"כ כתיבות:** 0.\n\n7.  **P1 (read)**\n    *   **Page Fault?** לא. P1 נמצא במסגרת 1.\n    *   **פעולה:** מעדכן את P1: R=1 (D נשאר 1).\n    *   **מצב מסגרות:** [P4,1,1], [P1,1,1], [P2,0,0], [P3,0,1]\n    *   **דף הוחלף/R/D:** אין.\n    *   **כתיבות לדיסק בגישה זו:** 0.\n    *   **מחוג:** 1.\n    *   **סה\"כ PF:** 5, **סה\"כ כתיבות:** 0.\n\n8.  **P5 (read)**\n    *   **Page Fault?** כן. כל המסגרות מלאות, נדרשת החלפה.\n    *   **חיפוש להחלפה (מחוג מתחיל מ-1):**\n        *   מסגרת 1 (P1): (R=1, D=1) -> מאפס R. P1 הופך ל-(0,1). מחוג ל-2.\n        *   מסגרת 2 (P2): (R=0, D=0) -> **מחליף את P2.**\n    *   **פעולה:** טוען את P5 למסגרת 2. מצב P5: R=1, D=0.\n    *   **מצב מסגרות:** [P4,1,1], [P1,0,1], [P5,1,0], [P3,0,1]\n    *   **דף הוחלף/R/D:** P2 (היה 0,0).\n    *   **כתיבות לדיסק בגישה זו:** 0 (P2 לא היה D=1).\n    *   **מחוג:** 3 (המחוג התקדם ל-1,2, נבחר 2, אז הבא יהיה 3).\n    *   **סה\"כ PF:** 6, **סה\"כ כתיבות:** 0.\n\n9.  **P3 (write)**\n    *   **Page Fault?** לא. P3 נמצא במסגרת 3.\n    *   **פעולה:** מעדכן את P3: R=1, D=1.\n    *   **מצב מסגרות:** [P4,1,1], [P1,0,1], [P5,1,0], [P3,1,1]\n    *   **דף הוחלף/R/D:** אין.\n    *   **כתיבות לדיסק בגישה זו:** 0.\n    *   **מחוג:** 3.\n    *   **סה\"כ PF:** 6, **סה\"כ כתיבות:** 0.\n\n10. **P4 (read)**\n    *   **Page Fault?** לא. P4 נמצא במסגרת 0.\n    *   **פעולה:** מעדכן את P4: R=1 (D נשאר 1).\n    *   **מצב מסגרות:** [P4,1,1], [P1,0,1], [P5,1,0], [P3,1,1]\n    *   **דף הוחלף/R/D:** אין.\n    *   **כתיבות לדיסק בגישה זו:** 0.\n    *   **מחוג:** 3.\n    *   **סה\"כ PF:** 6, **סה\"כ כתיבות:** 0.\n\n11. **P2 (write)**\n    *   **Page Fault?** כן. כל המסגרות מלאות, נדרשת החלפה.\n    *   **חיפוש להחלפה (מחוג מתחיל מ-3):**\n        *   מסגרת 3 (P3): (R=1, D=1) -> מאפס R. P3 הופך ל-(0,1). מחוג ל-0.\n        *   מסגרת 0 (P4): (R=1, D=1) -> מאפס R. P4 הופך ל-(0,1). מחוג ל-1.\n        *   מסגרת 1 (P1): (R=0, D=1) -> **מחליף את P1.** כותב את P1 לדיסק.\n    *   **פעולה:** טוען את P2 למסגרת 1. מצב P2: R=1, D=1.\n    *   **מצב מסגרות:** [P4,0,1], [P2,1,1], [P5,1,0], [P3,0,1]\n    *   **דף הוחלף/R/D:** P1 (היה 0,1).\n    *   **כתיבות לדיסק בגישה זו:** 1.\n    *   **מחוג:** 2 (המחוג התקדם ל-3,0,1, נבחר 1, אז הבא יהיה 2).\n    *   **סה\"כ PF:** 7, **סה\"כ כתיבות:** 1.\n\n**מצב סופי של המסגרות בזיכרון הפיזי:**\n*   **מסגרת 0:** P4 (R=0, D=1)\n*   **מסגרת 1:** P2 (R=1, D=1)\n*   **מסגרת 2:** P5 (R=1, D=0)\n*   **מסגרת 3:** P3 (R=0, D=1)\n\n**סה\"כ Page Faults:** 7\n**סה\"כ כתיבות לדיסק:** 1",
      "difficulty_estimation": "Hard"
    }
  }
}