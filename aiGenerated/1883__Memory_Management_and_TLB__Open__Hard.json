{
  "metadata": {
    "source": "ai_generated",
    "subject": "Virtualization",
    "topic_hint": "Memory Management and TLB",
    "requested_type": "Open",
    "requested_difficulty": "Hard",
    "generated_at": "2026-02-09 21:10:33",
    "examples_used": 3,
    "token_usage": {
      "prompt_tokens": 3221,
      "output_tokens": 6778,
      "total_tokens": 28435
    }
  },
  "question": {
    "id": 101,
    "type": "Open",
    "topic": [
      "Memory Management",
      "TLB",
      "Paging",
      "Virtual Memory",
      "Performance Analysis"
    ],
    "content": {
      "text": "נתונה מערכת זיכרון וירטואלי עם מרחב כתובות וירטואלי בגודל 40 ביטים ומרחב כתובות פיזי בגודל 28 ביטים. גודל דף הוא 4KB (קילובייט אחד).\nהמערכת משתמשת בטבלאות דפים היררכיות בנות 3 רמות. כל כניסה בטבלת דפים (PTE) היא בגודל 4 בתים. נניח שכל טבלה מאוחסנת בדף אחד בדיוק.\n\nהמערכת כוללת TLB (Translation Lookaside Buffer) עם המאפיינים הבאים:\n*   גודל: 8 כניסות.\n*   אסוציאטיביות: אסוציאטיבי מלא (Fully Associative).\n*   מדיניות החלפה: LRU (Least Recently Used).\n*   זמן גישה ל-TLB (Hit Time): 1ns.\n*   זמן גישה לזיכרון הראשי (Memory Access Time): 100ns.\n*   זמן גישה לדיסק (Disk Access Time): 10ms (מילוי דף מהדיסק לזיכרון פיזי).\n*   כל כניסת TLB מכילה VPN, PFN, ביט Valid, ביט Dirty וביט Read/Write.\n\nבתחילת הריצה, ה-TLB ריק. טבלאות הדפים מתארות את המצב הבא (כל שאר הדפים אינם נמצאים בזיכרון הפיזי, כלומר ה-PTE שלהם מצביע על P=0):\n*   VPN 0x10000: ממופה ל-PFN 0xABC. (Valid=1, Dirty=0, Read/Write=1)\n*   VPN 0x10001: ממופה ל-PFN 0xABD. (Valid=1, Dirty=1, Read/Write=1)\n*   VPN 0x20000: ממופה ל-PFN 0xABE. (Valid=1, Dirty=0, Read/Write=1)\n*   VPN 0x30000: ממופה ל-PFN 0xABF. (Valid=1, Dirty=0, Read/Write=1)\n*   VPN 0x40000: ממופה ל-PFN 0xAC0. (Valid=1, Dirty=0, Read/Write=1)\n*   VPN 0x50000: ממופה ל-PFN 0xAC1. (Valid=1, Dirty=0, Read/Write=1)\n*   VPN 0x60000: ממופה ל-PFN 0xAC2. (Valid=1, Dirty=0, Read/Write=1)\n*   VPN 0x70000: ממופה ל-PFN 0xAC3. (Valid=1, Dirty=0, Read/Write=1)\n\nכל שאר הדפים אינם קיימים בזיכרון הפיזי. במקרה של Page Fault, נניח שהדף נטען ל-PFN זמין חדש (החל מ-0xAC4), ואין צורך להחליף דף קיים בזיכרון הפיזי.\n\nתהליך מבצע את סדרת הגישות הבאה לכתובות וירטואליות (כל הכתובות בבסיס 16):\n1.  קריאה לכתובת 0x10000123\n2.  קריאה לכתובת 0x20000456\n3.  כתיבה לכתובת 0x10000789\n4.  קריאה לכתובת 0x30000ABC\n5.  קריאה לכתובת 0x40000DEF\n6.  קריאה לכתובת 0x50000111\n7.  קריאה לכתובת 0x60000222\n8.  קריאה לכתובת 0x70000333\n9.  קריאה לכתובת 0x80000444 (הדף אינו בזיכרון פיזי בתחילה)\n10. קריאה לכתובת 0x10000555\n11. כתיבה לכתובת 0x20000666\n12. קריאה לכתובת 0x90000777 (הדף אינו בזיכרון פיזי בתחילה)\n13. קריאה לכתובת 0xA0000888 (הדף אינו בזיכרון פיזי בתחילה)\n\nעבור כל גישה, יש לפרט:\nא. האם היתה פגיעה (Hit) או החטאה (Miss) ב-TLB.\nב. אם היתה החטאה, כמה גישות לזיכרון הראשי נדרשו עבור טבלאות הדפים? האם התרחשה פסיקת דף (Page Fault)?\nג. מהי הכתובת הפיזית המתורגמת (בבסיס 16)?\nד. מהו זמן הגישה הכולל לגישה זו (בננו-שניות)?\nה. תאר את מצב ה-TLB לאחר כל גישה (VPN, PFN, Valid, Dirty, LRU order - מהפחות בשימוש לנפוץ ביותר).\nו. מהו זמן הגישה הממוצע עבור כלל סדרת הגישות?",
      "code_snippet": null,
      "options": null
    },
    "sub_questions": null,
    "points": null,
    "solution": {
      "is_present_in_file": true,
      "correct_option": null,
      "explanation": "פירוט המערכת:\n*   גודל כתובת וירטואלית: 40 ביטים.\n*   גודל כתובת פיזית: 28 ביטים.\n*   גודל דף: 4KB = 2^12 בתים. לכן, ההיסט (Offset) הוא 12 ביטים.\n*   מספר דף וירטואלי (VPN): 40 - 12 = 28 ביטים.\n*   מספר מסגרת פיזית (PFN): 28 - 12 = 16 ביטים.\n*   גודל כניסת טבלת דפים (PTE): 4 בתים.\n*   מספר כניסות לטבלת דפים בדף אחד: 4KB / 4B = 1024 כניסות = 2^10 כניסות. לכן, כל אינדקס ברמת טבלת הדפים הוא בגודל 10 ביטים.\n*   מספר רמות טבלת דפים: עבור 28 ביטים של VPN, נדרשות 3 רמות (10 ביטים לרמה ראשונה, 10 ביטים לרמה שנייה, 8 ביטים לרמה שלישית).\n\nמאפייני TLB:\n*   גודל: 8 כניסות.\n*   מדיניות החלפה: LRU.\n*   זמן פגיעה ב-TLB: 1ns.\n*   זמן גישה לזיכרון הראשי: 100ns.\n*   זמן פסיקת דף (כולל גישת דיסק ועדכון PTE): 10ms = 10,000,000ns.\n\nמצב התחלתי:\n*   TLB ריק.\n*   PFN זמין חדש ראשון: 0xAC4.\n\nננתח כל גישה:\n(VPN, PFN, D=Dirty, R/W=Read/Write)\n\n**גישה 1: קריאה לכתובת 0x10000123**\n*   VPN: 0x10000, Offset: 0x123\n*   א. TLB Miss (ריק).\n*   ב. נדרשו 3 גישות לזיכרון הראשי עבור טבלאות הדפים (L1, L2, L3). לא התרחשה פסיקת דף.\n*   ג. PFN: 0xABC. כתובת פיזית: 0xABC123.\n*   ד. זמן גישה כולל: 1ns (TLB) + 3 * 100ns (PT Walk) = 301ns.\n*   ה. TLB לאחר גישה (מהפחות בשימוש לנפוץ ביותר):\n    `1. (0x10000, 0xABC, D=0, R/W=1)`\n\n**גישה 2: קריאה לכתובת 0x20000456**\n*   VPN: 0x20000, Offset: 0x456\n*   א. TLB Miss.\n*   ב. נדרשו 3 גישות לזיכרון הראשי. לא התרחשה פסיקת דף.\n*   ג. PFN: 0xABE. כתובת פיזית: 0xABE456.\n*   ד. זמן גישה כולל: 1ns + 300ns = 301ns.\n*   ה. TLB לאחר גישה:\n    `1. (0x10000, 0xABC, D=0, R/W=1)`\n    `2. (0x20000, 0xABE, D=0, R/W=1)`\n\n**גישה 3: כתיבה לכתובת 0x10000789**\n*   VPN: 0x10000, Offset: 0x789\n*   א. TLB Hit.\n*   ב. לא נדרשו גישות לזיכרון הראשי. לא התרחשה פסיקת דף.\n*   ג. PFN: 0xABC. כתובת פיזית: 0xABC789.\n*   ד. זמן גישה כולל: 1ns.\n*   ה. TLB לאחר גישה (VPN 0x10000 עודכן כ-Dirty וקודם ב-LRU):\n    `1. (0x20000, 0xABE, D=0, R/W=1)`\n    `2. (0x10000, 0xABC, D=1, R/W=1)`\n\n**גישה 4: קריאה לכתובת 0x30000ABC**\n*   VPN: 0x30000, Offset: 0xABC\n*   א. TLB Miss.\n*   ב. נדרשו 3 גישות לזיכרון הראשי. לא התרחשה פסיקת דף.\n*   ג. PFN: 0xABF. כתובת פיזית: 0xABFABC.\n*   ד. זמן גישה כולל: 1ns + 300ns = 301ns.\n*   ה. TLB לאחר גישה:\n    `1. (0x20000, 0xABE, D=0, R/W=1)`\n    `2. (0x10000, 0xABC, D=1, R/W=1)`\n    `3. (0x30000, 0xABF, D=0, R/W=1)`\n\n**גישה 5: קריאה לכתובת 0x40000DEF**\n*   VPN: 0x40000, Offset: 0xDEF\n*   א. TLB Miss.\n*   ב. נדרשו 3 גישות לזיכרון הראשי. לא התרחשה פסיקת דף.\n*   ג. PFN: 0xAC0. כתובת פיזית: 0xAC0DEF.\n*   ד. זמן גישה כולל: 1ns + 300ns = 301ns.\n*   ה. TLB לאחר גישה:\n    `1. (0x20000, 0xABE, D=0, R/W=1)`\n    `2. (0x10000, 0xABC, D=1, R/W=1)`\n    `3. (0x30000, 0xABF, D=0, R/W=1)`\n    `4. (0x40000, 0xAC0, D=0, R/W=1)`\n\n**גישה 6: קריאה לכתובת 0x50000111**\n*   VPN: 0x50000, Offset: 0x111\n*   א. TLB Miss.\n*   ב. נדרשו 3 גישות לזיכרון הראשי. לא התרחשה פסיקת דף.\n*   ג. PFN: 0xAC1. כתובת פיזית: 0xAC1111.\n*   ד. זמן גישה כולל: 1ns + 300ns = 301ns.\n*   ה. TLB לאחר גישה:\n    `1. (0x20000, 0xABE, D=0, R/W=1)`\n    `2. (0x10000, 0xABC, D=1, R/W=1)`\n    `3. (0x30000, 0xABF, D=0, R/W=1)`\n    `4. (0x40000, 0xAC0, D=0, R/W=1)`\n    `5. (0x50000, 0xAC1, D=0, R/W=1)`\n\n**גישה 7: קריאה לכתובת 0x60000222**\n*   VPN: 0x60000, Offset: 0x222\n*   א. TLB Miss.\n*   ב. נדרשו 3 גישות לזיכרון הראשי. לא התרחשה פסיקת דף.\n*   ג. PFN: 0xAC2. כתובת פיזית: 0xAC2222.\n*   ד. זמן גישה כולל: 1ns + 300ns = 301ns.\n*   ה. TLB לאחר גישה:\n    `1. (0x20000, 0xABE, D=0, R/W=1)`\n    `2. (0x10000, 0xABC, D=1, R/W=1)`\n    `3. (0x30000, 0xABF, D=0, R/W=1)`\n    `4. (0x40000, 0xAC0, D=0, R/W=1)`\n    `5. (0x50000, 0xAC1, D=0, R/W=1)`\n    `6. (0x60000, 0xAC2, D=0, R/W=1)`\n\n**גישה 8: קריאה לכתובת 0x70000333**\n*   VPN: 0x70000, Offset: 0x333\n*   א. TLB Miss.\n*   ב. נדרשו 3 גישות לזיכרון הראשי. לא התרחשה פסיקת דף.\n*   ג. PFN: 0xAC3. כתובת פיזית: 0xAC3333.\n*   ד. זמן גישה כולל: 1ns + 300ns = 301ns.\n*   ה. TLB לאחר גישה (ה-TLB מלא כעת):\n    `1. (0x20000, 0xABE, D=0, R/W=1)`\n    `2. (0x10000, 0xABC, D=1, R/W=1)`\n    `3. (0x30000, 0xABF, D=0, R/W=1)`\n    `4. (0x40000, 0xAC0, D=0, R/W=1)`\n    `5. (0x50000, 0xAC1, D=0, R/W=1)`\n    `6. (0x60000, 0xAC2, D=0, R/W=1)`\n    `7. (0x70000, 0xAC3, D=0, R/W=1)`\n\n**גישה 9: קריאה לכתובת 0x80000444**\n*   VPN: 0x80000, Offset: 0x444\n*   א. TLB Miss (TLB מלא).\n*   ב. נדרשו 3 גישות לזיכרון הראשי. התרחשה פסיקת דף (הדף 0x80000 אינו בזיכרון פיזי). PFN חדש: 0xAC4.\n*   ג. PFN: 0xAC4. כתובת פיזית: 0xAC4444.\n*   ד. זמן גישה כולל: 1ns + 300ns (PT Walk) + 10,000,000ns (Page Fault) = 10,000,301ns.\n*   ה. TLB לאחר גישה (הוצא (0x20000, 0xABE) כ-LRU, נוסף (0x80000, 0xAC4) כ-MRU):\n    `1. (0x10000, 0xABC, D=1, R/W=1)`\n    `2. (0x30000, 0xABF, D=0, R/W=1)`\n    `3. (0x40000, 0xAC0, D=0, R/W=1)`\n    `4. (0x50000, 0xAC1, D=0, R/W=1)`\n    `5. (0x60000, 0xAC2, D=0, R/W=1)`\n    `6. (0x70000, 0xAC3, D=0, R/W=1)`\n    `7. (0x80000, 0xAC4, D=0, R/W=1)`\n\n**גישה 10: קריאה לכתובת 0x10000555**\n*   VPN: 0x10000, Offset: 0x555\n*   א. TLB Hit.\n*   ב. לא נדרשו גישות לזיכרון הראשי. לא התרחשה פסיקת דף.\n*   ג. PFN: 0xABC. כתובת פיזית: 0xABC555.\n*   ד. זמן גישה כולל: 1ns.\n*   ה. TLB לאחר גישה (0x10000 קודם ל-MRU):\n    `1. (0x30000, 0xABF, D=0, R/W=1)`\n    `2. (0x40000, 0xAC0, D=0, R/W=1)`\n    `3. (0x50000, 0xAC1, D=0, R/W=1)`\n    `4. (0x60000, 0xAC2, D=0, R/W=1)`\n    `5. (0x70000, 0xAC3, D=0, R/W=1)`\n    `6. (0x80000, 0xAC4, D=0, R/W=1)`\n    `7. (0x10000, 0xABC, D=1, R/W=1)`\n\n**גישה 11: כתיבה לכתובת 0x20000666**\n*   VPN: 0x20000, Offset: 0x666\n*   א. TLB Miss (0x20000 הוצא בגישה 9).\n*   ב. נדרשו 3 גישות לזיכרון הראשי. לא התרחשה פסיקת דף (0x20000 קיים בזיכרון הפיזי, רק לא ב-TLB).\n*   ג. PFN: 0xABE. כתובת פיזית: 0xABE666.\n*   ד. זמן גישה כולל: 1ns + 300ns = 301ns.\n*   ה. TLB לאחר גישה (הוצא (0x30000, 0xABF) כ-LRU, נוסף (0x20000, 0xABE, D=1) כ-MRU):\n    `1. (0x40000, 0xAC0, D=0, R/W=1)`\n    `2. (0x50000, 0xAC1, D=0, R/W=1)`\n    `3. (0x60000, 0xAC2, D=0, R/W=1)`\n    `4. (0x70000, 0xAC3, D=0, R/W=1)`\n    `5. (0x80000, 0xAC4, D=0, R/W=1)`\n    `6. (0x10000, 0xABC, D=1, R/W=1)`\n    `7. (0x20000, 0xABE, D=1, R/W=1)`\n\n**גישה 12: קריאה לכתובת 0x90000777**\n*   VPN: 0x90000, Offset: 0x777\n*   א. TLB Miss.\n*   ב. נדרשו 3 גישות לזיכרון הראשי. התרחשה פסיקת דף (הדף 0x90000 אינו בזיכרון פיזי). PFN חדש: 0xAC5.\n*   ג. PFN: 0xAC5. כתובת פיזית: 0xAC5777.\n*   ד. זמן גישה כולל: 1ns + 300ns (PT Walk) + 10,000,000ns (Page Fault) = 10,000,301ns.\n*   ה. TLB לאחר גישה (הוצא (0x40000, 0xAC0) כ-LRU, נוסף (0x90000, 0xAC5) כ-MRU):\n    `1. (0x50000, 0xAC1, D=0, R/W=1)`\n    `2. (0x60000, 0xAC2, D=0, R/W=1)`\n    `3. (0x70000, 0xAC3, D=0, R/W=1)`\n    `4. (0x80000, 0xAC4, D=0, R/W=1)`\n    `5. (0x10000, 0xABC, D=1, R/W=1)`\n    `6. (0x20000, 0xABE, D=1, R/W=1)`\n    `7. (0x90000, 0xAC5, D=0, R/W=1)`\n\n**גישה 13: קריאה לכתובת 0xA0000888**\n*   VPN: 0xA0000, Offset: 0x888\n*   א. TLB Miss.\n*   ב. נדרשו 3 גישות לזיכרון הראשי. התרחשה פסיקת דף (הדף 0xA0000 אינו בזיכרון פיזי). PFN חדש: 0xAC6.\n*   ג. PFN: 0xAC6. כתובת פיזית: 0xAC6888.\n*   ד. זמן גישה כולל: 1ns + 300ns (PT Walk) + 10,000,000ns (Page Fault) = 10,000,301ns.\n*   ה. TLB לאחר גישה (הוצא (0x50000, 0xAC1) כ-LRU, נוסף (0xA0000, 0xAC6) כ-MRU):\n    `1. (0x60000, 0xAC2, D=0, R/W=1)`\n    `2. (0x70000, 0xAC3, D=0, R/W=1)`\n    `3. (0x80000, 0xAC4, D=0, R/W=1)`\n    `4. (0x10000, 0xABC, D=1, R/W=1)`\n    `5. (0x20000, 0xABE, D=1, R/W=1)`\n    `6. (0x90000, 0xAC5, D=0, R/W=1)`\n    `7. (0xA0000, 0xAC6, D=0, R/W=1)`\n\n**ו. זמן הגישה הממוצע עבור כלל סדרת הגישות:**\nסך כל זמני הגישה:\n*   8 גישות עם TLB Miss ללא Page Fault (גישות 1, 2, 4, 5, 6, 7, 8, 11): 8 * 301ns = 2408ns\n*   2 גישות עם TLB Hit (גישות 3, 10): 2 * 1ns = 2ns\n*   3 גישות עם TLB Miss ו-Page Fault (גישות 9, 12, 13): 3 * 10,000,301ns = 30,000,903ns\n\nזמן כולל = 2408ns + 2ns + 30,000,903ns = 30,003,313ns.\nמספר גישות כולל: 13.\nזמן גישה ממוצע: 30,003,313ns / 13 ≈ 2,307,947.15 ns (כ-2.3 מילי-שניות)."
    },
    "difficulty_estimation": "Hard"
  }
}